!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=45)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CONST={url:{tmTypes:{followingT:"FOLLOWING",followingSubT:["FOLLOWING_LIST"],chatBotT:"CHAT_BOT",chatBotSubT:["DEFAULT_CHAT_BOT"],autoanswerT:"AUTO_ANSWER",autoanswerSubT:["DEFAULT_AUTO_ANSWER"],autogreetT:"AUTO_GREETING",autogreetSubT:["DEFAULT_AUTO_GREETING"],storiesT:"STORIES",storiesSubT:["STORIES_BY_FOLLOWERS","STORIES_BY_ACTIVE_AUDIENCE"]},base:"http://api.luxgram.ru/v1/",registration:"registration/basic/",login:"registration/basic/login",confirmation:"registration/basic/confirmation?token",instagram_addAccount:"instagram-accounts/",instagram_deleteAccount:function(e){return"instagram-accounts/"+e},instagramAccount_getMetaData:"instagram-accounts/meta",instagramAccount_checkpoint:"instagram-accounts/checkpoint/",instagramAccount_confirmKey:"instagram-accounts/checkpoint/",instagramDirect_getMetaData:"instagram-direct/meta",instagramDirect_postMessage:"instagram-direct/",instagramTaskManager:"instagram-task-manager/",instagramTaskManager_getMetaData:"instagram-task-manager/meta",instagramTaskManager_getTaskTypes:"instagram-task-manager/task/types",instagramTaskManager_getTaskByTypes:"instagram-task-manager/meta/type/",instagramTaskManager_getDefaultConfigs:"instagram-task-manager/config/type",instagramTaskManager_postStartFollowingList:"instagram-task-manager/task",instagramTaskManager_putStopTaskByID:function(e){return"instagram-task-manager/task/"+e},instagramTaskManager_delRemoveTaskByID:function(e){return"instagram-task-manager/task/"+e},instagramTaskManager_postImageAttachment:"instagram-task-manager/task/attachment/image",instagramTaskManager_getPosts:function(e){return"instagram-accounts/"+e+"/posts"},instagramTaskManager_postStartChatBot:"instagram-task-manager/task",instagramTaskManager_getLogsChatBot:"instagram-task-manager/logs/type/"},user:{defaulAvatar:"https://i.imgur.com/jNNT4LE.png",email:"",password:"",token:""},cookieStorage:{token:"user_logged",emailConfirmed:"email_confirmed"},uiSelectors:{headerLoginBox:"nav .login-box",headerNavLoginBtn:"nav ul li .js_login",headerRegBox:"nav .register-box",headerRegBtn:"nav ul li .js_register",instagram:{addAccountBtnSelector:"#js_show-login-box",addAccountBtnId:"js_show-login-box"}},events:{USER_LOGGED:"user_logged",USER_LOGOUT:"user_logout",USER_EMAIL_CONFIRMED:"user_email_confirmed",STOP_FIXED_SPINNER:"stop_fixed_spinner",messages:{RECIEVE_NEW_MESSAGE:"receive_new_message"},instagramAccouns:{INSTAGRAM_ACCOUNS_NEED_REFRESH:"instagram_accouns_need_refresh",INSTAGRAM_ACCOUNS_RENDERED:"instagram_accouns_rendered",INSTAGRAM_ACCOUNS_RENDERED_LAZY:"instagram_accouns_rendered_lazy"},autoarnswer:{IMAGE_UPLOADED:"image_loaded"},tasks:{NEW_TASK_CREATED:"new_task_created"},logs:{STOP_LOGS:"stop_logs"}},getPath:function(e,t){return"function"==typeof this.url[e]&&t?this.url.base+this.url[e](t):this.url.base+this.url[e]},getPathTypeSubtype:function(e,t,n){var a=t.type,r=t.subtype,s=t.username;return"function"==typeof this.url[e]&&a&&r?s&&n?this.url.base+this.url[e](t,n):s?this.url.base+this.url[e](t):this.url.base+this.url[e](a,r):this.url.base+this.url[e]},getPathByArr:function(e,t,n){var a=this.url.base+this.url[e],r=function(e,t){return e+"/"+t},s=a+t.reduce(r);return n?s+"?page="+n:s}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),l=n(10),u=a(l),c=n(4),d=a(c),p=function(e){return e&&e.subtype&&(e.subtype.includes("subtype/")||(e.subtype="subtype/"+e.subtype)),Object.values(e)},f=function(){function e(){r(this,e),this.network=new u.default,this.cookieStorage=d.default,this.settingPost={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}},this.postStartFollowingList=this.postStartFollowingList,this.postStartChatBot=this.postStartChatBot}return o(e,[{key:"getToken",value:function(e){var t=this.cookieStorage.get(i.CONST.cookieStorage.token);return e?{headers:{token:t}}:t}},{key:"getMetadata",value:function(e,t){var n=p(e);return this.network.sendRequest(""+i.CONST.getPathByArr("instagramTaskManager_getTaskByTypes",n),this.getToken("asHeader"),t)}},{key:"getMetadataLazy",value:function(e,t){var n=p(e);return n.push("?lazy=true"),this.network.sendRequest(""+i.CONST.getPathByArr("instagramTaskManager_getTaskByTypes",n),this.getToken("asHeader"),t)}},{key:"getTaskTypes",value:function(e,t){return this.network.sendRequest(""+i.CONST.getPath("instagramTaskManager_getTaskTypes"),this.getToken("asHeader"),t)}},{key:"stopTaskByID",value:function(e,t){var n=s({},this.settingPost,{method:"PUT",headers:s({},this.settingPost.headers,{token:this.getToken()})}),a=i.CONST.getPath("instagramTaskManager_putStopTaskByID",e);return this.network.sendRequest(a,n,t)}},{key:"deleteTaskByID",value:function(e,t){var n=s({},this.settingPost,{method:"DELETE",headers:s({},this.settingPost.headers,{token:this.getToken()})}),a=i.CONST.getPath("instagramTaskManager_delRemoveTaskByID",e);return this.network.sendRequest(a,n,t)}},{key:"getDefaultConfigs",value:function(e,t){var n=i.CONST.getPath("instagramTaskManager_getDefaultConfigs")+"/"+e.type+"/subtype/"+e.subtype;return this.network.sendRequest(n,this.getToken("asHeader"),t)}},{key:"postStartFollowingList",value:function(e,t,n){var a=s({},this.settingPost,{headers:s({},this.settingPost.headers,{token:this.getToken(),"X-Auth-Token":"e2f4336abea440489c51c5c10294ea12"})});a.body=JSON.stringify(e);var r=n?""+i.CONST.getPath(n):""+i.CONST.getPath("instagramTaskManager_postStartFollowingList");return this.network.sendRequest(r,a,t)}},{key:"postStartChatBot",value:function(e,t){return this.postStartFollowingList(e,t,"instagramTaskManager_postStartChatBot")}},{key:"postImageAutoanswer",value:function(e,t){var n={method:"POST",headers:{token:this.getToken(),Accept:"application/json","Content-type":"multipart/form-data"}};n.body=JSON.stringify(e);var a=""+i.CONST.getPath("instagramTaskManager_postImageAttachment");return this.network.sendRequest(a,n,t)}},{key:"getLogsChatBot",value:function(e,t,n){return this.network.sendRequest(""+i.CONST.getPathByArr("instagramTaskManager_getLogsChatBot",e,t),this.getToken("asHeader"),n)}},{key:"getPostsAutoanswer",value:function(e,t){var n=e.cursor?"?cursor="+e.cursor:"",a=""+i.CONST.getPath("instagramTaskManager_getPosts",e.userName||"user_not_selected")+n;return this.network.sendRequest(a,this.getToken("asHeader"),t)}},{key:"getStoriesConfig",value:function(e,t){var n=i.CONST.getPath("instagramTaskManager_getDefaultConfigs")+"/"+e.type+"/subtype/"+e.subtype;return this.network.sendRequest(n,this.getToken("asHeader"),t)}}]),e}(),m=null;m||(m=new f),t.default=m},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),l=n(10),u=a(l),c=n(4),d=a(c),p=function(){function e(){r(this,e),this.network=new u.default,this.cookieStorage=d.default,this.settingPost={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}}}return o(e,[{key:"isLoggedIn",value:function(){return!!this.getToken()}},{key:"isEmailConfirmed",value:function(){return"confirmed"===this.cookieStorage.get(i.CONST.cookieStorage.emailConfirmed)}},{key:"getToken",value:function(e){var t=this.cookieStorage.get(i.CONST.cookieStorage.token);return e?{headers:{token:t}}:t}},{key:"login",value:function(e,t){var n=s({},this.settingPost,{body:JSON.stringify(e)});return this.network.sendRequest(i.CONST.getPath("login"),n,t)}},{key:"addInstagramAccount",value:function(e,t){var n=e.username,a=e.password,r=e.ip,o=e.port,l=e.usernameProxy,u=e.passwordProxy,c={proxy:{host:r,port:o,username:l,password:u}},d=JSON.stringify(s({username:n,password:a},c)),p=s({},this.settingPost,{body:d,headers:s({},this.settingPost.headers,{token:this.getToken()})});return this.network.sendRequest(i.CONST.getPath("instagram_addAccount"),p,t)}},{key:"delInstagramAccount",value:function(e){var t={method:"DELETE",headers:s({},this.settingPost.headers,{token:this.getToken()})};return this.network.sendRequest(""+i.CONST.getPath("instagram_deleteAccount",e),t)}},{key:"getInstagramAccount",value:function(){var e=s({},this.settingPost,{method:"GET",headers:s({},this.settingPost.headers,{token:this.getToken()})});return this.network.sendRequest(i.CONST.getPath("instagram_addAccount"),e)}},{key:"confirm",value:function(e){return this.network.sendRequest(""+(i.CONST.getPath("confirmation")+e))}},{key:"register",value:function(e){var t=s({},this.settingPost,{body:JSON.stringify(e)});return this.network.sendRequest(i.CONST.getPath("registration"),t)}},{key:"getMetadata",value:function(e,t){return this.network.sendRequest(""+i.CONST.getPath("instagramAccount_getMetaData"),this.getToken("asHeader"),t)}},{key:"getMetadataLazy",value:function(e){return this.network.sendRequest(i.CONST.getPath("instagramAccount_getMetaData")+"?lazy=true",this.getToken("asHeader"),e)}},{key:"getSecurityKey",value:function(e,t){var n=s({},this.settingPost,{body:JSON.stringify({type:t}),headers:s({},this.settingPost.headers,{token:this.getToken()})});return this.network.sendRequest(""+i.CONST.getPath("instagramAccount_checkpoint")+e,n)}},{key:"confirmSecurityKey",value:function(e,t){var n={method:"DELETE",body:JSON.stringify({security_code:e}),headers:s({},this.settingPost.headers,{token:this.getToken()})};return this.network.sendRequest(""+i.CONST.getPath("instagramAccount_confirmKey")+t,n)}}]),e}(),f=null;f||(f=new p),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e,t,n){$(e).empty().append(t?"<p>status: "+t+"</p>":"").append("<p>"+n+" </p>")}function t(e,t){var n=t,a=e;a.empty(),n.forEach(function(e,t){var n=$('<li class="list-group-item"></li>').appendTo(a);$("<a/>").addClass("ui-all").text(e.username).appendTo(n)})}function n(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function a(e,t){var n=new Date(e),a=n.getMonth()+1,r=n.getDate(),s=n.getHours(),o=n.getMinutes();a=(a<10?"0":"")+a,r=(r<10?"0":"")+r,s=(s<10?"0":"")+s,o=(o<10?"0":"")+o;return t?r+"-"+a+"-"+n.getFullYear()+" "+s+":"+o:s+":"+o}function r(e){return!e||0===Object.keys(e).length}function s(e,t,n){r(t)&&console.info("taskModes is empty");var a=n||"подписок";e.empty();for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&$('<div class="custom-control custom-radio">\n                '+function(e,t){switch(e){case"AGGRESSIVE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input">\n                    <label class="custom-control-label" for="'+e+'"><strong>Агрессивный:</strong> '+t+" "+a+" в час</label>";case"MIDDLE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input">\n                    <label class="custom-control-label" for="'+e+'"><strong>Средний:</strong> '+t+" "+a+" в час</label>";case"SAFE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input" checked>\n                    <label class="custom-control-label" for="'+e+'"><strong>Безопасный:</strong> '+t+" "+a+" в час</label>";default:console.log("default",e)}}(s,t[s])+"\n            </div>").appendTo(e)}function o(e,t,n){var a=n.logsState.selectClsLogsTaskType;e.empty().addClass("border-light-color"),$('<div class="">Доступные задания</div><select name="task-subtype" class="'+a+'"></select>').appendTo(e),t.length&&($('<option class="list-group-item py-2 js_empty-subtype" value="---">---</option>').appendTo($("."+a)),t.forEach(function(e,t){$('<option class="list-group-item py-2" value="'+e+'">\n            '+(0===t?"По подписчикам":"По активной аудитории конкурентов")+"\n        </option>").appendTo($("."+a))}),$("."+a).on("change",function(){n.dropdownOnSelectCb()}))}return{showInfoMessage:e,fillList:t,fillRadioGroupList:s,isEmail:n,getFormattedDateUtil:a,addDropdown:o}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){var n=[],a=!0,r=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s={get:function(e){var t=document.cookie.match("(?:(?:^|.*; *)"+e+" *= *([^;]*).*$)|^.*$")[1];if(t)return decodeURIComponent(t)},set:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/",days:365};n.days&&(n["max-age"]=60*n.days*60*24,delete n.days),n=Object.entries(n).reduce(function(e,t){var n=r(t,2);return e+"; "+n[0]+"="+n[1]},""),document.cookie=e+"="+(encodeURIComponent(t)+n)},remove:function(e,t){return s.set(e,"",a({"max-age":-1,path:"/",days:0},t))}};t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var a=n.progress,r=n.created_at,s=n.task_id,o=n.type,i=n.status,l=n.username,u=n.mode,c=function(e){$('<li class="list-group-item p-0 py-2" data-type="'+o+'" data-task-id="'+s+'">\n                '+e+"\n            </li>").appendTo(t)},d='<div class="card-block">\n        <h4 class="card-title">На паузе</h4>\n        <div class="text-right">\n            '+(a&&a.timestamp?'<span class="text-muted">'+p.default.getFormattedDateUtil(a.timestamp)+"</span>":"")+"\n            "+(r?'<span class="text-muted">'+p.default.getFormattedDateUtil(r)+"</span>":"")+'\n        </div>\n        <span class="text-success">10%</span>\n        <div class="progress mb-3">\n            <div class="progress-bar bg-success" role="progressbar" style="width: 10%; height: 6px;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>\n        </div>\n        <button class="btn btn-warning js_btn-delete-task">Удалить</button>',f='<div class="no-gutters px-2 row task-progress">\n            <div class="col-6 align-items-center d-flex">\n                <img src="'+sessionStorage.getItem(l)+'" class="rounded-circle avatar" alt="аватар"/>\n                <h2 class="mt-0 mb-1 ml-2">'+l+'</h2>\n            </div>\n            <div class="col-6 col-6--with-borders">\n                <p class="pb-1 name"><b>ID:</b> '+s+"</p>\n                "+(r?'<p class="pb-1"><b>Запущено:</b> '+p.default.getFormattedDateUtil(r,"showFullTime")+"</p>":"")+"\n                "+(u?'<p class="pb-1"><b>Режим:</b> '+m(u)+"</p>":"")+'\n                <div class="text-center">\n                    <button class="btn btn-outline-primary js_btn-stop-task"><i class="far fa-pause-circle fa-lg"></i></button>\n                    \x3c!--button class="btn btn-warning js_btn-delete-task ml-3"><i class="far fa-trash-alt fa-lg"></i></button--\x3e\n                </div>\n            </div>\n        </div>',g='<div class="no-gutters px-2 row task-stopped">\n            <div class="col-6 align-items-center d-flex">\n                <img src="'+sessionStorage.getItem(l)+'" class="rounded-circle avatar" alt="аватар"/>\n                <h2 class="mt-0 mb-1 ml-2">'+l+'</h2>\n            </div>\n            <div class="col-6 col-6--with-borders">\n                <p class="pb-1 name"><b>ID:</b> '+s+"</p>\n                "+(n.status.reason?'<p class="my-1">'+i.reason+"</p>":"")+"\n                "+(r?'<p class="pb-1"><b>Запущено:</b> '+p.default.getFormattedDateUtil(r,"showFullTime")+"</p>":"")+"\n                "+(u?'<p class="pb-1"><b>Режим:</b> '+m(u)+"</p>":"")+'\n                <div class="text-center">\n                    <button class="btn btn-warning js_btn-delete-task"><i class="far fa-trash-alt fa-lg"></i></button>\n                </div>\n            </div>\n\n        </div>',h='<div class="col task-progress">\n                <p class="mt-0 mb-1 name"><b>ID:</b> '+s+'</p>\n            </div>\n            <button class="btn btn-warning js_btn-delete-task">Удалить</button>';switch(e){case"PAUSED":c(d);break;case"IN_PROGRESS":case"GLOBAL_PAUSE":c(f);break;case"STOPPED":c(g);break;case"FINISHED":c(h)}}function s(e,t){if(e.empty(),!t.length)return void $('<li class="list-group-item py-2">\n                <p>В этом разделе нет ни одной задачи.</p>\n            </li>').appendTo(e);t.forEach(function(t){r(t.status.state,e,t)}),$("li",e).length||$('<li class="list-group-item py-2">\n            <p>В этом разделе нет ни одной задачи.</p>\n        </li>').appendTo(e)}function o(e,t){var n=t||{type:f.CONST.url.tmTypes.followingT,subtype:f.CONST.url.tmTypes.followingSubT[0]},a=$(".js_btn-stop-task"),r=$(".js_btn-delete-task"),s=function(e){return $(e.target).closest("li").data("task-id")};a.on("click",function(t){var a=s(t);console.log("STOP Task id",a),c.default.stopTaskByID(a).then(function(t){console.log(t),i(e,n)})}),r.on("click",function(t){var a=s(t);console.log("DELETE id",a),c.default.deleteTaskByID(a).then(function(t){console.log(t),i(e,n)})})}function i(e,t){var n=e.$all,a=t||{type:f.CONST.url.tmTypes.followingT,subtype:f.CONST.url.tmTypes.followingSubT[0]};c.default.getMetadata(a).then(function(a){"ok"===a.status.state&&(s(n,a.data.meta,"isAll"),o(e,t))})}function l(){var e={$runs:$(".follow-tasks-runs"),$stopped:$(".follow-tasks-stopped"),$all:$(".follow-tasks-all")};i(e),window.PubSub.subscribe(f.CONST.events.tasks.NEW_TASK_CREATED,function(t,n){var a={type:f.CONST.url.tmTypes.followingT,subtype:f.CONST.url.tmTypes.followingSubT[0]};i(e,a)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getTasksData=i,t.init=l;var u=n(1),c=a(u),d=n(3),p=a(d),f=n(0),m=function(e){switch(e){case"AGGRESSIVE":return"Агрессивный";case"MIDDLE":return"Средний";case"SAFE":return" Безопасный"}}},function(e,t,n){"use strict";function a(e,t,n){var a=$(f.pagination),r=n.settings.pagination;e.on("click",function(t){var n=a.find("li.page-number.active"),s=r.previous;if(!r.previous)return void e.addClass("disabled").prop("disabled","disabled");b=r.previous,n.removeClass("active"),l(m,v,s)}),t.on("click",function(t){var n=a.find("li.page-number.active"),s=n.index(),o=r.next;r.next&&(b=r.next,n.removeClass("active"),s&&e.hasClass("disabled")&&e.removeClass("disabled"),l(m,v,o))}),$(f.logsTabBtn).on("click",function(e){b=1}),$(f.pagination+" "+f.paginationPgNumber).on("click",function(e){e.preventDefault();var t=$(e.target).text();b=parseInt(t,10),l(m,v,b),console.log(b)})}function r(e,t){var n=e.settings.pagination,r=$('<li class="page-item '+(n.previous?"":"disabled")+'"><a class="page-link" href="#" '+(n.previous?"":'tabindex="-1"')+">Назад</a></li>"),o=$('<li class="page-item '+(n.next?"":"disabled")+'"><a class="page-link" href="#" '+(n.next?"":'tabindex="-1"')+">Вперед</a></li>");s(t),(n.next||n.pages&&n.current===n.pages[n.pages.length-1])&&(t.append(r),n&&n.pages&&n.pages.forEach(function(e){$('<li class="page-item page-number '+(n.current===e?"active":"")+'"><a class="page-link" href="#">'+e+"</a></li>").appendTo(t)}),t.append(o)),a(r,o,e)}function s(e){e.empty()}function o(e,t,n){var a=$(".logs-pagination"),o=t.logs;if(e.empty(),!o.length)return $('<li class="list-group-item py-2">\n            <p>В этом разделе нет ни одной задачи.</p>\n        </li>').appendTo(e),void s(a);r(t,a),o.forEach(function(t){var n=t.level,a=t.value;$('<li class="list-group-item p-0 py-2">\n              <div class="media-body d-flex">\n                  <div class="col task-type '+("ERROR"===n?"text-danger":"")+'">\n                      '+(a?""+a:"")+"\n                  </div>\n              </div>\n          </li>").appendTo(e),$("li",e).length||$('<li class="list-group-item py-2" >\n                <p>В этом разделе нет ни одной задачи.</p>\n            </li>').appendTo(e)})}function i(){$("#v-pills-tab").on("click","a",function(e){e.preventDefault(),"v-pills-logs-tab"!==$(e.target).attr("id")&&(console.log("stop req"),y&&clearInterval(y))})}function l(e,t,n){t.username=h(g);var a=[t.type,"subtype/"+t.subtype,"account/"+t.username];p.default.getLogsChatBot(a,n).then(function(n){if("ok"===n.status.state){o(e,n.data),i();var a=n.data.settings.invoke_in_millis;y&&clearInterval(y),b<=1&&(y=setInterval(function(){l(e,t,b)},a))}else $('<li class="list-group-item py-2">\n                <p>Нет доступа</p>\n            </li>').appendTo(e)})}function u(e){f=e,m=$(f.tasksList),v.type=e.pathType,v.subtype=e.pathSubType}function c(e,t){$(t.currentPageCls).length&&(g=e,u(t),h()?l(m,v):console.log("select user"))}Object.defineProperty(t,"__esModule",{value:!0}),t.init=c;var d=n(1),p=function(e){return e&&e.__esModule?e:{default:e}}(d),f={currentPageCls:"",tasksList:"",logsTabBtn:"",pagination:"",paginationPgNumber:""},m="$(clsConst.tasksList)",g="someClass",h=function(){return $("."+g+" option:selected").val()},v={username:h()},b=null,y=""},function(e,t,n){"use strict";function a(e,t){l.default.getMetadataLazy().then(function(n){"ok"===n.status.state&&n.data&&n.data.accounts&&(t(e,n.data.accounts),window.PubSub.publish(o.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED_LAZY,n.data.accounts))})}function r(e,t){$("#v-pills-logs-tab").on("click",function(n){a(e,t)})}function s(e){r($(".log-users-list"),e)}Object.defineProperty(t,"__esModule",{value:!0}),t.init=s;var o=n(0),i=n(2),l=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function a(e,t){var n=$(e),a=t.stepReducer,r=t.onSubmitHandler;$(".js_profile-user-follow>.container").removeClass("container"),n.find("fieldset:first-child").fadeIn("slow"),n.find('input[type="text"]').on("focus",function(){$(this).removeClass("input-error")}),n.find(".btn-next").on("click",function(){var e=$(this).parents("fieldset"),t=!0,n=e.find('input[name="userAccountRadio"]:checked');n.length>0&&(i.username=n.parents("li").data("username")),a&&a(e.index(),i),e.find('input[type="text"],input[type="email"]').each(function(){""===$(this).val()?($(this).addClass("input-error"),t=!1):$(this).removeClass("input-error")}),t&&e.fadeOut(400,function(){$(this).next().fadeIn()})}),n.find(".btn-previous").on("click",function(){$(this).parents("fieldset").fadeOut(400,function(){$(this).prev().fadeIn()})}),$(".js_follow-speed input[type=radio]").on("click",function(){}),n.on("submit",function(e){$(this).find('input[type="text"],input[type="number"],input[type="email"]').each(function(){""===$(this).val()?(e.preventDefault(),$(this).addClass("input-error")):$(this).removeClass("input-error")}),r&&r(e),console.log("SubmitHandler END")}),$(".form-submit-finish .close").on("click",function(){console.log("form-submit-finish .close")}),$("#v-pills-create-task-tab").on("click",function(e){console.log("reset form"),"none"===$("fieldset:first-child").css("display")&&n.find("fieldset").hide("fast",function(){n.find("fieldset:first-child").show("slow")}),$(".form-submit-finish").removeClass("d-block"),$("fieldset",l).find('input:not([type="radio"]), textarea').val("")})}function r(){var e=$(".accounts-list"),t=e.find("li.media");t.addClass("js_user-radio").removeClass("py-3 media");for(var n=0;n<t.length;n++){var a=$(t[n]);a.wrapInner(function(e){return'<label class="accounts-list--label-wrapper col mb-0 media py-3" for="customRadio-'+e+'"></label>'}(n)).append(function(e){return'<div class="">\n            <input type="radio" name="userAccountRadio" id="customRadio-'+e+'" class="custom-control-input d-none" value="">\n        </div>'}(n)),a.find(".user-checkpoint .text-danger").length&&a.remove()}$(".js_user-radio").on("click","input[type=radio]",function(e){var t=$(this).parents("fieldset");$("li.active",t).removeClass("active"),$(this).closest("li").addClass("active"),$(".btn-next",t).prop("disabled",!1)})}function s(e){$(".wizard-form").length&&(a(l,e),window.PubSub.subscribe(o.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED,function(e,t){r()}))}Object.defineProperty(t,"__esModule",{value:!0}),t.init=s;var o=n(0),i={username:""},l=".wizard-form"},function(e,t,n){(function(e){!function(n,a){"use strict";var r={};n.PubSub=r;var s=n.define;!function(e){function t(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function n(e){return function(){throw e}}function a(e,t,a){try{e(t,a)}catch(e){setTimeout(n(e),0)}}function r(e,t,n){e(t,n)}function s(e,t,n,s){var o,i=u[t],l=s?r:a;if(u.hasOwnProperty(t))for(o in i)i.hasOwnProperty(o)&&l(i[o],e,n)}function o(e,t,n){return function(){var a=String(e),r=a.lastIndexOf(".");for(s(e,e,t,n);-1!==r;)a=a.substr(0,r),r=a.lastIndexOf("."),s(e,a,t,n)}}function i(e){for(var n=String(e),a=Boolean(u.hasOwnProperty(n)&&t(u[n])),r=n.lastIndexOf(".");!a&&-1!==r;)n=n.substr(0,r),r=n.lastIndexOf("."),a=Boolean(u.hasOwnProperty(n)&&t(u[n]));return a}function l(e,t,n,a){e="symbol"==typeof e?e.toString():e;var r=o(e,t,a);return!!i(e)&&(!0===n?r():setTimeout(r,0),!0)}var u={},c=-1;e.publish=function(t,n){return l(t,n,!1,e.immediateExceptions)},e.publishSync=function(t,n){return l(t,n,!0,e.immediateExceptions)},e.subscribe=function(e,t){if("function"!=typeof t)return!1;e="symbol"==typeof e?e.toString():e,u.hasOwnProperty(e)||(u[e]={});var n="uid_"+String(++c);return u[e][n]=t,n},e.subscribeOnce=function(t,n){var a=e.subscribe(t,function(){e.unsubscribe(a),n.apply(this,arguments)});return e},e.clearAllSubscriptions=function(){u={}},e.clearSubscriptions=function(e){var t;for(t in u)u.hasOwnProperty(t)&&0===t.indexOf(e)&&delete u[t]},e.unsubscribe=function(t){var n,a,r,s="string"==typeof t&&(u.hasOwnProperty(t)||function(e){var t;for(t in u)if(u.hasOwnProperty(t)&&0===t.indexOf(e))return!0;return!1}(t)),o=!s&&"string"==typeof t,i="function"==typeof t,l=!1;if(s)return void e.clearSubscriptions(t);for(n in u)if(u.hasOwnProperty(n)){if(a=u[n],o&&a[t]){delete a[t],l=t;break}if(i)for(r in a)a.hasOwnProperty(r)&&a[r]===t&&(delete a[r],l=!0)}return l}}(r),"function"==typeof s&&s.amd?s(function(){return r}):(void 0!==e&&e.exports&&(t=e.exports=r),t.PubSub=r,e.exports=t=r)}("object"==typeof window&&window||this)}).call(t,n(43)(e))},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],a=!0,r=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(){function e(){a(this,e)}return s(e,[{key:"cbErrorDefault",value:function(e){var t=$("#description").length?$("#description"):$(".error-msg");i.default.showInfoMessage(t,e.status.state,e.status.message||"error")}},{key:"checkStatus",value:function(e){if(e.status&&e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}},{key:"sendRequest",value:function(e,t,n){var a=this;return fetch(e,t).then(function(e){return Promise.all([e,e.json()])}).then(function(e){var t=r(e,2),s=t[0],o=t[1];return s.ok||(n?n(o):a.cbErrorDefault(o),a.checkStatus(s)),o})}}]),e}();t.default=l},function(e,t,n){var a,a;!function(t){e.exports=t()}(function(){var e;return function e(t,n,r){function s(i,l){if(!n[i]){if(!t[i]){var u="function"==typeof a&&a;if(!l&&u)return a(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[i]={exports:{}};t[i][0].call(d.exports,function(e){return s(t[i][1][e]||e)},d,d.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof a&&a,i=0;i<r.length;i++)s(r[i]);return s}({1:[function(t,n,a){!function(t,r){if("function"==typeof e&&e.amd)e(["module"],r);else if(void 0!==a)r(n);else{var s={exports:{}};r(s),t.emojiPicker=s.exports}}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),a=function(){function e(){t(this,e),this.initiate()}return n(e,[{key:"initiate",value:function(){var e=this;document.querySelectorAll('[data-emoji-picker="true"]').forEach(function(t){e.generateElements(t)})}},{key:"generateElements",value:function(e){var t=function(t){t.preventDefault();var n=e.selectionStart;e.value=e.value.substring(0,n)+" "+t.target.innerHTML+e.value.substring(n),a.style.display="none",e.focus(),"undefined"!=typeof angular&&angular.element(e).triggerHandler("change")};e.style.width="100%";var n=document.createElement("div");n.style.position="relative",e.parentNode.replaceChild(n,e),n.appendChild(e);var a=document.createElement("div");a.tabIndex=0,a.addEventListener("blur",function(e){a.style.display="none"},!1),a.style.position="absolute",a.style.right="2px",a.style.outline="none",a.style.top="20px",a.style.zIndex="999",a.style.display="none",a.style.width="264px",a.style.padding="7px 7px 7px 7px",a.style.marginTop="5px",a.style.overflow="hidden",a.style.background="#fff",a.style.height="200px",a.style.overflowY="auto",a.style.boxShadow="0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)",a.style.borderRadius="2px;";var r=document.createElement("a");r.style.position="absolute",r.style.top="2px",r.style.right="2px",r.style.textDecoration="none",r.setAttribute("href","javascript:void(0)"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 12 14"><path d="M8.9 8.4q-0.3 0.9-1.1 1.5t-1.8 0.6-1.8-0.6-1.1-1.5q-0.1-0.2 0-0.4t0.3-0.2q0.2-0.1 0.4 0t0.2 0.3q0.2 0.6 0.7 1t1.2 0.4 1.2-0.4 0.7-1q0.1-0.2 0.3-0.3t0.4 0 0.3 0.2 0 0.4zM5 5q0 0.4-0.3 0.7t-0.7 0.3-0.7-0.3-0.3-0.7 0.3-0.7 0.7-0.3 0.7 0.3 0.3 0.7zM9 5q0 0.4-0.3 0.7t-0.7 0.3-0.7-0.3-0.3-0.7 0.3-0.7 0.7-0.3 0.7 0.3 0.3 0.7zM11 7q0-1-0.4-1.9t-1.1-1.6-1.6-1.1-1.9-0.4-1.9 0.4-1.6 1.1-1.1 1.6-0.4 1.9 0.4 1.9 1.1 1.6 1.6 1.1 1.9 0.4 1.9-0.4 1.6-1.1 1.1-1.6 0.4-1.9zM12 7q0 1.6-0.8 3t-2.2 2.2-3 0.8-3-0.8-2.2-2.2-0.8-3 0.8-3 2.2-2.2 3-0.8 3 0.8 2.2 2.2 0.8 3z"/></svg>',r.onclick=function(){"none"===a.style.display&&(a.style.display="block"),a.focus()},n.appendChild(r);var s=document.createElement("ul");s.style.padding="0",s.style.margin="0",s.style.listStyle="none",[128512,128513,128514,129315,128515,128516,128517,128518,128521,128522,128523,128526,128525,128536,128535,128537,128538,128578,129303,129321,129300,129320,128528,128529,128566,128580,128527,128547,128549,128558,129296,128559,128554,128555,128564,128524,128539,128540,128541,129316,128530,128531,128532,128533,128579,129297,128562,9785,128577,128534,128542,128543,128548,128546,128557,128550,128551,128552,128553,129327,128556,128560,128561,128563,129322,128565,128545,128544,129324,128567,129298,129301,129314,129326,129319,128519,129312,129317,129323,129325,129488,129299,128520,128127,129313,128121,128122,128128,9760,128123,128125,128126,129302,128169,128570,128568,128569,128571,128572,128573,128576,128575,128574,128584,128585,128586,128118,129490,128102,128103,129489,128104,128105,129491,128116,128117,128110,128373,128130,128119,129332,128120,128115,128114,129493,129492,128113,129333,128112,129328,129329,128124,127877,129334,129497,129498,129499,129500,129501,129502,129503,128589,128590,128581,128582,128129,128587,128583,129318,129335,128134,128135,128694,127939,128131,128378,128111,129494,129495,129496,128704,128716,128372,128483,128100,128101,129338,127943,9975,127938,127948,127940,128675,127946,9977,127947,128692,128693,127950,127949,129336,129340,129341,129342,129337,128107,128108,128109,128143,128145,128106,129331,128170,128072,128073,9757,128070,128405,128071,9996,129310,128406,129304,129305,128400,9995,128076,128077,128078,9994,128074,129307,129308,129306,128075,129311,9997,128079,128080,128588,129330,128591,129309,128133,128066,128067,128099,128064,128065,129504,128069,128068,128139,128152,10084,128147,128148,128149,128150,128151,128153,128154,128155,129505,128156,128420,128157,128158,128159,10083,128140,128164,128162,128163,128165,128166,128168,128171,128172,128488,128495,128173,128371,128083,128374,128084,128085,128086,129507,129508,129509,129510,128087,128088,128089,128090,128091,128092,128093,128717,127890,128094,128095,128096,128097,128098,128081,128082,127913,127891,129506,9937,128255,128132,128141,128142,128053,128018,129421,128054,128021,128041,128058,129418,128049,128008,129409,128047,128005,128006,128052,128014,129412,129427,129420,128046,128002,128003,128004,128055,128022,128023,128061,128015,128017,128016,128042,128043,129426,128024,129423,128045,128001,128e3,128057,128048,128007,128063,129428,129415,128059,128040,128060,128062,129411,128020,128019,128035,128036,128037,128038,128039,128330,129413,129414,129417,128056,128010,128034,129422,128013,128050,128009,129429,129430,128051,128011,128044,128031,128032,128033,129416,128025,128026,129408,129424,129425,128012,129419,128027,128028,128029,128030,129431,128375,128376,129410,128144,127800,128174,127989,127801,129344,127802,127803,127804,127799,127793,127794,127795,127796,127797,127806,127807,9752,127808,127809,127810,127811,127815,127816,127817,127818,127819,127820,127821,127822,127823,127824,127825,127826,127827,129373,127813,129381,129361,127814,129364,129365,127805,127798,129362,129382,127812,129372,127792,127838,129360,129366,129384,129374,129472,127830,127831,129385,129363,127828,127839,127829,127789,129386,127790,127791,129369,129370,127859,129368,127858,129379,129367,127871,129387,127857,127832,127833,127834,127835,127836,127837,127840,127842,127843,127844,127845,127841,129375,129376,129377,127846,127847,127848,127849,127850,127874,127856,129383,127851,127852,127853,127854,127855,127868,129371,9749,127861,127862,127870,127863,127864,127865,127866,127867,129346,129347,129380,129378,127869,127860,129348,128298,127994,127757,127758,127759,127760,128506,128510,127956,9968,127755,128507,127957,127958,127964,127965,127966,127967,127963,127959,127960,127962,127968,127969,127970,127971,127972,127973,127974,127976,127977,127978,127979,127980,127981,127983,127984,128146,128508,128509,9962,128332,128333,9961,128331,9970,9978,127745,127747,127961,127748,127749,127750,127751,127753,9832,127756,127904,127905,127906,128136,127914,128642,128643,128644,128645,128646,128647,128648,128649,128650,128669,128670,128651,128652,128653,128654,128656,128657,128658,128659,128660,128661,128662,128663,128664,128665,128666,128667,128668,128690,128756,128757,128655,128739,128740,128738,9981,128680,128677,128678,128721,128679,9875,9973,128758,128676,128755,9972,128741,128674,9992,128745,128747,128748,128186,128641,128671,128672,128673,128752,128640,128760,128718,8987,9203,8986,9200,9201,9202,128368,128347,128359,128336,128348,128337,128349,128338,128350,128339,128351,128340,128352,128341,128353,128342,128354,128343,128355,128344,128356,128345,128357,128346,128358,127761,127762,127763,127764,127765,127766,127767,127768,127769,127770,127771,127772,127777,9728,127773,127774,11088,127775,127776,9729,9925,9928,127780,127781,127782,127783,127784,127785,127786,127787,127788,127744,127752,127746,9730,9748,9969,9889,10052,9731,9924,9732,128293,128167,127754,127875,127876,127878,127879,10024,127880,127881,127882,127883,127885,127886,127887,127888,127889,127872,127873,127895,127903,127915,127894,127942,127941,129351,129352,129353,9917,9918,129358,127936,127952,127944,127945,127934,127923,127951,127953,127954,127955,127992,129354,129349,9971,9976,127907,127933,127935,128759,129356,127919,127921,128302,127918,128377,127920,127922,9824,9829,9830,9827,9823,127183,126980,127924,127917,128444,127912,128263,128264,128265,128266,128226,128227,128239,128276,128277,127932,127925,127926,127897,127898,127899,127908,127911,128251,127927,127928,127929,127930,127931,129345,128241,128242,9742,128222,128223,128224,128267,128268,128187,128421,128424,9e3,128433,128434,128189,128190,128191,128192,127909,127902,128253,127916,128250,128247,128248,128249,128252,128269,128270,128367,128161,128294,127982,128212,128213,128214,128215,128216,128217,128218,128211,128210,128195,128220,128196,128240,128478,128209,128278,127991,128176,128180,128181,128182,128183,128184,128179,128185,128177,128178,9993,128231,128232,128233,128228,128229,128230,128235,128234,128236,128237,128238,128499,9999,10002,128395,128394,128396,128397,128221,128188,128193,128194,128450,128197,128198,128466,128467,128199,128200,128201,128202,128203,128204,128205,128206,128391,128207,128208,9986,128451,128452,128465,128274,128275,128271,128272,128273,128477,128296,9935,9874,128736,128481,9876,128299,127993,128737,128295,128297,9881,128476,9878,128279,9939,9879,128300,128301,128225,128137,128138,128682,128719,128715,128701,128703,128705,128722,128684,9904,9905,128511,127975,128686,128688,9855,128697,128698,128699,128700,128702,128706,128707,128708,128709,9888,128696,9940,128683,128691,128685,128687,128689,128695,128245,128286,9762,9763,11014,8599,10145,8600,11015,8601,11013,8598,8597,8596,8617,8618,10548,10549,128259,128260,128281,128282,128283,128284,128285].map(function(e){var n=document.createElement("li");n.style.display="inline-block",n.style.margin="5px";var a=document.createElement("a");a.style.textDecoration="none",a.style.margin="5px",a.style.position="initial",a.style.fontSize="24px",a.setAttribute("href","javascript:void(0)"),a.innerHTML=String.fromCodePoint(e),a.onmousedown=t,s.appendChild(a)}),a.appendChild(s),n.appendChild(a)}}]),e}();e.exports=a})},{}]},{},[1])(1)})},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function s(e){window.PubSub=e}function o(){$('[data-toggle="tooltip"]').tooltip()}n(42),n(44);var i=n(9),l=r(i),u=n(30),c=n(33),d=r(c),p=n(40),f=n(23),m=n(27),g=a(m),h=n(34),v=a(h),b=n(26),y=a(b),_=n(29),w=a(_),k=n(31),T=a(k),C=n(25),S=a(C),O=n(16),x=a(O),P=n(21),E=a(P),N=n(19),A=a(N),M=n(35),j=a(M),I=function(){s(l.default),o(),(new d.default).init(),(0,u.LoginForm)({_loginBox:"main .login-box",_formId:"#js_instagram-add-account",_buttonSubmitId:"#js_instagram-add-account--btn",_showLoginBoxBtnId:"#js_show-login-box",isLoginInstagram:!0}).init(),(0,p.LoginPage)({_loginBox:".auth.login .card-signin",_formId:".form-signin",_buttonSubmitId:'.form-signin [type="submit"]'}).init(),(0,f.confirmationWithRedirect)().init(),g.initHeader(),v.initMenu(),y.init(),S.init(),w.init(),T.init(),x.init(),A.init(),E.init(),j.init()};!function(){I()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e,t,n){console.log("addDropdown");var a=n.logsState.selectClsLogsTaskType;e.empty().addClass("border-light-color"),$('<div class="">Доступные задания</div><select name="task-subtype" class="'+a+'"></select>').appendTo(e),t.length&&($('<option class="list-group-item py-2 js_empty-subtype" value="---">---</option>').appendTo($("."+a)),t.forEach(function(e,t){$('<option class="list-group-item py-2" value="'+e+'">\n            '+(0===t?"По подписчикам":"По активной аудитории конкурентов")+"\n        </option>").appendTo($("."+a))}),$("."+a).on("change",function(e){n.dropdownOnSelectCb(e)}))}return{addDropdown:e}}()},function(e,t,n){"use strict";function a(e){var t=e.find("input");t.replaceWith(t.clone()),e.find(h).hide(),e.find(".image-upload-wrap").show()}function r(e,t){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:console.info("File Not Found!");break;case e.target.error.NOT_READABLE_ERR:console.info("File is not readable");break;case e.target.error.ABORT_ERR:break;default:console.info("An error occurred reading this file.")}}function s(e,t){if(e.lengthComputable){var n=Math.round(e.loaded/e.total*100);n%10==0&&console.log(n)}}function o(e){return"image/jpeg"===e.type}function i(e){var t=Math.round(e.size);return m>t}function l(e){var t=d.CONST.getPath("instagramTaskManager_postImageAttachment"),n=f.default.getToken(),a=e.files[0];console.log("handleSubmit");var r=new FormData;r.append("image",a,a.name);var s=new XMLHttpRequest;s.open("POST",t),s.setRequestHeader("token",n),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("cache-control","no-cache"),s.send(r),s.addEventListener("readystatechange",function(){4===this.readyState&&(console.log("this",this.responseText,this),window.PubSub.publish(d.CONST.events.autoarnswer.IMAGE_UPLOADED,{response:this.responseText,el:e}))})}function u(e){var t=$(e).closest(g);if(e.files&&e.files[0]){var n=new FileReader;if(console.log("readURL"),!i(e.files[0])||!o(e.files[0]))return console.log("show error message, imgSize to big "),$(g).append('\n                <div class="warning-image text-danger">\n                    <p>Доступный формат изображения jpeg или jpg</p>\n                    <p class="msg-max-size-img text-danger">Максимальный допустимый размер картинки '+m+"MB</p>\n                </div>\n            "),void setTimeout(function(){$(".warning-image").addClass("d-none")},5e3);n.onload=function(n){t.find(".image-upload-wrap").hide(),t.find(".file-upload-image").attr("src",n.target.result),t.find(h).show(),t.find(".image-title").html(e.files[0].name)},n.onerror=r,n.onprogress=s,n.readAsDataURL(e.files[0]),setTimeout(function(){return l(e)},2e3)}else a(t)}function c(){var e=$(".file-upload-btn"),t=$(".file-upload-input"),n=$(".remove-image");e.off(),t.off(),n.off(),e.on("click",function(e){$(e.target).closest(".col").find(g).find("input").trigger("click")}),t.on("change",function(e){u(e.target)}),n.on("click",function(e){a($(e.target).closest(".col").find(g))})}Object.defineProperty(t,"__esModule",{value:!0}),t.init=c;var d=n(0),p=n(1),f=function(e){return e&&e.__esModule?e:{default:e}}(p),m=1048576,g=".file-upload",h=".file-upload-content",v=$(".image-upload-wrap");v.bind("dragover",function(){$(".image-upload-wrap").addClass("image-dropping")}),v.bind("dragleave",function(){$(".image-upload-wrap").removeClass("image-dropping")})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.tplTextField=function(){return $('<div class="autoanswer-text-fields mt-2">\n    <div class="row">\n        <div class="col">\n            <textarea class="form-control answer-words" rows="4" placeholder="Введите ключевые слова на которые будет срабатывать автоответ"></textarea>\n        </div>\n        <div class="col">\n            <textarea class="form-control answer-messages" rows="4"\n                data-emoji-picker="true" style="padding: 0.25rem 1.75rem 0.25rem 0.25rem; width: 100%;min-height: 42px;"\n                placeholder="Введите сообщение, которое будет отправлено"\n            ></textarea>\n            <button class="file-upload-btn btn btn-success" type="button"\n                    data-toggle="tooltip" data-placement="top" title="Добавить изображение">\n                <i class="far fa-image fa-lg"></i>\n            </button>\n            \x3c!-- Button trigger modal --\x3e\n            <button type="button" class="btn btn-success post-upload-btn js_autoanswer-add-post" \n                data-toggle="tooltip" data-placement="top" title="Добавить изображение"\n                    data-toggle="modal" \n                    data-post-info="todo: get req to user: "\n                    data-target="#postsGridModal">\n                <i class="far fa-images fa-lg"></i>\n            </button>\n\n            <div class="mt-2">\n                <div class="file-upload">\n                    <div class="image-upload-wrap">\n                        <input class="file-upload-input" type=\'file\' accept=".jpg, .jpeg" />\n                    </div>\n                    <div class="file-upload-content">\n                        <img class="file-upload-image" src="#" alt="your image" />\n                        <div class="image-title-wrap">\n                        <button type="button" class="remove-image btn btn-warning">Удалить <span class="image-title">Загрузить</span></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(){(0,E.emoji)({page:I.currentPageCls,styles:{old:"bottom: 30px;",new:"top: -210px;"}})}function s(e,t){e.each(function(){if(""===$(this).val())return t.preventDefault(),void $(this).addClass("input-error");$(this).removeClass("input-error")})}function o(e){function t(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")}var n=$(R.fields),a=function(e){return e.val().trim().replace(/ /g,"").split(",").filter(function(e){return e.length>0})},r=[],o=!0,i=n.find(R.keyWord),l=n.find(R.answer);if(s(i,e),s(l,e),n.each(function(e,t){var n=a($(t).find(R.keyWord)),s=$(t).find(R.answer).val(),i=$(t).find(R.fileUploadBox).attr("attached-img-id"),l=$(t).find(R.addPostBtns).attr("data-post-img-id");if(!n.length||!s.length)return console.log("keyWord is empty, not push me to request"),$(t).append('\n                <p class="msg-empty-field text-danger">Пустое поле не валидно</p>\n            '),setTimeout(function(){$(".msg-empty-field").addClass("d-none")},5e3),void(o=!1);var u={key_words:n,answer:s,attachment:i?{image_id:i}:void 0};l&&(u.attachment=g({},u.attachment,{post:{id:l,type:"photo"}})),r.push(u)}),!o)return void console.log("**alarm **",R.keyWord);var u={username:M,type:I.pathType,subtype:I.pathSubType,user_default_config:{},user_custom_config:{forms:r}};_.default.postStartChatBot(u,t).then(function(e){"ok"===e.status.state&&$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>")})}function i(e,t){e.empty().addClass("border-light-color"),$('<div class="">Доступные аккаунты</div><select name="task-type" class="'+j+'"></select>').appendTo(e),t.forEach(function(e){$('<option class="list-group-item py-2" value="'+e+'">\n            '+e+"\n        </option>").appendTo($("."+j))}),$("."+j).on("change",function(){M=$("."+j+" option:selected").val(),O.init(j,I)})}function l(){$(R.fields+":not(:first-child)").remove()}function u(){$(".js_add-autoanswer").on("click",function(e){var t=$(R.fields).last();(0,A.tplTextField)().insertAfter(t),r(),P.init()}),$(".form-submit-finish .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(h.CONST.events.tasks.NEW_TASK_CREATED),l()}),$(".form-submit-finish--error .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(h.CONST.events.tasks.NEW_TASK_CREATED),l()}),k.init(i)}function c(e){M=e.username}function d(e,t){switch(e){case 0:c(t);break;default:console.log("default",e)}}function p(e){var t=this;$("#load-more").on("click",function(n){var a=$(n.target),r=a.attr("cursor");console.log("load more click"),e(null,{userName:M,cursor:r},{loadMoreHandler:t,targetButton:D})})}function f(){$("#postsGridModal").on("show.bs.modal",function(e){D=$(e.relatedTarget);var t=$(this);(0,N.getPosts)(t,{userName:M},{loadMoreHandler:p,targetButton:D}),t.find(".modal-title").text("Публикации")})}function m(){if($(I.currentPageCls).length){var e={stepReducer:d,onSubmitHandler:o};b.init(e),u(),C.init(),window.PubSub.subscribe(h.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED_LAZY,function(e,t){O.init(j,I)}),window.PubSub.subscribe(h.CONST.events.autoarnswer.IMAGE_UPLOADED,function(e,t){var n=t.response,a=n.length?JSON.parse(n):"",r=a&&a.data&&a.data.image_id;$(t.el).closest(".file-upload").attr("attached-img-id",r),console.log("image_loaded",t)}),f(),r(),P.init()}}Object.defineProperty(t,"__esModule",{value:!0});var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.init=m;var h=n(0),v=n(8),b=a(v),y=n(1),_=function(e){return e&&e.__esModule?e:{default:e}}(y),w=n(7),k=a(w),T=n(17),C=a(T),S=n(6),O=a(S),x=n(14),P=a(x),E=n(38),N=n(18),A=n(15),M="",j="js_logs-accounts",I={currentPageCls:".autoanswer-page",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:h.CONST.url.tmTypes.autoanswerT,pathSubType:h.CONST.url.tmTypes.autoanswerSubT[0]},R={fields:".autoanswer-text-fields",keyWord:"textarea.answer-words",answer:"textarea.answer-messages",fileUploadBox:".file-upload",addPostBtns:".js_autoanswer-add-post"},D={}},function(e,t,n){"use strict";function a(){if($(".autoanswer-page").length){var e={type:r.CONST.url.tmTypes.autoanswerT,subtype:r.CONST.url.tmTypes.autoanswerSubT[0]},t={$runs:$(".tasks-runs"),$stopped:$(".tasks-stopped"),$all:$(".tasks-all")};(0,s.getTasksData)(t,e),window.PubSub.subscribe(r.CONST.events.tasks.NEW_TASK_CREATED,function(n,a){(0,s.getTasksData)(t,e)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=a;var r=n(0),s=n(5)},function(e,t,n){"use strict";function a(e,t,n){var a=function(e,t,n){e?t.insertAfter(n.find("li:last-child")):t.appendTo(n)};n||e.empty(),t.forEach(function(t,r){var s=$('<li class="col-4 list-group list-inline-item m-0 p-0" data-img-id="'+t.id+'">\n            <img src="'+t.url+'" class="img-responsive p-2" alt="image" style="max-height: 200px;"/>\n        </li>');a(n,s,e)})}function r(e,t){$("#load-more").attr("cursor",t),e.removeClass("d-none")}function s(e){e.addClass("d-none")}function o(e,t,n){$("li",e).on("click",function(e){var a=$(e.target).closest("li"),r=a.attr("data-img-id");n.attr("data-post-img-id",r),console.log("click",r,t),t.modal("hide")})}function i(e,t,n){var l=n.loadMoreHandler,c=n.targetButton;u.default.getPostsAutoanswer(t).then(function(t){if("ok"===t.status.state){var n=t.data,u=e?$(".modal-footer",e):null,d=$(".modal-body .posts-list",e);e?(a(d,n.posts),e.modal("handleUpdate"),o(d,e,c)):n.posts&&(a(d,n.posts,"appendToList"),o(d,$("#postsGridModal"),c)),n.pagination&&n.pagination.cursor?(r(u,n.pagination.cursor),l(i)):s($(".modal-footer",e))}})}Object.defineProperty(t,"__esModule",{value:!0}),t.fillPosts=a,t.getPosts=i;var l=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(l)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){function t(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")}var n=$(".autoanswer-text-fields"),a=[];n.each(function(e,t){var n=$(t).find("textarea.answer-words").val();a.push(n)});var r={username:k||"the_rostyslav",type:d.CONST.url.tmTypes.autogreetT,subtype:d.CONST.url.tmTypes.autogreetSubT[0],user_default_config:{task_mode:O.user_default_config.task_mode},user_custom_config:{messages:a}};console.log("make request here**",r,JSON.stringify(r)),g.default.postStartChatBot(r,t).then(function(e){console.log("postBot"),"ok"===e.status.state&&(console.log(JSON.stringify(e)),$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>"))})}function s(e,t){e.empty().addClass("border-light-color"),$('<div class="">Доступные аккаунты</div><select name="task-type" class="'+T+'"></select>').appendTo(e),t.forEach(function(e){$('<option class="list-group-item py-2" value="'+e+'">\n            '+e+"\n        </option>").appendTo($("."+T))}),$("."+T).on("change",function(){k=$("."+T+" option:selected").val(),console.log(k),w.init(T,S)})}function o(){var e=function(e){return $('<div class="autoanswer-text-fields mt-2">\n        <div class="row">\n            <div class="col">\n                <textarea class="form-control answer-words" rows="4" placeholder="'+e+'"></textarea>\n            </div>\n        </div>\n    </div>')};$(".js_add-autoanswer").on("click",function(t){var n=$(".autoanswer-text-fields").last();e("Введите приветствие").insertAfter(n)}),$(".form-submit-finish .close").on("click",function(){console.log("alert close"),$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(d.CONST.events.tasks.NEW_TASK_CREATED)}),$(".form-submit-finish--error .close").on("click",function(){console.log("alert close"),$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(d.CONST.events.tasks.NEW_TASK_CREATED)}),v.init(s)}function i(e){k=e.username}function l(){var e=function(e,t){var n=t.cfg&&t.cfg.task_modes;e.empty();for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&$('<div class="custom-control custom-radio">\n                '+function(e,t){switch(e){case"AGGRESSIVE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input">\n                    <label class="custom-control-label" for="'+e+'"><strong>Агрессивный:</strong> '+t+" сообщений в час</label>";case"MIDDLE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input">\n                    <label class="custom-control-label" for="'+e+'"><strong>Средний:</strong> '+t+" сообщений в час</label>";case"SAFE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input" checked>\n                    <label class="custom-control-label" for="'+e+'"><strong>Безопасный:</strong> '+t+" сообщений в час</label>"}}(a,n[a])+"\n            </div>").appendTo(e)},t={type:S.pathType,subtype:S.pathSubType};g.default.getDefaultConfigs(t).then(function(t){"ok"===t.status.state&&(e($(C),t.data.found),$(C+" input[type=radio]").on("click",function(e){var t=$(e.target).attr("value");O.user_default_config.task_mode=t.toUpperCase(),console.log(O)}))})}function u(e,t){switch(e){case 0:i(t),l(),console.log(t,e);break;case 1:break;default:console.log("default",e)}}function c(){if($(S.currentPageCls).length){var e={stepReducer:u,onSubmitHandler:r};f.init(e),o(),y.init(S),window.PubSub.subscribe(d.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED_LAZY,function(e,t){w.init(T,S)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=c;var d=n(0),p=n(8),f=a(p),m=n(1),g=function(e){return e&&e.__esModule?e:{default:e}}(m),h=n(7),v=a(h),b=n(20),y=a(b),_=n(6),w=a(_),k="",T="js_logs-accounts",C=".js_autogreeting-speed",S={currentPageCls:".autogreeting-page",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:d.CONST.url.tmTypes.autogreetT,pathSubType:d.CONST.url.tmTypes.autogreetSubT[0]},O={user_default_config:{task_mode:"SAFE"}}},function(e,t,n){"use strict";function a(e){if($(e.currentPageCls).length){var t=e.pathType,n=e.pathSubType,a={type:t,subtype:n},o={$runs:$(".tasks-runs"),$all:$(".tasks-all")};(0,s.getTasksData)(o,a),window.PubSub.subscribe(r.CONST.events.tasks.NEW_TASK_CREATED,function(e,t){console.log("getTasksData **NEW_TASK_CREATED**",e,t),(0,s.getTasksData)(o,a)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=a;var r=n(0),s=n(5)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){function t(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")}var n=$(".bot-text-fields"),a=function(e){return e.val().trim().replace(/ /g,"").split(",").filter(function(e){return e.length>0})},r=[];n.each(function(e,t){var n=a($(t).find("textarea.answer-words")),s=$(t).find("textarea.answer-messages").val();r.push({key_words:n,answer:s})});var s={username:w,type:T.pathType,subtype:T.pathSubType,user_default_config:{},user_custom_config:{forms:r}};m.default.postStartChatBot(s,t).then(function(e){"ok"===e.status.state&&$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>")})}function s(e,t){e.empty().addClass("border-light-color"),$('<div class="">Доступные аккаунты</div><select name="task-type" class="'+k+'"></select>').appendTo(e),t.forEach(function(e){$('<option class="list-group-item py-2" value="'+e+'">\n            '+e+"\n        </option>").appendTo($("."+k))}),$("."+k).on("change",function(){w=$("."+k+" option:selected").val(),_.init(k,T)})}function o(){var e=function(){return $('<div class="bot-text-fields mt-2">\n        <div class="row">\n            <div class="col">\n                <textarea class="form-control answer-words" rows="4" placeholder="Введите ключевые слова или фразы через запятую, при которых будет срабатывать чат-бот"></textarea>\n            </div>\n            <div class="col">\n                <textarea class="form-control answer-messages" rows="4" placeholder="Введите сообщение, которое будет отправляться, если присутствовали ключ.слова или фразы из столбца слева"></textarea>\n            </div>\n        </div>\n    </div>')};$(".js_add-bot").on("click",function(t){var n=$(".bot-text-fields").last();e().insertAfter(n)}),$(".form-submit-finish .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(c.CONST.events.tasks.NEW_TASK_CREATED)}),$(".form-submit-finish--error .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(c.CONST.events.tasks.NEW_TASK_CREATED)}),h.init(s)}function i(e){w=e.username}function l(e,t){switch(e){case 0:i(t);break;default:console.log("default",e)}}function u(){if($(".bot-page").length){var e={stepReducer:l,onSubmitHandler:r};p.init(e),o(),b.init(),window.PubSub.subscribe(c.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED_LAZY,function(e,t){_.init(k,T)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=u;var c=n(0),d=n(8),p=a(d),f=n(1),m=function(e){return e&&e.__esModule?e:{default:e}}(f),g=n(7),h=a(g),v=n(22),b=a(v),y=n(6),_=a(y),w="",k="js_logs-accounts",T={currentPageCls:".bot-page",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:c.CONST.url.tmTypes.chatBotT,pathSubType:c.CONST.url.tmTypes.chatBotSubT[0]}},function(e,t,n){"use strict";function a(){if($(".bot-page").length){var e={type:r.CONST.url.tmTypes.chatBotT,subtype:r.CONST.url.tmTypes.chatBotSubT[0]},t={$runs:$(".tasks-runs"),$stopped:$(".tasks-stopped")};(0,s.getTasksData)(t,e),window.PubSub.subscribe(r.CONST.events.tasks.NEW_TASK_CREATED,function(n,a){(0,s.getTasksData)(t,e)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=a;var r=n(0),s=n(5)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){r()}var t=o.default,n=c(),a=function(e){t.confirm(e).then(function(e){if(e.status&&"ok"===e.status.state){u.default.set(i.CONST.cookieStorage.emailConfirmed,"confirmed"),u.default.set(i.CONST.cookieStorage.token,e.data.token);var t=sessionStorage.getItem("customersData");console.log(t),console.log("request succeeded with JSON response",e),$(".confirm-registration").append("<p>confirmation status: "+e.status.state+"</p>"),setTimeout(function(){window.location="./profile.html"},1e3)}else e.status,console.log(e)})},r=function(){var e=n.token;location.pathname.indexOf("confirm-registration")&&e&&(console.log("send req to ",e),a(e))};return{init:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.confirmationWithRedirect=r;var s=n(2),o=a(s),i=n(0),l=n(4),u=a(l),c=function(){var e=window.location.search,t={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,a){t[n]=a}),t}},function(e,t,n){"use strict";function a(){var e={type:r.CONST.url.tmTypes.followingT,subtype:r.CONST.url.tmTypes.followingSubT[0]},t={$all:$(".follow-tasks-all")};(0,s.getTasksData)(t,e),window.PubSub.subscribe(r.CONST.events.tasks.NEW_TASK_CREATED,function(n,a){(0,s.getTasksData)(t,e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.init=a;var r=n(0),s=n(5)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=t;e.empty().addClass("border-light-color"),$('<li class="list-group-item py-2"><h3>UserTaskManager</h3></li>').appendTo(e),n.forEach(function(t){$('<li class="list-group-item py-2" data-username="'+t.type+'">\n                <div class="media-body d-flex">\n                    <div class="col task-type">\n                        '+(t.task_id?'<p class="mt-0 mb-1 name">'+t.task_id+"</p>":"")+'\n                    </div>\n                    <div class="col task-subtype">\n                        '+(t.subtype?'<p class="mt-0 mb-1 name">'+t.subtype+"</p>":"")+'\n                    </div>\n                    <div class="col task-progress">\n                        '+("STOPPED"===t.status.state?'<p class="mt-0 mb-1 name">Остановлено - '+t.status.reason+"</p>":"")+'\n                    </div>\n                    \x3c!--<div class="col task-progress">\n                        '+(t.progress?'<p class="mt-0 mb-1 name">Количество - '+t.progress.count+'</p>\n                                <p class="mt-0 mb-1 name">Процент - '+t.progress.percent+"</p>":"")+"\n                    </div>--\x3e\n                </div>\n            </li>").appendTo(e)})}function s(e){v.default.getMetadata(e).then(function(e){"ok"===e.status.state&&r($(".follow-tasks-list"),e.data.meta)})}function o(){s({type:g.CONST.url.tmTypes.followingT,subtype:g.CONST.url.tmTypes.followingSubT[0]})}function i(){var e=$("#followers").val().trim().replace(/ /g,"").split(",").filter(function(e){return e.length>0});_.user_custom_config={users:e};var t=y.default.fillRadioGroupList,n={type:"FOLLOWING",subtype:"FOLLOWING_LIST"};v.default.getDefaultConfigs(n).then(function(e){if("ok"===e.status.state){var n=e.data.found.cfg.task_modes;t($(".js_follow-speed"),n)}})}function l(e){switch(e){case 0:o(_.username);break;case 1:i();break;default:console.log("default",e)}}function u(e){var t=$(e);$(".js_profile-user-follow>.container").removeClass("container"),t.find("fieldset:first-child").fadeIn("slow"),t.find('input[type="text"]').on("focus",function(){$(this).removeClass("input-error")}),t.find(".btn-next").on("click",function(){var e=$(this).parents("fieldset"),t=!0,n=e.find('input[name="userAccountRadio"]:checked');n.length>0&&(_.username=n.parents("li").data("username")),l(e.index(),_),e.find('input[type="text"],input[type="email"]').each(function(){""===$(this).val()?($(this).addClass("input-error"),t=!1):$(this).removeClass("input-error")}),t&&e.fadeOut(400,function(){$(this).next().fadeIn()})}),t.find(".btn-previous").on("click",function(){$(this).parents("fieldset").fadeOut(400,function(){$(this).prev().fadeIn()})}),$(".js_follow-speed input[type=radio]").on("click",function(){var e=$(this).attr("value");_.user_default_config={task_mode:e.toUpperCase()}}),t.on("submit",function(e){var t=$(this).find(".select-gender option:selected").val();_.user_default_config=p({},_.user_default_config,{criteria:{gender:t.toUpperCase()}});var n=document.forms["follow-form"].limit,a={from:document.forms["follow-form"].have_posts_from.value,to:document.forms["follow-form"].have_posts_to.value},r={from:document.forms["follow-form"].have_followers_from.value,to:document.forms["follow-form"].have_followers_to.value},s={from:document.forms["follow-form"].have_followings_from.value,to:document.forms["follow-form"].have_followings_to.value};if(""===n.value)return n.focus(),!1;_.user_default_config.criteria={limit:n.value,unfollow_then:!!$("#unfollow_then:checked").length,follow_on_closed_profiles:!!$("#follow_on_closed_profiles:checked").length,have_posts:a,have_followers:r,have_followings:s},$(this).find('input[type="text"],input[type="number"],input[type="email"]').each(function(){""===$(this).val()?(e.preventDefault(),$(this).addClass("input-error")):$(this).removeClass("input-error")}),_.type=g.CONST.url.tmTypes.followingT,_.subtype=g.CONST.url.tmTypes.followingSubT[0],console.log("make request**  post: StartFollowingList",_),v.default.postStartFollowingList(_).then(function(e){"ok"===e.status.state&&(console.log(JSON.stringify(e)),$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>"))})}),$(".form-submit-finish .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(g.CONST.events.tasks.NEW_TASK_CREATED)})}function c(){var e=$(".accounts-list"),t=e.find("li.media");t.addClass("js_user-radio").removeClass("py-3 media");for(var n=0;n<t.length;n++)$(t[n]).wrapInner(function(e){return'<label class="accounts-list--label-wrapper col mb-0 media py-3" for="customRadio-'+e+'"></label>'}(n)).append(function(e){return'<div class="">\n            <input type="radio" name="userAccountRadio" id="customRadio-'+e+'" class="custom-control-input d-none" value="">\n        </div>'}(n));$(".js_user-radio").on("click","input[type=radio]",function(e){var t=$(this).parents("fieldset");$("li.active",t).removeClass("active"),$(this).closest("li").addClass("active"),$(".btn-next",t).prop("disabled",!1)})}function d(){$(".follow").length&&(m.init(),u(".follow-form"),window.PubSub.subscribe(g.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED,function(e,t){c(),console.log("modifyAccList")}))}Object.defineProperty(t,"__esModule",{value:!0});var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.modifyAccList=c,t.init=d;var f=n(24),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),g=n(0),h=n(1),v=a(h),b=n(3),y=a(b);n(41);var _={username:"",user_default_config:{task_mode:"SAFE"}}},function(e,t,n){"use strict";function a(e){var t=s[e],n=t.hamburgerMenuCls,a=t.hamburgerButtonCls,r=t.hamburgerButtonCloseClass,o=t.hamburgerMenuOpenedClass;$(a).toggleClass(r),$(n).toggleClass(o)}function r(){$(s.leftMenu.hamburgerButtonCls).on("click",a.bind(this,"leftMenu")),$(s.rightMenu.hamburgerButtonCls).on("click",a.bind(this,"rightMenu")),$(s.subHeader.hamburgerButtonCls).on("click",a.bind(this,"subHeader"))}Object.defineProperty(t,"__esModule",{value:!0}),t.init=r;var s={leftMenu:{hamburgerButtonCls:"#aside_mobile__button",hamburgerMenuCls:".aside-burger-menu",hamburgerMenuOpenedClass:"burger-menu--closed",hamburgerButtonCloseClass:"burger-menu__button--close"},rightMenu:{hamburgerButtonCls:"#header_mobile_toggler",hamburgerMenuCls:".r-side-burger-menu",hamburgerMenuOpenedClass:"r-side-burger-menu--open",hamburgerButtonCloseClass:"burger-menu-right__button--close"},subHeader:{hamburgerButtonCls:"#header_mobile_topbar_toggler",hamburgerMenuCls:".sub-header",hamburgerMenuOpenedClass:"sub-header--open",hamburgerButtonCloseClass:"sub-header-button--close"}}},function(e,t,n){"use strict";function a(){$(d).text("**emailNotConfirmed** Email не подтвержден.").css("color","lightcoral")}function r(e,t){$(u.CONST.uiSelectors.headerNavLoginBtn).addClass(p).removeClass(f),$(u.CONST.uiSelectors.headerRegBtn).addClass(p).removeClass(f),$(u.CONST.uiSelectors.headerLoginBox).addClass(p).removeClass(f),$(".nav-link.js_logOut").addClass(f).removeClass(p),$(c).text("**onLoginSubscribe** вы залогинились в Luxgram успешно").css("color","lightblue"),l.default.isEmailConfirmed()||a()}function s(){var e=l.default.isLoggedIn();(l.default.isEmailConfirmed()||a(),e)?($(".nav-link.js_logOut").parent().show(),$(".js_email-confirm--text").text("вы залогинились успешно"),document.referrer.includes("confirm-registration")&&$(".js_message_logged--text").text("вы подтвердили регистрацию"),r()):($(c).text("Привет анонимный пользователь"),$(d).empty())}function o(){s()}Object.defineProperty(t,"__esModule",{value:!0}),t.initHeader=o;var i=n(2),l=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(0),c=".js_message_logged--text",d=".js_email-confirm--text",p="d-none",f="d-block"},function(e,t,n){"use strict";function a(e){var t=e.deleteBtnCls,n=$("#delete-user-promt"),a="";$(t).on("click",function(e){a=$(e.target).closest(t).data("username"),console.log(),n.modal("show")}),$(".js_acc-delete-confirm").on("click",function(e){s.default.delInstagramAccount(a).then(function(e){console.log(e),"ok"===e.status.state&&(n.hide(),window.PubSub.publish(o.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_NEED_REFRESH))})})}Object.defineProperty(t,"__esModule",{value:!0}),t.settingButtonsHandler=a;var r=n(2),s=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(0)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){var t=$(e.target);t.find(".first-step").removeClass("d-none"),t.find(".second-step").addClass("d-none"),$(".js_confirm-key").val(""),$(".js_success-feedback",t).removeAttr("style").empty()}var t="";$(".js_pass-checkpoint-btn").on("click",function(e){var n=$(e.target),a=n.data("username");t=n.data("checkpointType")||t;var r="PHONE"===t?"телефон":"email";if("EMAIL_OR_PHONE"===t)return e.stopPropagation(),void $("#security-code-phoneOremail").modal({show:!0,username:a});d.default.getSecurityKey(a,t).then(function(e){if(console.log("SecurityKey received:",e.status.state),"ok"===e.status.state){var t=$("#security-code");$(".js_success-feedback",t).empty().text("Ключ подтверждения был отправлен Вам на "+r),$("#security-code").attr("data-username",a)}})}),$(".js_confirm-security-code").on("click",function(e){var t=$(e.target),n=t.closest("#security-code").data("username"),a=t.closest(".modal").find(".modal-dialog form input.js_confirm-key"),r=a.val().trim(),s=t.closest(".modal");e.stopPropagation(),6===r.length&&d.default.confirmSecurityKey(r,n).then(function(e){"ok"===e.status.state&&s.modal("hide")}).catch(function(e){console.log("err"),$(".js_success-feedback",s).text("Запрос не отправлен").css("color","red"),console.log(e)})}),$("form input[minlength]").on("blur",function(){var e=$(this).val().trim().length;Number($(this).attr("minlength"))!==e?$(this).css("borderColor","red"):$(this).css("borderColor","#ced4da")}),$("#security-code-phoneOremail").on("hide.bs.modal",e),$("#security-code").on("hide.bs.modal",e),$(".js_get-security-code-phoneOremail").on("click",function(e){var t=$("#security-code-phoneOremail"),n=$(e.target).closest(t).find(".js_btn-type-switcher input:checked"),a=n.val(),r="PHONE"===a?"телефон":"email",s=t.data()["bs.modal"]._config,o=s.username;d.default.getSecurityKey(o,a).then(function(e){console.log("SecurityKey received:",e.status.state),"ok"===e.status.state&&($(".first-step",t).addClass("d-none"),$(".second-step",t).removeClass("d-none"),$(".js_success-feedback",t).empty().text("Ключ подтверждения был отправлен Вам на "+r))})})}function s(e,t){var n=t,a=e,r=m.CONST.user.defaulAvatar,s=function(e,t,n){return e?'<li class="list-inline-item '+n+'"><span class="figure">'+e+"</span><span>"+t+"</span></li>":'<li class="list-inline-item '+n+'"><span class="figure">0</span><span>'+t+"</span></li>"},o=function(e){return'<div class="col">\n            <ul class="list-inline text-center counts-list">\n            '+(e?s(e.media_count,"Публикации","media-count")+"\n                "+s(e.follower_count,"Подписчики","follower-count")+"\n                "+s(e.following_count,"Подписки","following-count"):s(!1,"Публикации","media-count")+"\n                "+s(!1,"Подписчики","follower-count")+"\n                "+s(!1,"Подписки","following-count"))+"\n            </ul>\n        </div>"},i=function(e,t){return"TRIGGERED"===e.status?'<button class="btn btn-outline-secondary js_pass-checkpoint-btn d-block mx-auto" \n                data-checkpoint-type="'+(e.type||"EMAIL")+'"\n                data-username="'+(t.username||"")+'"\n                data-toggle="modal" data-target="#security-code">\n                <i class="fas fa-key"></i>Пройти чекпоинт</button>':"FAIL"===t.status?'<span class="text-danger">Ошибка при добавлении</span>':void 0},l=function(e){if(h||window.location.href.includes(b))return'<div class="account-setting col-1 d-flex flex-column">\n                <button class="btn btn-outline-success p-1 mb-1 js_acc-edit"><i class="fas fa-pen m-0"></i></button>\n                <button class="btn btn-outline-secondary p-1 mb-1 js_acc-refresh"><i class="fas fa-retweet m-0"></i></button>\n                <button class="btn btn-outline-danger p-1 js_acc-delete" data-username="'+e+'"><i class="fas fa-trash m-0"></i></button>\n            </div>'};a.empty().addClass("border-light-color"),n.forEach(function(e){var t=e.info,n=e.checkpoint||e;t?$('<li class="media py-3" data-username="'+e.username+'">\n            '+(t.profile_pic_url?'<img class="ml-3 rounded" alt="User photo" src="'+t.profile_pic_url+'">':'<img class="ml-3 rounded" alt="default avatar" src="'+r+'">')+'\n            <div class="media-body d-flex">\n                <div class="col user-info">\n                    '+(e.username?'<p class="mt-0 mb-1 name lead">'+e.username+"</p>":"")+"\n                    "+(t.name?'<h4 class="mt-0 mb-1">'+t.name+"</h4>":"")+"\n                    "+(t.name,"")+'\n                    \n                </div>\n                <div class="col user-checkpoint">\n                    '+("TRIGGERED"===n.status?'<button class="btn btn-outline-secondary js_pass-checkpoint-btn d-block mx-auto" \n                            data-checkpoint-type="'+(n.type||"EMAIL")+'"\n                            data-username="'+(e.username||"")+'" \n                            data-toggle="modal" data-target="#security-code">\n                        <i class="fas fa-key"></i>Пройти чекпоинт</button>':"")+"\n                </div>\n                "+o(t)+"\n                "+(l()?l():"")+"\n            </div>\n        </li>").appendTo(a):$('<li class="media py-3" data-username="'+e.username+'">\n                <img class="ml-3 rounded" alt="default avatar" src="'+r+'">\n                <div class="media-body d-flex">\n                    <div class="col user-info">\n                        '+(e.username?'<h4 class="mt-0 mb-1 name">'+e.username+"</h4>":"")+'\n                    </div>\n                    <div class="col user-checkpoint">\n                        '+i(n,e)+"\n                    </div>\n                    "+o()+"\n                    "+l(e.username)+"\n                </div>\n            </li>").appendTo(a)}),window.PubSub.publish(m.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED,{name:name,dataArray:t}),console.log("INSTAGRAM_ACCOUNS_RENDERED")}function o(e){$(".profile-user .spinner-box").addClass("d-none"),s(v,e.data.accounts),r()}function i(){var e=$(".accounts-list");$(".profile-user .spinner-box").removeClass("d-none"),d.default.getMetadata().then(function(t){e.empty(),console.log(t.data,t.data.accounts),o(t)}).catch(function(e){setTimeout(function(){f.default.showInfoMessage($(".error-msg"),e.status||"","Не получилось загрузить доступные Instagram аккаунты")},3e3),$(".spinner-box").addClass("d-none")});var t={deleteBtnCls:".js_acc-delete"};(0,g.settingButtonsHandler)(t)}function l(){$(".js_add-instagram-account").on("click",function(e){var t=$(e.target),n=t.closest(".modal").find(".modal-dialog .modal-body"),a=n.find('input[name="username"]').val().trim(),r=n.find('input[name="pass"]').val().trim(),s=n.find('input[name="ip"]').val().trim(),o=n.find('input[name="port"]').val().trim(),i=n.find('input[name="usernameProxy"]').val().trim(),l=n.find('input[name="passProxy"]').val().trim(),u=$("form",n),c=u.get(0);if(e.preventDefault(),c.checkValidity()?y({username:a,password:r,usernameProxy:i,passwordProxy:l,ip:s,port:o}):(c.reportValidity&&c.reportValidity(),u.addClass("form-validation")),!(a&&r&&s&&function(e){return/^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(e)}(s)&&o&&function(e){return/^([0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/.test(e)}(o)&&i&&l))return e.stopPropagation(),void console.log("not valid fields")})}function u(){if(v.length){var e=d.default.getMetadata();v.length&&(l(),e.then(function(e){o(e);var t={deleteBtnCls:".js_acc-delete"};(0,g.settingButtonsHandler)(t)}).catch(function(e){setTimeout(function(){f.default.showInfoMessage($(".error-msg"),e.status||"","Не получилось загрузить доступные Instagram аккаунты")},3e3),$(".spinner-box").addClass("d-none")}),window.PubSub.subscribe(m.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_NEED_REFRESH,function(e,t){i()}),window.PubSub.subscribe(m.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED,function(e,t){t.dataArray.forEach(function(e){var t=e.info&&e.info.profile_pic_url||m.CONST.user.defaulAvatar;sessionStorage.setItem(e.username,t)})}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=u;var c=n(2),d=a(c),p=n(3),f=a(p),m=n(0),g=n(28),h=$(".instagram-accounts-page").length,v=$(".accounts-list"),b="instagram-accounts",y=function(e){var t=function(e){console.log("ERROR",e),f.default.showInfoMessage($(".error-msg"),e.status.state,e.status.message||"Login error")};d.default.addInstagramAccount(e,t).then(function(e){e&&e.status&&(console.log(e,e.status),i())}).catch(function(e){console.log(e)}),console.log("submit",e)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){y()}var n=this,a=e._formId,r=e._buttonSubmitId,s=e._showLoginBoxBtnId,i=e._loginBox,u=o.default,d=$(a),m=d.find('input[name="mail"]'),g=$("#description"),h=function(e){var t=function(e){$(i).append("<p>result.status.message</p>")};return u.login(e,t).then(function(e){e&&e.data&&e.data.token?(c.default.set(f.CONST.cookieStorage.token,e.data.token),$(".nav-link.js_logOut").parent().show(),p.default.showInfoMessage(g,e.status.state,e.status.message||"Login succsess")):e.status?(console.log(e),p.default.showInfoMessage(n.$textAreaDescription,"<p>status: "+e.status.state+"</p><p> message: "+e.status.message+"</p>")):console.log(e)}).then(function(e){e&&e.status&&(console.log(e),p.default.showInfoMessage(g,e.status.state,e.status.message||"Login error"))})},v=function(t){var n=m.val(),a=d.find('input[name="pass"]').val(),r=t||{email:n,password:a};e.isLoginInstagram||(m.val(m.val().toLocaleLowerCase()),h(r).then(function(){l.default.publish(f.CONST.events.USER_LOGGED,"login")}))},b=function(){c.default.remove(f.CONST.cookieStorage.token),l.default.publish(f.CONST.events.USER_LOGOUT)},y=function(){var t=$(s),n=$(i);t.on("click",function(){e.isLoginInstagram||n.css({top:0,right:0}).addClass("bg-light border mt-5 mx-auto position-absolute"),n.addClass("d-block").removeClass("d-none")});$(r).on("click",function(e){e.preventDefault();var t=d.get(0);t.checkValidity()&&p.default.isEmail(m.val())?v():(t.reportValidity&&t.reportValidity(),d.addClass("form-validation"))}),$(".nav-link.js_logOut").on("click",function(e){e.preventDefault(),b(),$(e.target).parent().hide(),p.default.showInfoMessage(g,"Logged out")}),l.default.subscribe(f.CONST.events.USER_LOGOUT,function(e){$(f.CONST.uiSelectors.headerNavLoginBtn).addClass("d-block").removeClass("d-none"),$(f.CONST.uiSelectors.headerRegBtn).addClass("d-block").removeClass("d-none"),$(".nav-link.js_logOut").addClass("d-none").removeClass("d-block"),$(".js_message_logged--text").text("Вы вышли из аккаунта")}),$(document).on("click",function(e){var t=$(e.target).closest("nav.navbar").find(n).length,a=$(e.target).attr("id")===f.CONST.uiSelectors.instagram.addAccountBtnId;t||!n.hasClass("d-block")||a||n.addClass("d-none").removeClass("d-block")})};return{init:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginForm=r;var s=n(2),o=a(s),i=n(9),l=a(i),u=n(4),c=a(u),d=n(3),p=a(d),f=n(0)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){var e=$(".messages-list"),t=$(".messages-user-list");return!!e.length&&!!t.length}function s(e){var t=$(".messages-user-list"),n=h.default.getMetadata(w),a="";e||(a=t.find("li .collapse.show").attr("id")),n.then(function(n){n.data&&(n.data.meta.sort(function(e,t){return e.username.localeCompare(t.username)}),(0,v.fillUserList)(t,n.data),n.data.settings&&n.data.settings.invoke_in_millis&&(C=n.data.settings.invoke_in_millis),e?t.find("li:first-child .collapse").addClass("show"):$("#"+a).addClass("show"))})}function o(e,t){if(!P.allMsgLoaded){P.firstLoad&&(P.cursor=e.prev_cursor,P.firstLoad=!1);var n=k.data("conversation"),a=n.username,r=n.conversationId;y.default.add($("#mainChatPart"),"my-5 py-5"),h.default.getMetadataDetailConversation(w,{username:a,conversationId:r,cursor:P.cursor}).then(function(e){var n=e.data.meta.pagination&&e.data.meta.pagination.prev_cursor;y.default.remove(),x({$list:k,dataArray:e.data.meta.messages,isAppendPrevMsg:"appentPrevMsg",stateCfg:T}),n?(P.cursor=n,k.scrollTop(k.scrollTop()+30)):P.allMsgLoaded=!0,S&&(clearInterval(S),t(e.data.meta.pagination.prev_cursor))})}}function i(e,t){function n(e){e!==O&&(O=e,r=!0,console.log("prevCursor",e))}var a=!1,r=!0;O=t.prev_cursor,setTimeout(function(){k.on("scroll",function(){var e=$(this).scrollTop();a||(e+$(this).innerHeight()>=this.scrollHeight||e<=45&&(t&&r?(r=!1,o(t,n)):$(".messages-list-box").find(".load-more").remove()),a=!0,window.setTimeout(function(){a=!1},50))})},e+200)}function l(e,t,n){h.default.getMetadataDetailConversation(w,{username:e,conversationId:t}).then(function(a){(0,v.fillMassagesList)({$list:k,dataArray:a.data.meta.messages,stateCfg:T}),y.default.remove(),$(".js_send-message-box").removeClass("d-none"),$(".messages-list").attr("data-conversation",JSON.stringify({username:e,conversationId:t})),n&&(k.animate({scrollTop:k[0].scrollHeight-k[0].clientHeight},10),N&&(E=a.data.meta.messages[a.data.meta.messages.length-1],console.log(E),N=!1)),i(10,a.data.meta.pagination)})}function u(){var e="",t=$("#sendMessageTextArea");$("#sendMessageButton").on("click",function(e){var n=t.val(),a=k.data("conversation"),r=a.username,s=a.conversationId;y.default.add($(e.target),"spinner-box--sendMsg"),h.default.postMetadataDetailConversation(w,{username:r,conversationId:s,value:n}).then(function(e){e&&e.status&&"ok"===e.status.state&&(l(r,s),t.val(""),y.default.remove(),window.PubSub.publish(_.CONST.events.messages.RECIEVE_NEW_MESSAGE,{username:r,conversationId:s,value:n,result:e}))})}),(0,v.messageAreaHendler)(t,$("#sendMessageButton")),$(document).on("click",".list-group-item .collapse",function(t){t.stopPropagation();var n=$(t.target).closest(".list-group-item").data("username");e=$(t.target).closest(".media").data("conversation-id"),y.default.add($("#mainChatPart"),"my-5 py-5"),l(n,e,"isScrollDown"),N=!0,C=C>6e3?C:1e4,S&&clearInterval(S),S=setInterval(function(){e=$(t.target).closest(".media").data("conversation-id"),console.log(S,e),l(n,e)},C),setInterval(function(){s()},C)}),window.PubSub.subscribe(_.CONST.events.messages.RECIEVE_NEW_MESSAGE,function(e,t){var n=t.username,a=t.conversationId,r=t.value,s=t.resultFromServer,o=$('.messages-user-list .list-group-item[data-username="'+n+'"] div[data-conversation-id="'+a+'"]');console.log("set val from text-area",r),console.log("resultFromServer: ",s),o.find(".summary").text(r)})}function c(){r()&&(s("setActiveFirst"),u())}Object.defineProperty(t,"__esModule",{value:!0}),t.init=c;var d=n(11),p=a(d),f=n(2),m=a(f),g=n(37),h=a(g),v=n(32),b=n(39),y=a(b),_=n(0),w=m.default.getToken(),k=$(".messages-list"),T={pageIncrement:0,loadingFlag:!1,setSingleVal:!1},C="",S=!1,O="",x=function(e){function t(e,t,n){n&&$("li",e).remove(),e.css({overflow:"auto"}),$("<li/>").addClass("list-group-item text-center").text(t).appendTo(a)}var n=e.dataArray,a=e.$list,r=e.stateCfg;return"FINAL_PAGE"!==r.loadingFlag&&("FAIL"===n?(t(a,"Failure, possible key not correct.",!0),!1):"STOP_LOAD"===r.loadingFlag&&0!==n.length?(r.loadingFlag="FINAL_PAGE",t(a,"No more results.",!1),!1):null!==n&&n.length?void(0,v.fillMassagesList)(e):(t(a,"No results found.",!0),!1))};$(document).ready(function(){if(r()){var e=(new p.default,$('textarea[data-emoji-picker="true"] ~ div')),t=e.attr("style"),n=t.replace("top: 20px;","top: -210px;");e.attr("style",n)}});var P={cursor:"pagination.prev_cursor",firstLoad:!0,allMsgLoaded:!1},E="",N=!0},function(e,t,n){"use strict";function a(e,t){t.pageIncrement=0,e.empty()}function r(e){var t=e.$list,n=e.dataArray,r=e.isAppendPrevMsg,s=e.stateCfg,o=n,l=t,u=function(e,t,n){var a="";switch(t.toLowerCase()){case"photo":a='<div class="chat-img">\n                    <img src="'+e+'" alt="Content Image" class="content-image">\n                </div>';break;case"link":a='<div class="chat-img">\n                <a target="_blank" href="'+e+'">'+e+"</a></div>";break;default:a='<div class="chat-text '+n+'" >'+e+"</div>"}return a},c=function(e,t,n){e?t.insertBefore(n.find("li:first-child")):t.appendTo(n)};r||(l.empty().addClass("border-light-color"),a(l,s),$('<li class="mt-auto"></li>').appendTo(l)),o.forEach(function(e){var t=e,n=t.value.replace(/(?:\r\n|\r|\n)/g,"<br />");if("left"===t.side.toLowerCase()){var a=$('<li class="chat-item chat-item-left col flex-column-reverse" value="'+t.value+'">\n                <div class="d-flex">\n                '+(t.profile_pic_url?'<div class="chat-img-box"> \n                            <img src="'+t.profile_pic_url+'" alt="User Avatar" class="">\n                        </div>':"")+'\n                <div>\n                    <p class="chat-username text-muted">'+t.username+"</p>\n                    "+u(t.value,t.type,"text-left")+'\n                </div>\n                    <small class="chat-time-text">'+i.default.getFormattedDateUtil(t.timestamp)+"</small>\n                </div>\n                </div>\n            </li>");c(r,a,l)}else{var s=$('<li class="chat-item chat-item-right col flex-column-reverse" value="'+t.value+'">\n                <div class="d-flex justify-content-end">\n                    '+u(n,t.type,"text-right")+'\n                    <small class="pull-right chat-time-text">'+i.default.getFormattedDateUtil(t.timestamp)+"</small>\n                    </div>\n            </li>");c(r,s,l)}})}function s(e,t){var n=t.meta,a=e,r="",s=function(e){var t="";return e.forEach(function(n){e.length>1?t+='<img src="'+n.profile_pic_url+'" alt=\'image\' class="media-photo mr-1 media-photo--group" style="width: 24px;">':t+='<img src="'+n.profile_pic_url+'" alt=\'image\' class="media-photo mr-1" style="width: 24px;">'}),t},o=function(e){var t="";return e.forEach(function(e){t+='\n            <div class="media p-1" data-conversation-id="'+e.id+'">\n                '+s(e.to)+'\n                <div class="media-body">\n                    <h5 class="title">'+e.title+"</h5>\n                    "+(e.last_message&&parseInt(e.last_message.length,10)>0&&1===e.to.length?'<p class="summary '+(e.is_unread?"font-weight-bold":"text-muted")+'">'+e.last_message+"</p>\n                            "+(e.is_unread?'<span class="summary-dot"></span>':""):"")+"\n                </div>\n            </div>"}),t};a.empty().addClass("border-light-color"),n.forEach(function(e,t){r+='<li class="list-group-item" data-toggle="collapse" data-target="#collapse-'+t+'" data-username="'+e.username+'" \n                aria-expanded="true" aria-controls="collapse-'+t+'">\n            <div class="border-bottom mb-1 media pb-2" id="heading-'+t+'">\n                <span class="mr-3">\n                    <img src="'+e.profile_pic_url+'" alt="avatar"\n                    class="media-photo rounded-circle">\n                </span>\n                '+(e.unread_conversations>0?'<span class="badge badge-secondary position-absolute p-2">'+e.unread_conversations+"</span>":"")+'\n                <div class="media-body">\n                    <h4 class="title">\n                        '+e.username+'\n                    </h4>\n                </div>\n            </div>\n            <div id="collapse-'+t+'" class="collapse" aria-labelledby="heading-'+t+'" data-parent="#accordion">\n                '+o(e.conversations)+"\n            </div>\n        </li>"}),$(r).appendTo(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.messageAreaHendler=void 0,t.clearMassagesList=a,t.fillMassagesList=r,t.fillUserList=s;var o=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.messageAreaHendler=function(e,t){e.on("keydown",function(e){13===e.keyCode&&(e.ctrlKey?(e.preventDefault(),e.target.value=e.target.value+"\n"):(e.target.value.trim().length&&t.trigger("click"),e.preventDefault()))})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(9),i=a(o),l=n(2),u=a(l),c=n(4),d=a(c),p=n(0),f=n(3),m=a(f),g={form:".auth.register .form-signin",submitBtn:'[type="submit"]'},h=function(){function e(){r(this,e),this.user=u.default,this.$form=$(g.form),this.$email=this.$form.find('input[name="mail"]'),this.$textAreaDescription=$("#description"),this.formData={email:"test1_email@m.ru",password:"password"}}return s(e,[{key:"init",value:function(){$(".auth.register").length&&this.bindEvents()}},{key:"submitForm",value:function(e){var t=this,n=this.$email.val(),a=this.$form.find('input[name="pass"]'),r=this.$form.find('input[name="pass-confirm"]'),s=this.$form.find('input[name="pass"]').val();if(this.$form.find('input[name="pass-confirm"]').val()!==s)return a.addClass("input-error"),void r.addClass("input-error");this.$email.val(this.$email.val().toLocaleLowerCase()),this.formData=e||{email:n,password:s},this.user.register(this.formData).then(function(e){e.data&&e.data.token?(d.default.set(p.CONST.cookieStorage.emailConfirmed,"false"),d.default.set(p.CONST.cookieStorage.token,e.data.token),i.default.publish(p.CONST.events.USER_LOGGED),m.default.showInfoMessage(t.$textAreaDescription,e.status.state,e.status.message||"Register and Login succsess")):m.default.showInfoMessage(t.$textAreaDescription,e.status.state,e.status.message||"no result.data found")}).then(function(e){e&&e.status&&(console.log(e),m.default.showInfoMessage(t.$textAreaDescription,e.status.state),$(".login-box").show())}).catch(function(e){console.log("request failed",e),m.default.showInfoMessage(t.$textAreaDescription,e.message),console.log("do something")})}},{key:"bindEvents",value:function(){var e=this,t=p.CONST.uiSelectors.headerRegBox,n=$(g.submitBtn);n.on("click",function(t){var a=e.$form.get(0);t.preventDefault(),n.is(":disabled")||(a.checkValidity()?e.submitForm():(a.reportValidity&&a.reportValidity(),e.$form.addClass("form-validation")))}),$(document).on("click",function(e){!$(e.target).closest("nav.navbar").find(".register-box").length&&$(t).hasClass("d-block")&&$(t).addClass("d-none").removeClass("d-block")})}}]),e}();t.default=h},function(e,t,n){"use strict";function a(){["instagram-accounts","autoanswer","stories","autogreeting","follow","messages","chat-bot"].forEach(function(e){window.location.href.includes(e)&&$('nav.aside-burger-menu a[href*="'+e+'"]').addClass("text-info").removeClass("text-light")})}Object.defineProperty(t,"__esModule",{value:!0}),t.initMenu=a},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=M.wizardFormName,n=document.forms[t],a=n.limit;if(""===a.value)return a.focus(),!1;var r=g({},j,{user_default_config:g({},j.user_default_config,{criteria:{max_views:a.value}}),user_custom_config:{},type:A.pathType,username:E});if(r.subtype===h.CONST.url.tmTypes.storiesSubT[1]){var s=I($(n).find(M.competitors));r.user_custom_config={competitors:s}}$(n).find('input[type="text"],input[type="number"],input[type="email"]').each(function(){""===$(this).val()?(e.preventDefault(),$(this).addClass("input-error")):$(this).removeClass("input-error")}),console.log("onSubmitHandler **request**  post: StartFollowingList",r),b.default.postStartFollowingList(r).then(function(e){"ok"===e.status.state&&(console.log(JSON.stringify(e)),$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>"))})}function o(e){var t=N.selectClsLogsTaskType;A.pathSubType=$("."+t+" option:selected").val(),$(".js_logs-container").addClass("d-block"),$("option.js_empty-subtype").remove()}function i(e,t){var n=N.selectCls;e.empty().addClass("border-light-color"),$('<div class="">Доступные аккаунты</div><select name="task-type" class="'+n+'"></select>').appendTo(e),t.forEach(function(e){$('<option class="list-group-item py-2" value="'+e+'">\n            '+e+"\n        </option>").appendTo($("."+n))}),$("."+n).on("change",function(){E=$("."+n+" option:selected").val(),P.init(n,A)})}function l(){$(".js_get-stories-type input[type=radio]").on("click",function(e){var t=$(e.target).attr("value");j.subtype=t.toUpperCase(),console.log(j)}),$(".form-submit-finish .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(h.CONST.events.tasks.NEW_TASK_CREATED)}),$(".form-submit-finish--error .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(h.CONST.events.tasks.NEW_TASK_CREATED)}),_.default.addDropdown($(N.wrapperSubtype),h.CONST.url.tmTypes.storiesSubT,{logsState:N,dropdownOnSelectCb:o}),O.init(i)}function u(e){var t=e.cfg.task_modes,n=M.taskMode;_.default.fillRadioGroupList($(n),t," "),$(n+" input[type=radio]").on("click",function(e){var t=$(e.target).attr("value");j.user_default_config.task_mode=t.toUpperCase()})}function c(){var e={type:A.pathType,subtype:j.subtype},t=function(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")};b.default.getStoriesConfig(e,t).then(function(e){if("ok"===e.status.state){var t=e.data.found,n=t.cfg.criteria.max_views;u(t),$("#limit").val(n)}})}function d(e){E=e.username}function p(e){var t=M.wizardForm;if(j.subtype===h.CONST.url.tmTypes.storiesSubT[1]){var n=$(t+" fieldset").get(e+1);$(n).find(".form-bottom>.row").after('<div class="row">\n            <label class="">Конкуренты</label>\n            <textarea class="form-control stories-competitors mb-2" rows="1"></textarea></div>'),console.log("end")}}function f(e,t){switch(e){case 0:d(t);break;case 1:c();break;case 2:console.log(t,e),p(e);break;default:console.log("default",e)}}function m(){var e=$(A.currentPageCls).length;if(e){console.log(A.currentPageCls);var t={stepReducer:f,onSubmitHandler:s};k.init(t),l(),C.init({isInStoriesPage:e})}}Object.defineProperty(t,"__esModule",{value:!0});var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.init=m;var h=n(0),v=n(1),b=r(v),y=n(3),_=r(y),w=n(8),k=a(w),T=n(36),C=a(T),S=n(7),O=a(S),x=n(6),P=a(x),E="",N={selectCls:"js_logs-accounts",selectClsLogsTaskType:"js_logs-subtypes",wrapperSubtype:".log-subype"},A={currentPageCls:".stories-page",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:h.CONST.url.tmTypes.storiesT,pathSubType:h.CONST.url.tmTypes.storiesSubT[0]},M={wizardForm:".wizard-form",wizardFormName:"wizard-form",fields:".autoanswer-text-fields",taskMode:".js_task-mode",competitors:"textarea.stories-competitors"},j={subtype:h.CONST.url.tmTypes.storiesSubT[0],user_default_config:{task_mode:"SAFE"}},I=function(e){return e.val().trim().replace(/ /g,"").split(",").filter(function(e){return e.length>0})}},function(e,t,n){"use strict";function a(e){var t=$(e.target).find("option:selected").val(),n=s({},c,{subtype:t});$(".js_logs-container").addClass("d-block"),$("option.js_empty-subtype").remove(),(0,i.getTasksData)(d,n)}function r(e){e.isInStoriesPage&&(u.default.addDropdown(p.wrapperSubtype,o.CONST.url.tmTypes.storiesSubT,{logsState:p,dropdownOnSelectCb:a}),window.PubSub.subscribe(o.CONST.events.tasks.NEW_TASK_CREATED,function(e,t){(0,i.getTasksData)(d,c)}))}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.init=r;var o=n(0),i=n(5),l=n(13),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c={type:o.CONST.url.tmTypes.storiesT,subtype:o.CONST.url.tmTypes.storiesSubT[0]},d={$all:$(".tasks-all"),$stopped:$(".tasks-stopped")},p={wrapperSubtype:$(".subtype--box")}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),l=n(10),u=a(l),c=n(4),d=a(c),p=function(){function e(){r(this,e),this.network=new u.default,this.cookieStorage=d.default,this.settingPost={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}}}return o(e,[{key:"isLoggedIn",value:function(){return!!this.getToken()}},{key:"isEmailConfirmed",value:function(){return"confirmed"===this.cookieStorage.get(i.CONST.cookieStorage.emailConfirmed)}},{key:"getToken",value:function(){return this.cookieStorage.get(i.CONST.cookieStorage.token)}},{key:"getMetadata",value:function(e,t){return this.network.sendRequest(""+i.CONST.getPath("instagramDirect_getMetaData"),{headers:{token:e}},t)}},{key:"getMetadataDetailConversation",value:function(e,t,n){var a=t.cursor?"?cursor="+t.cursor:"";return this.network.sendRequest(i.CONST.getPath("instagramDirect_getMetaData")+"/"+t.username+"/"+t.conversationId+a,{headers:{token:e}},n)}},{key:"postMetadataDetailConversation",value:function(e,t,n){var a=s({},this.settingPost,{body:JSON.stringify({value:t.value}),headers:s({},this.settingPost.headers,{token:this.getToken()})});return this.network.sendRequest(i.CONST.getPath("instagramDirect_postMessage")+"/"+t.username+"/"+t.conversationId+"/text",a,n)}}]),e}(),f=null;f||(f=new p),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emoji=void 0;var a=n(11),r=function(e){return e&&e.__esModule?e:{default:e}}(a);t.emoji=function(e){if($(e.page).length){var t=(new r.default,$('textarea[data-emoji-picker="true"] ~ div')),n=t.attr("style"),a=n.replace(e.styles.old,e.styles.new);t.attr("style",a)}}},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s={inline:"global-inline-spinner",overlay:"global-overlay-spinner",fixed:"global-fixed-spinner",button:"button--load"},o=function(){function e(t){a(this,e),this.startButtonSpinner=function(e,t){e.addClass(s.button),e.find(".spinner-box--button").length||e.prepend('<div class="spinner-box spinner-box--button justify-content-center position-relative p-0 m-0 bg-transparent '+t+'">\n            <div class="spin-animation">\n                <svg aria-hidden="true" data-prefix="far" data-icon="sync-alt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" \n                    class="fa-fw">\n                    <path fill="currentColor" d="M483.515 28.485L431.35 80.65C386.475 35.767 324.485 8 256 8 123.228 8 14.824 112.338 8.31 243.493 7.971 250.311 13.475 256 20.301 256h28.045c6.353 0 11.613-4.952 11.973-11.294C66.161 141.649 151.453 60 256 60c54.163 0 103.157 21.923 138.614 57.386l-54.128 54.129c-7.56 7.56-2.206 20.485 8.485 20.485H492c6.627 0 12-5.373 12-12V36.971c0-10.691-12.926-16.045-20.485-8.486zM491.699 256h-28.045c-6.353 0-11.613 4.952-11.973 11.294C445.839 370.351 360.547 452 256 452c-54.163 0-103.157-21.923-138.614-57.386l54.128-54.129c7.56-7.56 2.206-20.485-8.485-20.485H20c-6.627 0-12 5.373-12 12v143.029c0 10.691 12.926 16.045 20.485 8.485L80.65 431.35C125.525 476.233 187.516 504 256 504c132.773 0 241.176-104.338 247.69-235.493.339-6.818-5.165-12.507-11.991-12.507z" class=""></path></svg>\n            </div>\n        </div>')},this.stopButtonSpinner=function(e){e.removeClass(s.button)},this.cfg=t||{},$.extend(s,this.cfg.classes)}return r(e,[{key:"start",value:function(e,t){e.find("i").toggleClass(t).addClass("fa-spin fa-spinner")}},{key:"stop",value:function(e,t){e.find("i").toggleClass(t).removeClass("fa-spin fa-spinner")}},{key:"add",value:function(e,t){this.$el=e,e.prepend('<div class="spinner-box justify-content-center '+t+'">\n            <div class="spin-animation">\n                <svg aria-hidden="true" data-prefix="far" data-icon="sync-alt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-sync-alt fa-w-16 fa-fw fa-2x"><path fill="currentColor" d="M483.515 28.485L431.35 80.65C386.475 35.767 324.485 8 256 8 123.228 8 14.824 112.338 8.31 243.493 7.971 250.311 13.475 256 20.301 256h28.045c6.353 0 11.613-4.952 11.973-11.294C66.161 141.649 151.453 60 256 60c54.163 0 103.157 21.923 138.614 57.386l-54.128 54.129c-7.56 7.56-2.206 20.485 8.485 20.485H492c6.627 0 12-5.373 12-12V36.971c0-10.691-12.926-16.045-20.485-8.486zM491.699 256h-28.045c-6.353 0-11.613 4.952-11.973 11.294C445.839 370.351 360.547 452 256 452c-54.163 0-103.157-21.923-138.614-57.386l54.128-54.129c7.56-7.56 2.206-20.485-8.485-20.485H20c-6.627 0-12 5.373-12 12v143.029c0 10.691 12.926 16.045 20.485 8.485L80.65 431.35C125.525 476.233 187.516 504 256 504c132.773 0 241.176-104.338 247.69-235.493.339-6.818-5.165-12.507-11.991-12.507z" class=""></path></svg>\n            </div>\n        </div>')}},{key:"remove",value:function(){this.$el.find(".spinner-box").remove()}}]),e}(),i=null;i||(i=new o),t.default=i},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){$(".auth.login").length&&b()}var n=this,a=e._formId,r=e._buttonSubmitId,s=e._loginBox,i=o.default,u=$(a),d=u.find('input[name="mail"]'),m=$("#description"),g=function(e){var t=function(e){$(s).append("<p>result.status.message</p>")};return i.login(e,t).then(function(e){e&&e.data&&e.data.token?(c.default.set(f.CONST.cookieStorage.token,e.data.token),$(".nav-link.js_logOut").parent().show(),p.default.showInfoMessage(m,e.status.state,e.status.message||"Login succsess")):e.status?(console.log(e),p.default.showInfoMessage(n.$textAreaDescription,"<p>status: "+e.status.state+"</p><p> message: "+e.status.message+"</p>")):console.log(e)}).then(function(e){e&&e.status&&(console.log(e),p.default.showInfoMessage(m,e.status.state,e.status.message||"Login error"))})},h=function(t){var n=d.val(),a=u.find('input[name="pass"]').val(),r=t||{email:n,password:a};e.isLoginInstagram||(d.val(d.val().toLocaleLowerCase()),g(r).then(function(){window.location.href="/instagram-integration/instagram-accounts.html"}))},v=function(){c.default.remove(f.CONST.cookieStorage.token),l.default.publish(f.CONST.events.USER_LOGOUT)},b=function(){var e=$(s);$(r).on("click",function(e){e.preventDefault();var t=u.get(0);console.log(p.default,p.default.isEmail(d.val())),t.checkValidity()&&p.default.isEmail(d.val())?h():(t.reportValidity&&t.reportValidity(),u.addClass("form-validation"))}),$(".nav-link.js_logOut").on("click",function(e){e.preventDefault(),v(),$(e.target).parent().hide(),p.default.showInfoMessage(m,"Logged out")}),l.default.subscribe(f.CONST.events.USER_LOGOUT,function(e){$(f.CONST.uiSelectors.headerNavLoginBtn).addClass("d-block").removeClass("d-none"),$(f.CONST.uiSelectors.headerRegBtn).addClass("d-block").removeClass("d-none"),$(".nav-link.js_logOut").addClass("d-none").removeClass("d-block"),$(".js_message_logged--text").text("Вы вышли из аккаунта")}),$(document).on("click",function(t){var n=$(t.target).closest("nav.navbar").find(e).length,a=$(t.target).attr("id")===f.CONST.uiSelectors.instagram.addAccountBtnId;n||!e.hasClass("d-block")||a||e.addClass("d-none").removeClass("d-block")})};return{init:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginPage=r;var s=n(2),o=a(s),i=n(9),l=a(i),u=n(4),c=a(u),d=n(3),p=a(d),f=n(0)},function(module,exports){if("undefined"==typeof brutusin)window.brutusin=new Object;else if("object"!=typeof brutusin)throw"brutusin global variable already exists";!function(){String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();(void 0===t||t>n.length)&&(t=n.length),t-=e.length;var a=n.indexOf(e,t);return-1!==a&&a===t}),String.prototype.includes||(String.prototype.includes=function(){"use strict";return-1!==String.prototype.indexOf.apply(this,arguments)}),String.prototype.format||(String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;t++){var n=new RegExp("\\{"+t+"\\}","gi");e=e.replace(n,arguments[t])}return e});var BrutusinForms=new Object;BrutusinForms.messages={validationError:"Validation error",required:"This field is **required**",invalidValue:"Invalid field value",addpropNameExistent:"This property is already present in the object",addpropNameRequired:"A name is required",minItems:"At least `{0}` items are required",maxItems:"At most `{0}` items are allowed",pattern:"Value does not match pattern: `{0}`",minLength:"Value must be **at least** `{0}` characters long",maxLength:"Value must be **at most** `{0}` characters long",multipleOf:"Value must be **multiple of** `{0}`",minimum:"Value must be **greater or equal than** `{0}`",exclusiveMinimum:"Value must be **greater than** `{0}`",maximum:"Value must be **lower or equal than** `{0}`",exclusiveMaximum:"Value must be **lower than** `{0}`",minProperties:"At least `{0}` properties are required",maxProperties:"At most `{0}` properties are allowed",uniqueItems:"Array items must be unique",addItem:"Add item",true:"True",false:"False"},BrutusinForms.decorators=new Array,BrutusinForms.addDecorator=function(e){BrutusinForms.decorators[BrutusinForms.decorators.length]=e},BrutusinForms.onResolutionStarted=function(e){},BrutusinForms.onResolutionFinished=function(e){},BrutusinForms.onValidationError=function(e,t){e.focus(),e.className.includes(" error")||(e.className+=" error"),alert(t)},BrutusinForms.onValidationSuccess=function(e){e.className=e.className.replace(" error","")},BrutusinForms.postRender=null,BrutusinForms.instances=new Array,BrutusinForms.create=function(schema){function validateDepencyMapIsAcyclic(){function e(t,n,a){if(n.hasOwnProperty(a))return void(error="Schema dependency graph has cycles");if(n[a]=null,!t.hasOwnProperty(a)){t[a]=null;var r=dependencyMap[a];if(r)for(var s=0;s<r.length;s++)e(t,n,r[s]);delete n[a]}}var t=new Object;for(var n in dependencyMap)t.hasOwnProperty(n)||e(t,new Object,n)}function appendChild(e,t,n){e.appendChild(t);for(var a=0;a<BrutusinForms.decorators.length;a++)BrutusinForms.decorators[a](t,n)}function createPseudoSchema(e){var t=new Object;for(var n in e)"items"!==n&&"properties"!==n&&"additionalProperties"!==n&&(t[n]="pattern"===n?new RegExp(e[n]):e[n]);return t}function getDefinition(e){var t=e.split("/"),n=root;for(var a in t)"0"!==a&&(n=n[t[a]]);return n}function containsStr(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}function renameRequiredPropeties(e){if(e)if(e.hasOwnProperty("oneOf"))for(var t in e.oneOf)renameRequiredPropeties(e.oneOf[t]);else if(e.hasOwnProperty("$ref")){var n=getDefinition(e.$ref);renameRequiredPropeties(n)}else if("object"===e.type){if(e.properties){e.hasOwnProperty("required")&&Array.isArray(e.required)&&(e.requiredProperties=e.required,delete e.required);for(var a in e.properties)renameRequiredPropeties(e.properties[a])}if(e.patternProperties)for(var r in e.patternProperties){var s=e.patternProperties[r];(s.hasOwnProperty("type")||s.hasOwnProperty("$ref")||s.hasOwnProperty("oneOf"))&&renameRequiredPropeties(e.patternProperties[r])}e.additionalProperties&&(e.additionalProperties.hasOwnProperty("type")||e.additionalProperties.hasOwnProperty("oneOf"))&&renameRequiredPropeties(e.additionalProperties)}else"array"===e.type&&renameRequiredPropeties(e.items)}function populateSchemaMap(e,t){var n=createPseudoSchema(t);if(n.$id=e,schemaMap[e]=n,t){if(t.hasOwnProperty("oneOf")){n.oneOf=new Array,n.type="oneOf";for(var a in t.oneOf){var r=e+"."+a;n.oneOf[a]=r,populateSchemaMap(r,t.oneOf[a])}}else if(t.hasOwnProperty("$ref")){var s=getDefinition(t.$ref);if(s){if(t.hasOwnProperty("title")||t.hasOwnProperty("description")){var o={};for(var i in s)o[i]=s[i];t.hasOwnProperty("title")&&(o.title=t.title),t.hasOwnProperty("description")&&(o.description=t.description),s=o}populateSchemaMap(e,s)}}else if("object"===t.type){if(t.properties){n.properties=new Object;for(var i in t.properties){var r=e+"."+i;n.properties[i]=r;var l=t.properties[i];t.requiredProperties&&(containsStr(t.requiredProperties,i)?l.required=!0:l.required=!1),populateSchemaMap(r,l)}}if(t.patternProperties){n.patternProperties=new Object;for(var u in t.patternProperties){var c=e+"["+u+"]";n.patternProperties[u]=c;var d=t.patternProperties[u];d.hasOwnProperty("type")||d.hasOwnProperty("$ref")||d.hasOwnProperty("oneOf")?populateSchemaMap(c,t.patternProperties[u]):populateSchemaMap(c,SCHEMA_ANY)}}if(t.additionalProperties){var r=e+"[*]";n.additionalProperties=r,t.additionalProperties.hasOwnProperty("type")||t.additionalProperties.hasOwnProperty("oneOf")?populateSchemaMap(r,t.additionalProperties):populateSchemaMap(r,SCHEMA_ANY)}}else"array"===t.type&&(n.items=e+"[#]",populateSchemaMap(n.items,t.items));if(t.hasOwnProperty("dependsOn")){null===t.dependsOn&&(t.dependsOn=["$"]);for(var p=new Array,a=0;a<t.dependsOn.length;a++)t.dependsOn[a]?t.dependsOn[a].startsWith("$")?p[a]=t.dependsOn[a]:e.endsWith("]")?p[a]=e+"."+t.dependsOn[a]:p[a]=e.substring(0,e.lastIndexOf("."))+"."+t.dependsOn[a]:p[a]="$";schemaMap[e].dependsOn=p;for(var a=0;a<p.length;a++){var f=dependencyMap[p[a]];f||(f=new Array,dependencyMap[p[a]]=f),f[f.length]=e}}}}function renderTitle(e,t,n){if(e&&t){var a=document.createElement("label");"any"!==n.type&&"object"!==n.type&&"array"!==n.type&&(a.htmlFor=getInputId());if(appendChild(a,document.createTextNode(t+":"),n),n.description&&(a.title=n.description),n.required){var r=document.createElement("sup");appendChild(r,document.createTextNode("*"),n),appendChild(a,r,n),a.className="required"}appendChild(e,a,n)}}function getInputId(){return formId+"_"+inputCounter}function validate(e){var t=!0;if(e.hasOwnProperty("getValidationError")){var n=e.getValidationError();n?(BrutusinForms.onValidationError(e,n),t=!1):BrutusinForms.onValidationSuccess(e)}if(e.childNodes)for(var a=0;a<e.childNodes.length;a++)validate(e.childNodes[a])||(t=!1);return t}function clear(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}function render(e,t,n,a,r,s){var o=getSchemaId(n),i=getSchema(o);renderInfoMap[o]=new Object,renderInfoMap[o].titleContainer=e,renderInfoMap[o].container=t,renderInfoMap[o].parentObject=a,renderInfoMap[o].propertyProvider=r,renderInfoMap[o].value=s,clear(e),clear(t);var l=renderers[i.type];if(l&&!i.dependsOn)i.title?renderTitle(e,i.title,i):r&&renderTitle(e,r.getValue(),i),s||(s=void 0!==initialValue&&null!==initialValue?getInitialValue(n):i.default),l(t,n,a,r,s);else if(i.$ref&&obj.schemaResolver){var u=function(e){if(e&&e.hasOwnProperty(n)&&JSON.stringify(schemaMap[n])!==JSON.stringify(e[n])){cleanSchemaMap(n),cleanData(n),populateSchemaMap(n,e[n]);var t=renderInfoMap[n];t&&render(t.titleContainer,t.container,n,t.parentObject,t.propertyProvider,t.value)}BrutusinForms.onResolutionFinished(a)};BrutusinForms.onResolutionStarted(a),obj.schemaResolver([n],obj.getData(),u)}}function createPropertyProvider(e,t){var n=new Object;return n.getValue=e,n.onchange=t,n}function getInitialValue(id){var ret;try{eval("ret = initialValue"+id.substring(1))}catch(e){ret=null}return ret}function getValue(schema,input){if("function"==typeof input.getValue)return input.getValue();var value;return value="select"===input.tagName.toLowerCase()?input.options[input.selectedIndex].value:input.value,""===value?null:("integer"===schema.type?(value=parseInt(value),isFinite(value)||(value=null)):"number"===schema.type?(value=parseFloat(value),isFinite(value)||(value=null)):"boolean"===schema.type?"input"===input.tagName.toLowerCase()?(value=input.checked)||(value=!1):"select"===input.tagName.toLowerCase()&&(value="true"===input.value||"false"!==input.value&&null):"any"===schema.type&&value&&eval("value="+value),value)}function getSchemaId(e){return e.replace(/\["[^"]*"\]/g,"[*]").replace(/\[\d*\]/g,"[#]")}function getParentSchemaId(e){return e.substring(0,e.lastIndexOf("."))}function getSchema(e){return schemaMap[e]}function cleanSchemaMap(e){for(var t in schemaMap)e.startsWith(t)&&delete schemaMap[t]}function cleanData(e){new Expression(e).visit(data,function(e,t,n){delete t[n]})}function onDependencyChanged(e,t){var n=dependencyMap[e];if(n&&obj.schemaResolver){var a=function(e){if(e)for(var n in e)if(JSON.stringify(schemaMap[n])!==JSON.stringify(e[n])){cleanSchemaMap(n),cleanData(n),populateSchemaMap(n,e[n]);var a=renderInfoMap[n];a&&render(a.titleContainer,a.container,n,a.parentObject,a.propertyProvider,a.value)}BrutusinForms.onResolutionFinished(t)};BrutusinForms.onResolutionStarted(t),obj.schemaResolver(n,obj.getData(),a)}}function Expression(e){(null===e||0===e.length||"."===e)&&(e="$");for(var t=new Array,n=function(e){if(null===e)return null;for(var t=new Array,n=null,a=0,r=0;r<e.length;r++)'"'===e.charAt(r)?null===n?n='"':'"'===n&&(n=null,t[t.length]=e.substring(a,r+1).trim(),a=r+1):"'"===e.charAt(r)?null===n?n="'":"'"===n&&(n=null,t[t.length]=e.substring(a,r+1).trim(),a=r+1):"["===e.charAt(r)?null===n&&(a!==r&&(t[t.length]=e.substring(a,r).trim()),t[t.length]="[",a=r+1):"]"===e.charAt(r)?null===n&&(a!==r&&(t[t.length]=e.substring(a,r).trim()),t[t.length]="]",a=r+1):"."===e.charAt(r)?null===n&&(a!==r&&(t[t.length]=e.substring(a,r).trim()),a=r+1):r===e.length-1&&(t[t.length]=e.substring(a,r+1).trim());return t}(e),a=!1,r=0,s="",o=0;o<n.length;o++){var i=n[o];if("["===i){if(a)throw"Error parsing expression '"+e+"': Nested [ found";a=!0,r=0,s+=i}else if("]"===i){if(!a)throw"Error parsing expression '"+e+"': Unbalanced ] found";a=!1,s+=i,t[t.length]=s,s=""}else if(a){if(r>0)throw"Error parsing expression '"+e+"': Multiple tokens found inside a bracket";s+=i,r++}else t[t.length]=i;if(o===n.length-1&&a)throw"Error parsing expression '"+e+"': Unbalanced [ found"}this.exp=e,this.queue=t,this.visit=function(e,t){function n(e,a,r,s,o){if(null!=r){var i=a.shift();if("$"===i){e="$";var i=a.shift()}if(i)if(Array.isArray(r)){if(!i.startsWith("["))throw"Node '"+e+"' is of type array";var l=i.substring(1,i.length-1);if(l.equals("#"))for(var u=0;u<r.length;u++){var c=r[u];n(e+i,a.slice(0),c,r,u),n(e+"["+u+"]",a.slice(0),c,r,u)}else if("$"===l){var c=r[r.length-1];n(e+i,a.slice(0),c,r,r.length-1)}else{var d=parseInt(l);if(isNaN(d))throw"Element '"+l+"' of node '"+e+"' is not an integer, or the '$' last element symbol,  or the wilcard symbol '#'";if(0>d)throw"Element '"+l+"' of node '"+e+"' is lower than zero";var c=r[d];n(e+i,a.slice(0),c,r,d)}}else{if("object"!=typeof r)throw"boolean"==typeof r||"number"==typeof r||"string"==typeof r?"Node is leaf but still are tokens remaining: "+i:"Node type '"+typeof r+"' not supported for index field '"+e+"'";if("[*]"===i)for(var p in r){var c=r[p];n(e+i,a.slice(0),c,r,p),n(e+'["'+p+'"]',a.slice(0),c,r,p)}else{var c;if(i.startsWith("[")){var l=i.substring(1,i.length-1);if(!l.startsWith('"')&&!l.startsWith("'"))throw"Element '"+l+"' of node '"+e+"' must be a string expression or wilcard '*'";l=l.substring(1,l.length()-1),e+=i,c=r[l]}else e=e.length>0?e+"."+i:i,c=r[i];n(e,a,c,r,i)}}else t(r,s,o)}}n(this.exp,this.queue,e)}}var SCHEMA_ANY={type:"any"},obj=new Object,schemaMap=new Object,dependencyMap=new Object,renderInfoMap=new Object,container,data,error,initialValue,inputCounter=0,root=schema,formId="BrutusinForms#"+BrutusinForms.instances.length;renameRequiredPropeties(schema),populateSchemaMap("$",schema),validateDepencyMapIsAcyclic();var renderers=new Object;return renderers.integer=function(e,t,n,a,r){renderers.string(e,t,n,a,r)},renderers.number=function(e,t,n,a,r){renderers.string(e,t,n,a,r)},renderers.any=function(e,t,n,a,r){renderers.string(e,t,n,a,r)},renderers.string=function(e,t,n,a,r){var s,o=getSchemaId(t),i=getParentSchemaId(o),l=getSchema(o),u=getSchema(i);if("any"===l.type)s=document.createElement("textarea"),r&&(s.value=JSON.stringify(r,null,4),l.readOnly&&(s.disabled=!0));else if(l.media)s=document.createElement("input"),s.type="file",appendChild(s,c,l);else if(l.enum){if(s=document.createElement("select"),!l.required){var c=document.createElement("option"),d=document.createTextNode("");c.value="",appendChild(c,d,l),appendChild(s,c,l)}for(var p=0,f=0;f<l.enum.length;f++){var c=document.createElement("option"),d=document.createTextNode(l.enum[f]);c.value=l.enum[f],appendChild(c,d,l),appendChild(s,c,l),r&&l.enum[f]===r&&(p=f,l.required||p++,l.readOnly&&(s.disabled=!0))}1===l.enum.length?s.selectedIndex=1:s.selectedIndex=p}else{if(s=document.createElement("input"),"integer"===l.type||"number"===l.type)s.type="number",s.step=l.step?""+l.step:"any","number"!=typeof r&&(r=null);else if("date-time"===l.format)try{s.type="datetime-local"}catch(e){s.type="text"}else"email"===l.format?s.type="email":"text"===l.format?s=document.createElement("textarea"):s.type="text";null!==r&&void 0!==r&&(s.value=r,l.readOnly&&(s.disabled=!0))}return s.schema=o,s.setAttribute("autocorrect","off"),s.getValidationError=function(){try{var e=getValue(l,s);if(null===e){if(l.required){if(!u||"object"!==u.type)return BrutusinForms.messages.required;if(u.required)return BrutusinForms.messages.required;for(var t in n)if(null!==n[t])return BrutusinForms.messages.required}}else{if(l.pattern&&!l.pattern.test(e))return BrutusinForms.messages.pattern.format(l.pattern.source);if(l.minLength&&(!e||l.minLength>e.length))return BrutusinForms.messages.minLength.format(l.minLength);if(l.maxLength&&e&&l.maxLength<e.length)return BrutusinForms.messages.maxLength.format(l.maxLength)}if(null!==e&&!isNaN(e)){if(l.multipleOf&&e%l.multipleOf!=0)return BrutusinForms.messages.multipleOf.format(l.multipleOf);if(l.hasOwnProperty("maximum")){if(l.exclusiveMaximum&&e>=l.maximum)return BrutusinForms.messages.exclusiveMaximum.format(l.maximum);if(!l.exclusiveMaximum&&e>l.maximum)return BrutusinForms.messages.maximum.format(l.maximum)}if(l.hasOwnProperty("minimum")){if(l.exclusiveMinimum&&e<=l.minimum)return BrutusinForms.messages.exclusiveMinimum.format(l.minimum);if(!l.exclusiveMinimum&&e<l.minimum)return BrutusinForms.messages.minimum.format(l.minimum)}}}catch(e){return BrutusinForms.messages.invalidValue}},s.onchange=function(){var e;try{e=getValue(l,s)}catch(t){e=null}n?n[a.getValue()]=e:data=e,onDependencyChanged(o,s)},l.description&&(s.title=l.description,s.placeholder=l.description),s.onchange(),s.id=getInputId(),inputCounter++,appendChild(e,s,l),n},renderers.boolean=function(e,t,n,a,r){var s,o=getSchemaId(t),i=getSchema(o);if(i.required)s=document.createElement("input"),s.type="checkbox",!0===r&&(s.checked=!0);else{s=document.createElement("select");var l=document.createElement("option"),u=document.createTextNode("");u.value="",appendChild(l,u,i),appendChild(s,l,i);var c=document.createElement("option"),d=document.createTextNode(BrutusinForms.messages.true);c.value="true",appendChild(c,d,i),appendChild(s,c,i);var p=document.createElement("option"),f=document.createTextNode(BrutusinForms.messages.false);p.value="false",appendChild(p,f,i),appendChild(s,p,i),!0===r?s.selectedIndex=1:!1===r&&(s.selectedIndex=2)}s.onchange=function(){n?n[a.getValue()]=getValue(i,s):data=getValue(i,s),onDependencyChanged(o,s)},s.schema=o,s.id=getInputId(),inputCounter++,i.description&&(s.title=i.description),s.onchange(),appendChild(e,s,i)},renderers.oneOf=function(e,t,n,a,r){var s=getSchemaId(t),o=getSchema(s),i=document.createElement("select"),l=document.createElement("div");l.innerHTML="",i.type="select",i.schema=s;var u=document.createElement("option");u.value=null,appendChild(i,u,o);for(var c=0;c<o.oneOf.length;c++){var d=document.createElement("option"),p=s+"."+c,f=getSchema(p),m=document.createTextNode(f.title);if(d.value=o.oneOf[c],appendChild(d,m,o),appendChild(i,d,o),void 0!==r&&null!==r&&(o.readOnly&&(i.disabled=!0),r.hasOwnProperty("type")&&f.hasOwnProperty("properties")&&f.properties.hasOwnProperty("type"))){var g=getSchema(f.properties.type);r.type===g.enum[0]&&(i.selectedIndex=c+1,render(null,l,t+"."+(i.selectedIndex-1),n,a,r))}}i.onchange=function(){render(null,l,t+"."+(i.selectedIndex-1),n,a,r)},appendChild(e,i,o),appendChild(e,l,o)},renderers.object=function(e,t,n,a,r){function s(e,t,n,a,r,s){var o=getSchemaId(n),i=getSchema(o),l=t.tBodies[0],u=document.createElement("tr"),c=document.createElement("td");c.className="add-prop-name";var d=document.createElement("table"),p=document.createElement("tr"),f=document.createElement("td"),m=document.createElement("td"),g="$"+Object.keys(e).length+"$",h=document.createElement("td");h.className="prop-value";var v=document.createElement("input");v.type="text";var b;s&&(b=RegExp(s)),v.getValidationError=function(){return v.previousValue!==v.value&&e.hasOwnProperty(v.value)?BrutusinForms.messages.addpropNameExistent:v.value?void 0:BrutusinForms.messages.addpropNameRequired};var y=createPropertyProvider(function(){if(v.value){if(!b)return v.value;if(-1!==v.value.search(b))return v.value}return g},function(t){y.getValue()!==t&&(t&&e.hasOwnProperty(t)||(t=g),(e.hasOwnProperty(t)||b&&-1===y.getValue().search(b))&&(e[y.getValue()]=e[t],delete e[t]))});v.onblur=function(){if(v.previousValue!==v.value){for(var t=v.value,n=1;v.previousValue!==t&&e.hasOwnProperty(t);)t=v.value+"("+n+")",n++;return v.value=t,y.onchange(v.previousValue),void(v.previousValue=v.value)}};var _=document.createElement("button");_.setAttribute("type","button"),_.className="remove",appendChild(_,document.createTextNode("x"),i),_.onclick=function(){delete e[v.value],t.deleteRow(u.rowIndex),v.value=null,y.onchange(v.previousValue)},appendChild(f,v,i),appendChild(m,_,i),appendChild(p,f,i),appendChild(p,m,i),appendChild(d,p,i),appendChild(c,d,i),void 0!==s&&(v.placeholder=s),appendChild(u,c,i),appendChild(u,h,i),appendChild(l,u,i),appendChild(t,l,i),render(null,h,n,e,y,r),a&&(v.value=a,v.onblur())}var o=getSchemaId(t),i=getSchema(o),l=new Object;n?(a.getValue()||0===a.getValue())&&(n[a.getValue()]=l):data=l;var u=document.createElement("table");u.className="object";var c=document.createElement("tbody");appendChild(u,c,i);var d=0;if(i.hasOwnProperty("properties")){d=i.properties.length;for(var p in i.properties){var f=document.createElement("tr"),m=document.createElement("td");m.className="prop-name";var g=t+"."+p,h=getSchema(getSchemaId(g)),v=document.createElement("td");v.className="prop-value",appendChild(c,f,h),appendChild(f,m,h),appendChild(f,v,h);var b=function(e){var t=new Object;return t.getValue=function(){return e},t.onchange=function(e){},t}(p),y=null;r&&(y=r[p]),render(m,v,g,l,b,y)}}var _=[];if(i.patternProperties||i.additionalProperties){var w=document.createElement("div");if(appendChild(w,u,i),i.patternProperties)for(var k in i.patternProperties){var T=i.patternProperties[k],C=document.createElement("div");C.className="add-pattern-div";var S=document.createElement("button");if(S.setAttribute("type","button"),S.pattern=k,S.id=t+"["+k+"]",S.onclick=function(){s(l,u,this.id,void 0,void 0,this.pattern)},(i.maxProperties||i.minProperties)&&(S.getValidationError=function(){return i.minProperties&&d+u.rows.length<i.minProperties?BrutusinForms.messages.minProperties.format(i.minProperties):i.maxProperties&&d+u.rows.length>i.maxProperties?BrutusinForms.messages.maxProperties.format(i.maxProperties):void 0}),T.description&&(S.title=T.description),appendChild(S,document.createTextNode("Add "+k),i),appendChild(C,S,i),r)for(var O in r)if(!i.properties||!i.properties.hasOwnProperty(O)){var $=RegExp(k);-1!==O.search($)&&-1===_.indexOf(O)&&(s(l,u,t+"["+k+"]",O,r[O],k),_.push(O))}appendChild(w,C,i)}if(i.additionalProperties){var x=getSchema(i.additionalProperties),S=document.createElement("button");if(S.setAttribute("type","button"),S.onclick=function(){s(l,u,t+"[*]",void 0)},(i.maxProperties||i.minProperties)&&(S.getValidationError=function(){return i.minProperties&&d+u.rows.length<i.minProperties?BrutusinForms.messages.minProperties.format(i.minProperties):i.maxProperties&&d+u.rows.length>i.maxProperties?BrutusinForms.messages.maxProperties.format(i.maxProperties):void 0}),x.description&&(S.title=x.description),appendChild(S,document.createTextNode("Add"),i),appendChild(w,S,i),r)for(var O in r)i.properties&&i.properties.hasOwnProperty(O)||-1===_.indexOf(O)&&s(l,u,t+'["'+p+'"]',O,r[O])}appendChild(e,w,i)}else appendChild(e,u,i)},renderers.array=function(e,t,n,a,r){function s(e,t,n,a,r){var s=getSchemaId(n),o=getSchema(s),i=document.createElement("tbody"),l=document.createElement("tr");l.className="item";var u=document.createElement("td");u.className="item-index";var c=document.createElement("td");c.className="item-action";var d=document.createElement("td");d.className="item-value";var p=document.createElement("button");p.setAttribute("type","button"),p.className="remove",!0===r&&(p.disabled=!0),appendChild(p,document.createTextNode("x"),o);var f=function(){for(var e=0;e<t.rows.length;e++){t.rows[e].cells[0].innerHTML=e+1}};p.onclick=function(){e.splice(l.rowIndex,1),t.deleteRow(l.rowIndex),f()},appendChild(c,p,o),appendChild(u,document.createTextNode(t.rows.length+1),o),appendChild(l,u,o),appendChild(l,c,o),appendChild(l,d,o),appendChild(i,l,o),appendChild(t,i,o);var m=createPropertyProvider(function(){return l.rowIndex});render(null,d,n,e,m,a)}var o=getSchemaId(t),i=getSchema(o),l=getSchema(i.items),u=new Array;n?(a.getValue()||0===a.getValue())&&(n[a.getValue()]=u):data=u,a&&(a.onchange=function(e){delete n[e],n[a.getValue()]=u});var c=document.createElement("div"),d=document.createElement("table");d.className="array",appendChild(c,d,i),appendChild(e,c,i);var p=document.createElement("button");if(i.readOnly&&(p.disabled=!0),p.setAttribute("type","button"),p.getValidationError=function(){if(i.minItems&&i.minItems>d.rows.length)return BrutusinForms.messages.minItems.format(i.minItems);if(i.maxItems&&i.maxItems<d.rows.length)return BrutusinForms.messages.maxItems.format(i.maxItems);if(i.uniqueItems)for(var e=0;e<u.length;e++)for(var t=e+1;t<u.length;t++)if(JSON.stringify(u[e])===JSON.stringify(u[t]))return BrutusinForms.messages.uniqueItems},p.onclick=function(){s(u,d,t+"[#]",null)},l.description&&(p.title=l.description),appendChild(p,document.createTextNode(BrutusinForms.messages.addItem),i),appendChild(c,d,i),appendChild(c,p,i),r&&r instanceof Array)for(var f=0;f<r.length;f++)s(u,d,t+"["+f+"]",r[f],i.readOnly);appendChild(e,c,i)},obj.render=function(e,t){container=e,initialValue=t;var n=document.createElement("form");if(n.className="brutusin-form",n.onsubmit=function(e){return!1},container?appendChild(container,n):appendChild(document.body,n),error){var a=document.createElement("label");appendChild(a,document.createTextNode(error)),a.className="error-message",appendChild(n,a)}else render(null,n,"$",null,null);dependencyMap.hasOwnProperty("$")&&onDependencyChanged("$"),BrutusinForms.postRender&&BrutusinForms.postRender(obj)},obj.getRenderingContainer=function(){return container},obj.validate=function(){return validate(container)},obj.getData=function(){function e(t,n){if(null===i&&(i=SCHEMA_ANY),n.$ref&&(n=getDefinition(n.$ref)),t instanceof Array){if(0===t.length)return null;for(var a=new Array,r=0;r<t.length;r++)a[r]=e(t[r],n.items);return a}if(""===t)return null;if(t instanceof Object){var a=new Object,s=!1;for(var o in t)if(!o.startsWith("$")||!o.endsWith("$")){var i=null;if(n.hasOwnProperty("properties")&&n.properties.hasOwnProperty(o)&&(i=n.properties[o]),null===i&&n.hasOwnProperty("additionalProperties")&&"object"==typeof n.additionalProperties&&(i=n.additionalProperties),null===i&&n.hasOwnProperty("patternProperties"))for(var l in n.patternProperties){var u=RegExp(l);if(-1!==o.search(u)){i=n.patternProperties[l];break}}var c=e(t[o],i);null!==c&&(a[o]=c,s=!0)}return s||n.required?a:null}return t}return container?e(data,schema):null},BrutusinForms.instances[BrutusinForms.instances.length]=obj,obj},brutusin["json-forms"]=BrutusinForms}()},function(e,t){},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function a(e){return e&&DataView.prototype.isPrototypeOf(e)}function r(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return w.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function c(e){var t=new FileReader,n=u(t);return t.readAsArrayBuffer(e),n}function d(e){var t=new FileReader,n=u(t);return t.readAsText(e),n}function p(e){for(var t=new Uint8Array(e),n=new Array(t.length),a=0;a<t.length;a++)n[a]=String.fromCharCode(t[a]);return n.join("")}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:w.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:w.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:w.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():w.arrayBuffer&&w.blob&&a(e)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):w.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||T(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):w.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},w.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(c)}),this.text=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return d(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},w.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(e){var t=e.toUpperCase();return C.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=g(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),a=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(a),decodeURIComponent(r))}}),t}function b(e){var t=new i;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),a=n.shift().trim();if(a){var r=n.join(":").trim();t.append(a,r)}}),t}function y(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}function _(e,t){return new Promise(function(n,a){function r(){o.abort()}var s=new h(e,t);if(s.signal&&s.signal.aborted)return a(new O("Aborted","AbortError"));var o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:b(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new y(t,e))},o.onerror=function(){a(new TypeError("Network request failed"))},o.ontimeout=function(){a(new TypeError("Network request failed"))},o.onabort=function(){a(new O("Aborted","AbortError"))},o.open(s.method,s.url,!0),"include"===s.credentials?o.withCredentials=!0:"omit"===s.credentials&&(o.withCredentials=!1),"responseType"in o&&w.blob&&(o.responseType="blob"),s.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),s.signal&&(s.signal.addEventListener("abort",r),o.onreadystatechange=function(){4===o.readyState&&s.signal.removeEventListener("abort",r)}),o.send(void 0===s._bodyInit?null:s._bodyInit)})}Object.defineProperty(t,"__esModule",{value:!0}),t.Headers=i,t.Request=h,t.Response=y,n.d(t,"DOMException",function(){return O}),t.fetch=_;var w={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(w.arrayBuffer)var k=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],T=ArrayBuffer.isView||function(e){return e&&k.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,t){e=r(e),t=s(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},i.prototype.delete=function(e){delete this.map[r(e)]},i.prototype.get=function(e){return e=r(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(r(e))},i.prototype.set=function(e,t){this.map[r(e)]=s(t)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),o(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},w.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var C=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},m.call(h.prototype),m.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];y.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})};var O=self.DOMException;try{new O}catch(e){O=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},O.prototype=Object.create(Error.prototype),O.prototype.constructor=O}_.polyfill=!0,self.fetch||(self.fetch=_,self.Headers=i,self.Request=h,self.Response=y)},function(e,t,n){e.exports=n(12)}]);