!function(e){function t(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=45)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CONST={url:{tmTypes:{followingT:"FOLLOWING",followingSubT:["FOLLOWING_LIST"],chatBotT:"CHAT_BOT",chatBotSubT:["DEFAULT_CHAT_BOT"],autoanswerT:"AUTO_ANSWER",autoanswerSubT:["DEFAULT_AUTO_ANSWER"],autogreetT:"AUTO_GREETING",autogreetSubT:["DEFAULT_AUTO_GREETING"],storiesT:"STORIES",storiesSubT:["STORIES_BY_FOLLOWERS","STORIES_BY_ACTIVE_AUDIENCE"]},base:"http://api.luxgram.ru/v1/",registration:"registration/basic/",login:"registration/basic/login",confirmation:"registration/basic/confirmation?token",instagram_addAccount:"instagram-accounts/",instagram_deleteAccount:function(e){return"instagram-accounts/"+e},instagramAccount_getMetaData:"instagram-accounts/meta",instagramAccount_checkpoint:"instagram-accounts/checkpoint/",instagramAccount_confirmKey:"instagram-accounts/checkpoint/",instagramDirect_getMetaData:"instagram-direct/meta",instagramDirect_postMessage:"instagram-direct/",instagramTaskManager:"instagram-task-manager/",instagramTaskManager_getMetaData:"instagram-task-manager/meta",instagramTaskManager_getTaskTypes:"instagram-task-manager/task/types",instagramTaskManager_getTaskByTypes:"instagram-task-manager/meta/type/",instagramTaskManager_getDefaultConfigs:"instagram-task-manager/config/type",instagramTaskManager_postStartFollowingList:"instagram-task-manager/task",instagramTaskManager_putStopTaskByID:function(e){return"instagram-task-manager/task/"+e},instagramTaskManager_delRemoveTaskByID:function(e){return"instagram-task-manager/task/"+e},instagramTaskManager_postImageAttachment:"instagram-task-manager/task/attachment",instagramTaskManager_getPosts:function(e){return"instagram-accounts/"+e+"/posts"},instagramTaskManager_postStartChatBot:"instagram-task-manager/task",instagramTaskManager_getLogsChatBot:"instagram-task-manager/logs/type/"},user:{defaulAvatar:"https://i.imgur.com/jNNT4LE.png",email:"",password:"",token:""},cookieStorage:{token:"user_logged",emailConfirmed:"email_confirmed"},uiSelectors:{headerLoginBox:"nav .login-box",headerNavLoginBtn:"nav ul li .js_login",headerRegBox:"nav .register-box",headerRegBtn:"nav ul li .js_register",instagram:{addAccountBtnSelector:"#js_show-login-box",addAccountBtnId:"js_show-login-box"}},events:{USER_LOGGED:"user_logged",USER_LOGOUT:"user_logout",USER_EMAIL_CONFIRMED:"user_email_confirmed",STOP_FIXED_SPINNER:"stop_fixed_spinner",messages:{RECIEVE_NEW_MESSAGE:"receive_new_message"},instagramAccouns:{INSTAGRAM_ACCOUNS_NEED_REFRESH:"instagram_accouns_need_refresh",INSTAGRAM_ACCOUNS_RENDERED:"instagram_accouns_rendered",INSTAGRAM_ACCOUNS_RENDERED_LAZY:"instagram_accouns_rendered_lazy"},autoarnswer:{IMAGE_UPLOADED:"image_loaded"},tasks:{NEW_TASK_CREATED:"new_task_created"},logs:{STOP_LOGS:"stop_logs"}},getPath:function(e,t){return"function"==typeof this.url[e]&&t?this.url.base+this.url[e](t):this.url.base+this.url[e]},getPathTypeSubtype:function(e,t,n){var a=t.type,s=t.subtype,r=t.username;return"function"==typeof this.url[e]&&a&&s?r&&n?this.url.base+this.url[e](t,n):r?this.url.base+this.url[e](t):this.url.base+this.url[e](a,s):this.url.base+this.url[e]},getPathByArr:function(e,t,n){var a=this.url.base+this.url[e],s=function(e,t){return e+"/"+t},r=a+t.reduce(s);return n?r+"?page="+n:r}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),l=n(10),u=a(l),c=n(4),d=a(c),p=function(e){return e&&e.subtype&&(e.subtype.includes("subtype/")||(e.subtype="subtype/"+e.subtype)),Object.values(e)},f=function(){function e(){s(this,e),this.network=new u.default,this.cookieStorage=d.default,this.settingPost={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}},this.postStartFollowingList=this.postStartFollowingList,this.postStartChatBot=this.postStartChatBot}return o(e,[{key:"getToken",value:function(e){var t=this.cookieStorage.get(i.CONST.cookieStorage.token);return e?{headers:{token:t}}:t}},{key:"getMetadata",value:function(e,t){var n=p(e);return this.network.sendRequest(""+i.CONST.getPathByArr("instagramTaskManager_getTaskByTypes",n),this.getToken("asHeader"),t)}},{key:"getMetadataLazy",value:function(e,t){var n=p(e);return n.push("?lazy=true"),this.network.sendRequest(""+i.CONST.getPathByArr("instagramTaskManager_getTaskByTypes",n),this.getToken("asHeader"),t)}},{key:"getTaskTypes",value:function(e,t){return this.network.sendRequest(""+i.CONST.getPath("instagramTaskManager_getTaskTypes"),this.getToken("asHeader"),t)}},{key:"stopTaskByID",value:function(e,t){var n=r({},this.settingPost,{method:"PUT",headers:r({},this.settingPost.headers,{token:this.getToken()})}),a=i.CONST.getPath("instagramTaskManager_putStopTaskByID",e);return this.network.sendRequest(a,n,t)}},{key:"deleteTaskByID",value:function(e,t){var n=r({},this.settingPost,{method:"DELETE",headers:r({},this.settingPost.headers,{token:this.getToken()})}),a=i.CONST.getPath("instagramTaskManager_delRemoveTaskByID",e);return this.network.sendRequest(a,n,t)}},{key:"getDefaultConfigs",value:function(e,t){var n=i.CONST.getPath("instagramTaskManager_getDefaultConfigs")+"/"+e.type+"/subtype/"+e.subtype;return this.network.sendRequest(n,this.getToken("asHeader"),t)}},{key:"postStartFollowingList",value:function(e,t,n){var a=r({},this.settingPost,{headers:r({},this.settingPost.headers,{token:this.getToken(),"X-Auth-Token":"e2f4336abea440489c51c5c10294ea12"})});a.body=JSON.stringify(e);var s=n?""+i.CONST.getPath(n):""+i.CONST.getPath("instagramTaskManager_postStartFollowingList");return this.network.sendRequest(s,a,t)}},{key:"postStartChatBot",value:function(e,t){return this.postStartFollowingList(e,t,"instagramTaskManager_postStartChatBot")}},{key:"postImageAutoanswer",value:function(e,t){var n={method:"POST",headers:{token:this.getToken(),Accept:"application/json","Content-type":"multipart/form-data"}};n.body=JSON.stringify(e);var a=""+i.CONST.getPath("instagramTaskManager_postImageAttachment");return this.network.sendRequest(a,n,t)}},{key:"getLogsChatBot",value:function(e,t,n){return this.network.sendRequest(""+i.CONST.getPathByArr("instagramTaskManager_getLogsChatBot",e,t),this.getToken("asHeader"),n)}},{key:"getPostsAutoanswer",value:function(e,t){var n=e.cursor?"?cursor="+e.cursor:"",a=""+i.CONST.getPath("instagramTaskManager_getPosts",e.userName||"user_not_selected")+n;return this.network.sendRequest(a,this.getToken("asHeader"),t)}},{key:"getStoriesConfig",value:function(e,t){var n=i.CONST.getPath("instagramTaskManager_getDefaultConfigs")+"/"+e.type+"/subtype/"+e.subtype;return this.network.sendRequest(n,this.getToken("asHeader"),t)}}]),e}(),m=null;m||(m=new f),t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e,t,n){$(e).empty().append(t?"<p>status: "+t+"</p>":"").append("<p>"+n+" </p>")}function t(e,t){var n=t,a=e;a.empty(),n.forEach(function(e,t){var n=$('<li class="list-group-item"></li>').appendTo(a);$("<a/>").addClass("ui-all").text(e.username).appendTo(n)})}function n(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function a(e,t){var n=new Date(e),a=n.getMonth()+1,s=n.getDate(),r=n.getHours(),o=n.getMinutes();a=(a<10?"0":"")+a,s=(s<10?"0":"")+s,r=(r<10?"0":"")+r,o=(o<10?"0":"")+o;return t?s+"-"+a+"-"+n.getFullYear()+" "+r+":"+o:r+":"+o}function s(e){return!e||0===Object.keys(e).length}function r(e,t,n){s(t)&&console.info("taskModes is empty");var a=n||"подписок";e.empty();for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&$('<div class="custom-control custom-radio">\n                '+function(e,t){switch(e){case"AGGRESSIVE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input">\n                    <label class="custom-control-label" for="'+e+'"><strong>Агрессивный:</strong> '+t+" "+a+" в час</label>";case"MIDDLE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input">\n                    <label class="custom-control-label" for="'+e+'"><strong>Средний:</strong> '+t+" "+a+" в час</label>";case"SAFE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input" checked>\n                    <label class="custom-control-label" for="'+e+'"><strong>Безопасный:</strong> '+t+" "+a+" в час</label>";default:console.log("default",e)}}(r,t[r])+"\n            </div>").appendTo(e)}function o(e,t,n){var a=n.logsState.selectClsLogsTaskType;e.empty().addClass("border-light-color"),$('<div class="">Доступные задания</div><select name="task-subtype" class="'+a+'"></select>').appendTo(e),t.length&&($('<option class="list-group-item py-2 js_empty-subtype" value="---">---</option>').appendTo($("."+a)),t.forEach(function(e,t){$('<option class="list-group-item py-2" value="'+e+'">\n            '+(0===t?"По подписчикам":"По активной аудитории конкурентов")+"\n        </option>").appendTo($("."+a))}),$("."+a).on("change",function(){n.dropdownOnSelectCb()}))}return{showInfoMessage:e,fillList:t,fillRadioGroupList:r,isEmail:n,getFormattedDateUtil:a,addDropdown:o}}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),l=n(10),u=a(l),c=n(4),d=a(c),p=function(){function e(){s(this,e),this.network=new u.default,this.cookieStorage=d.default,this.settingPost={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}}}return o(e,[{key:"isLoggedIn",value:function(){return!!this.getToken()}},{key:"isEmailConfirmed",value:function(){return"confirmed"===this.cookieStorage.get(i.CONST.cookieStorage.emailConfirmed)}},{key:"getToken",value:function(e){var t=this.cookieStorage.get(i.CONST.cookieStorage.token);return e?{headers:{token:t}}:t}},{key:"login",value:function(e,t){var n=r({},this.settingPost,{body:JSON.stringify(e)});return this.network.sendRequest(i.CONST.getPath("login"),n,t)}},{key:"addInstagramAccount",value:function(e,t){var n=e.username,a=e.password,s=e.ip,o=e.port,l=e.usernameProxy,u=e.passwordProxy,c={proxy:{host:s,port:o,username:l,password:u}},d=JSON.stringify(r({username:n,password:a},c)),p=r({},this.settingPost,{body:d,headers:r({},this.settingPost.headers,{token:this.getToken()})});return this.network.sendRequest(i.CONST.getPath("instagram_addAccount"),p,t)}},{key:"delInstagramAccount",value:function(e){var t={method:"DELETE",headers:r({},this.settingPost.headers,{token:this.getToken()})};return this.network.sendRequest(""+i.CONST.getPath("instagram_deleteAccount",e),t)}},{key:"getInstagramAccount",value:function(){var e=r({},this.settingPost,{method:"GET",headers:r({},this.settingPost.headers,{token:this.getToken()})});return this.network.sendRequest(i.CONST.getPath("instagram_addAccount"),e)}},{key:"confirm",value:function(e){return this.network.sendRequest(""+(i.CONST.getPath("confirmation")+e))}},{key:"register",value:function(e){var t=r({},this.settingPost,{body:JSON.stringify(e)});return this.network.sendRequest(i.CONST.getPath("registration"),t)}},{key:"getMetadata",value:function(e,t){return this.network.sendRequest(""+i.CONST.getPath("instagramAccount_getMetaData"),this.getToken("asHeader"),t)}},{key:"getMetadataLazy",value:function(e){return this.network.sendRequest(i.CONST.getPath("instagramAccount_getMetaData")+"?lazy=true",this.getToken("asHeader"),e)}},{key:"getSecurityKey",value:function(e,t){var n=r({},this.settingPost,{body:JSON.stringify({type:t}),headers:r({},this.settingPost.headers,{token:this.getToken()})});return this.network.sendRequest(""+i.CONST.getPath("instagramAccount_checkpoint")+e,n)}},{key:"confirmSecurityKey",value:function(e,t){var n={method:"DELETE",body:JSON.stringify({security_code:e}),headers:r({},this.settingPost.headers,{token:this.getToken()})};return this.network.sendRequest(""+i.CONST.getPath("instagramAccount_confirmKey")+t,n)}}]),e}(),f=null;f||(f=new p),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){var n=[],a=!0,s=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r={get:function(e){var t=document.cookie.match("(?:(?:^|.*; *)"+e+" *= *([^;]*).*$)|^.*$")[1];if(t)return decodeURIComponent(t)},set:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/",days:365};n.days&&(n["max-age"]=60*n.days*60*24,delete n.days),n=Object.entries(n).reduce(function(e,t){var n=s(t,2);return e+"; "+n[0]+"="+n[1]},""),document.cookie=e+"="+(encodeURIComponent(t)+n)},remove:function(e,t){return r.set(e,"",a({"max-age":-1,path:"/",days:0},t))}};t.default=r},function(e,t,n){"use strict";function a(e,t,n){var a=$(f.pagination),s=n.settings.pagination;e.on("click",function(t){var n=a.find("li.page-number.active"),r=s.previous;if(!s.previous)return void e.addClass("disabled").prop("disabled","disabled");y=s.previous,n.removeClass("active"),l(m,v,r)}),t.on("click",function(t){var n=a.find("li.page-number.active"),r=n.index(),o=s.next;s.next&&(y=s.next,n.removeClass("active"),r&&e.hasClass("disabled")&&e.removeClass("disabled"),l(m,v,o))}),$(f.logsTabBtn).on("click",function(e){y=1}),$(f.pagination+" "+f.paginationPgNumber).on("click",function(e){e.preventDefault();var t=$(e.target).text();y=parseInt(t,10),l(m,v,y),console.log(y)})}function s(e,t){var n=e.settings.pagination,s=$('<li class="page-item '+(n.previous?"":"disabled")+'"><a class="page-link" href="#" '+(n.previous?"":'tabindex="-1"')+">Назад</a></li>"),o=$('<li class="page-item '+(n.next?"":"disabled")+'"><a class="page-link" href="#" '+(n.next?"":'tabindex="-1"')+">Вперед</a></li>");r(t),(n.next||n.pages&&n.current===n.pages[n.pages.length-1])&&(t.append(s),n&&n.pages&&n.pages.forEach(function(e){$('<li class="page-item page-number '+(n.current===e?"active":"")+'"><a class="page-link" href="#">'+e+"</a></li>").appendTo(t)}),t.append(o)),a(s,o,e)}function r(e){e.empty()}function o(e,t,n){var a=$(".logs-pagination"),o=t.logs;if(e.empty(),!o.length)return $('<li class="list-group-item py-2">\n            <p>В этом разделе нет ни одной задачи.</p>\n        </li>').appendTo(e),void r(a);s(t,a),o.forEach(function(t){var n=t.level,a=t.value;$('<li class="list-group-item p-0 py-2">\n              <div class="media-body d-flex">\n                  <div class="col task-type '+("ERROR"===n?"text-danger":"")+'">\n                      '+(a?""+a:"")+"\n                  </div>\n              </div>\n          </li>").appendTo(e),$("li",e).length||$('<li class="list-group-item py-2" >\n                <p>В этом разделе нет ни одной задачи.</p>\n            </li>').appendTo(e)})}function i(){$("#v-pills-tab").on("click","a",function(e){e.preventDefault(),"v-pills-logs-tab"!==$(e.target).attr("id")&&(console.log("stop req"),b&&clearInterval(b))})}function l(e,t,n){t.username=h(g);var a=[t.type,"subtype/"+t.subtype,"account/"+t.username];p.default.getLogsChatBot(a,n).then(function(n){if("ok"===n.status.state){o(e,n.data),i();var a=n.data.settings.invoke_in_millis;b&&clearInterval(b),y<=1&&(b=setInterval(function(){l(e,t,y)},a))}else $('<li class="list-group-item py-2">\n                <p>Нет доступа</p>\n            </li>').appendTo(e)})}function u(e){f=e,m=$(f.tasksList),v.type=e.pathType,v.subtype=e.pathSubType}function c(e,t){$(t.currentPageCls).length&&(g=e,u(t),h()?l(m,v):console.log("select user"))}Object.defineProperty(t,"__esModule",{value:!0}),t.init=c;var d=n(1),p=function(e){return e&&e.__esModule?e:{default:e}}(d),f={currentPageCls:"",tasksList:"",logsTabBtn:"",pagination:"",paginationPgNumber:""},m="$(clsConst.tasksList)",g="someClass",h=function(){return $("."+g+" option:selected").val()},v={username:h()},y=null,b=""},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){var a=n.progress,s=n.created_at,r=n.task_id,o=n.type,i=n.status,l=n.username,u=n.mode,c=function(e){$('<li class="list-group-item p-0 py-2" data-type="'+o+'" data-task-id="'+r+'">\n                '+e+"\n            </li>").appendTo(t)},d='<div class="card-block">\n        <h4 class="card-title">На паузе</h4>\n        <div class="text-right">\n            '+(a&&a.timestamp?'<span class="text-muted">'+p.default.getFormattedDateUtil(a.timestamp)+"</span>":"")+"\n            "+(s?'<span class="text-muted">'+p.default.getFormattedDateUtil(s)+"</span>":"")+'\n        </div>\n        <span class="text-success">10%</span>\n        <div class="progress mb-3">\n            <div class="progress-bar bg-success" role="progressbar" style="width: 10%; height: 6px;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>\n        </div>\n        <button class="btn btn-warning js_btn-delete-task">Удалить</button>',f='<div class="no-gutters px-2 row task-progress">\n            <div class="col-6 align-items-center d-flex">\n                <img src="'+sessionStorage.getItem(l)+'" class="rounded-circle avatar" alt="аватар"/>\n                <h2 class="mt-0 mb-1 ml-2">'+l+'</h2>\n            </div>\n            <div class="col-6 col-6--with-borders">\n                <p class="pb-1 name"><b>ID:</b> '+r+"</p>\n                "+(s?'<p class="pb-1"><b>Запущено:</b> '+p.default.getFormattedDateUtil(s,"showFullTime")+"</p>":"")+"\n                "+(u?'<p class="pb-1"><b>Режим:</b> '+m(u)+"</p>":"")+'\n                <div class="text-center">\n                    <button class="btn btn-outline-primary js_btn-stop-task mr-3"><i class="far fa-pause-circle fa-lg"></i></button>\n                    <button class="btn btn-warning js_btn-delete-task"><i class="far fa-trash-alt fa-lg"></i></button>\n                </div>\n            </div>\n        </div>',g='<div class="no-gutters px-2 row task-stopped">\n            <div class="col-6 align-items-center d-flex">\n                <img src="'+sessionStorage.getItem(l)+'" class="rounded-circle avatar" alt="аватар"/>\n                <h2 class="mt-0 mb-1 ml-2">'+l+'</h2>\n            </div>\n            <div class="col-6 col-6--with-borders">\n                <p class="pb-1 name"><b>ID:</b> '+r+"</p>\n                "+(n.status.reason?'<p class="my-1">'+i.reason+"</p>":"")+"\n                "+(s?'<p class="pb-1"><b>Запущено:</b> '+p.default.getFormattedDateUtil(s,"showFullTime")+"</p>":"")+"\n                "+(u?'<p class="pb-1"><b>Режим:</b> '+m(u)+"</p>":"")+'\n                <div class="text-center">\n                    <button class="btn btn-warning js_btn-delete-task"><i class="far fa-trash-alt fa-lg"></i></button>\n                </div>\n            </div>\n\n        </div>',h='<div class="col task-progress">\n                <p class="mt-0 mb-1 name"><b>ID:</b> '+r+'</p>\n            </div>\n            <button class="btn btn-warning js_btn-delete-task">Удалить</button>';switch(e){case"PAUSED":c(d);break;case"IN_PROGRESS":case"GLOBAL_PAUSE":c(f);break;case"STOPPED":c(g);break;case"FINISHED":c(h)}}function r(e,t,n){if(e.empty(),!t.length)return void $('<li class="list-group-item py-2">\n                <p>В этом разделе нет ни одной задачи.</p>\n            </li>').appendTo(e);t.forEach(function(t){"STOPPED"!==t.status.state&&"FINISHED"!==t.status.state||n?"IN_PROGRESS"!==t.status.state&&"PAUSED"!==t.status.state||!n||s(t.status.state,e,t):s(t.status.state,e,t)}),$("li",e).length||$('<li class="list-group-item py-2">\n            <p>В этом разделе нет ни одной задачи.</p>\n        </li>').appendTo(e)}function o(e,t){var n=t||{type:f.CONST.url.tmTypes.followingT,subtype:f.CONST.url.tmTypes.followingSubT[0]},a=$(".js_btn-stop-task"),s=$(".js_btn-delete-task"),r=function(e){return $(e.target).closest("li").data("task-id")};a.on("click",function(t){var a=r(t);console.log("STOP Task id",a),c.default.stopTaskByID(a).then(function(t){console.log(t),i(e,n)})}),s.on("click",function(t){var a=r(t);console.log("DELETE id",a),c.default.deleteTaskByID(a).then(function(t){console.log(t),i(e,n)})})}function i(e,t){var n=e.$runs,a=e.$stopped,s=t||{type:f.CONST.url.tmTypes.followingT,subtype:f.CONST.url.tmTypes.followingSubT[0]};c.default.getMetadata(s).then(function(s){"ok"===s.status.state&&(r(n,s.data.meta,"isRuns"),r(a,s.data.meta),o(e,t))})}function l(){var e={$runs:$(".follow-tasks-runs"),$stopped:$(".follow-tasks-stopped")};i(e),window.PubSub.subscribe(f.CONST.events.tasks.NEW_TASK_CREATED,function(t,n){var a={type:f.CONST.url.tmTypes.followingT,subtype:f.CONST.url.tmTypes.followingSubT[0]};i(e,a)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getTasksData=i,t.init=l;var u=n(1),c=a(u),d=n(2),p=a(d),f=n(0),m=function(e){switch(e){case"AGGRESSIVE":return"Агрессивный";case"MIDDLE":return"Средний";case"SAFE":return" Безопасный"}}},function(e,t,n){"use strict";function a(e,t){l.default.getMetadataLazy().then(function(n){"ok"===n.status.state&&n.data&&n.data.accounts&&(t(e,n.data.accounts),window.PubSub.publish(o.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED_LAZY,n.data.accounts))})}function s(e,t){$("#v-pills-logs-tab").on("click",function(n){a(e,t)})}function r(e){s($(".log-users-list"),e)}Object.defineProperty(t,"__esModule",{value:!0}),t.init=r;var o=n(0),i=n(3),l=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function a(e,t){var n=$(e),a=t.stepReducer,s=t.onSubmitHandler;$(".js_profile-user-follow>.container").removeClass("container"),n.find("fieldset:first-child").fadeIn("slow"),n.find('input[type="text"]').on("focus",function(){$(this).removeClass("input-error")}),n.find(".btn-next").on("click",function(){var e=$(this).parents("fieldset"),t=!0,n=e.find('input[name="userAccountRadio"]:checked');n.length>0&&(i.username=n.parents("li").data("username")),a&&a(e.index(),i),e.find('input[type="text"],input[type="email"]').each(function(){""===$(this).val()?($(this).addClass("input-error"),t=!1):$(this).removeClass("input-error")}),t&&e.fadeOut(400,function(){$(this).next().fadeIn()})}),n.find(".btn-previous").on("click",function(){$(this).parents("fieldset").fadeOut(400,function(){$(this).prev().fadeIn()})}),$(".js_follow-speed input[type=radio]").on("click",function(){}),n.on("submit",function(e){$(this).find('input[type="text"],input[type="number"],input[type="email"]').each(function(){""===$(this).val()?(e.preventDefault(),$(this).addClass("input-error")):$(this).removeClass("input-error")}),s&&s(e),console.log("SubmitHandler END")}),$(".form-submit-finish .close").on("click",function(){console.log("form-submit-finish .close")}),$("#v-pills-create-task-tab").on("click",function(e){console.log("reset form"),"none"===$("fieldset:first-child").css("display")&&n.find("fieldset").hide("fast",function(){n.find("fieldset:first-child").show("slow")}),$(".form-submit-finish").removeClass("d-block"),$("fieldset",l).find('input:not([type="radio"]), textarea').val("")})}function s(){var e=$(".accounts-list"),t=e.find("li.media");t.addClass("js_user-radio").removeClass("py-3 media");for(var n=0;n<t.length;n++){var a=$(t[n]);a.wrapInner(function(e){return'<label class="accounts-list--label-wrapper col mb-0 media py-3" for="customRadio-'+e+'"></label>'}(n)).append(function(e){return'<div class="">\n            <input type="radio" name="userAccountRadio" id="customRadio-'+e+'" class="custom-control-input d-none" value="">\n        </div>'}(n)),a.find(".user-checkpoint .text-danger").length&&a.remove()}$(".js_user-radio").on("click","input[type=radio]",function(e){var t=$(this).parents("fieldset");$("li.active",t).removeClass("active"),$(this).closest("li").addClass("active"),$(".btn-next",t).prop("disabled",!1)})}function r(e){$(".wizard-form").length&&(a(l,e),window.PubSub.subscribe(o.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED,function(e,t){s()}))}Object.defineProperty(t,"__esModule",{value:!0}),t.init=r;var o=n(0),i={username:""},l=".wizard-form"},function(e,t,n){(function(e){!function(n,a){"use strict";var s={};n.PubSub=s;var r=n.define;!function(e){function t(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function n(e){return function(){throw e}}function a(e,t,a){try{e(t,a)}catch(e){setTimeout(n(e),0)}}function s(e,t,n){e(t,n)}function r(e,t,n,r){var o,i=u[t],l=r?s:a;if(u.hasOwnProperty(t))for(o in i)i.hasOwnProperty(o)&&l(i[o],e,n)}function o(e,t,n){return function(){var a=String(e),s=a.lastIndexOf(".");for(r(e,e,t,n);-1!==s;)a=a.substr(0,s),s=a.lastIndexOf("."),r(e,a,t,n)}}function i(e){for(var n=String(e),a=Boolean(u.hasOwnProperty(n)&&t(u[n])),s=n.lastIndexOf(".");!a&&-1!==s;)n=n.substr(0,s),s=n.lastIndexOf("."),a=Boolean(u.hasOwnProperty(n)&&t(u[n]));return a}function l(e,t,n,a){e="symbol"==typeof e?e.toString():e;var s=o(e,t,a);return!!i(e)&&(!0===n?s():setTimeout(s,0),!0)}var u={},c=-1;e.publish=function(t,n){return l(t,n,!1,e.immediateExceptions)},e.publishSync=function(t,n){return l(t,n,!0,e.immediateExceptions)},e.subscribe=function(e,t){if("function"!=typeof t)return!1;e="symbol"==typeof e?e.toString():e,u.hasOwnProperty(e)||(u[e]={});var n="uid_"+String(++c);return u[e][n]=t,n},e.subscribeOnce=function(t,n){var a=e.subscribe(t,function(){e.unsubscribe(a),n.apply(this,arguments)});return e},e.clearAllSubscriptions=function(){u={}},e.clearSubscriptions=function(e){var t;for(t in u)u.hasOwnProperty(t)&&0===t.indexOf(e)&&delete u[t]},e.unsubscribe=function(t){var n,a,s,r="string"==typeof t&&(u.hasOwnProperty(t)||function(e){var t;for(t in u)if(u.hasOwnProperty(t)&&0===t.indexOf(e))return!0;return!1}(t)),o=!r&&"string"==typeof t,i="function"==typeof t,l=!1;if(r)return void e.clearSubscriptions(t);for(n in u)if(u.hasOwnProperty(n)){if(a=u[n],o&&a[t]){delete a[t],l=t;break}if(i)for(s in a)a.hasOwnProperty(s)&&a[s]===t&&(delete a[s],l=!0)}return l}}(s),"function"==typeof r&&r.amd?r(function(){return s}):(void 0!==e&&e.exports&&(t=e.exports=s),t.PubSub=s,e.exports=t=s)}("object"==typeof window&&window||this)}).call(t,n(43)(e))},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],a=!0,s=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(){function e(){a(this,e)}return r(e,[{key:"cbErrorDefault",value:function(e){var t=$("#description").length?$("#description"):$(".error-msg");i.default.showInfoMessage(t,e.status.state,e.status.message||"error")}},{key:"checkStatus",value:function(e){if(e.status&&e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}},{key:"sendRequest",value:function(e,t,n){var a=this;return fetch(e,t).then(function(e){return Promise.all([e,e.json()])}).then(function(e){var t=s(e,2),r=t[0],o=t[1];return r.ok||(n?n(o):a.cbErrorDefault(o),a.checkStatus(r)),o})}}]),e}();t.default=l},function(e,t,n){var a,a;!function(t){e.exports=t()}(function(){return function e(t,n,s){function r(i,l){if(!n[i]){if(!t[i]){var u="function"==typeof a&&a;if(!l&&u)return a(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[i]={exports:{}};t[i][0].call(d.exports,function(e){return r(t[i][1][e]||e)},d,d.exports,e,t,n,s)}return n[i].exports}for(var o="function"==typeof a&&a,i=0;i<s.length;i++)r(s[i]);return r}({1:[function(e,t,n){!function(e,a){if(void 0!==n)a(t);else{var s={exports:{}};a(s),e.meteorEmoji=s.exports}}(this,function(e){"use strict";var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initiate()}return t(e,[{key:"initiate",value:function(){var e=this;document.querySelectorAll('[data-meteor-emoji="true"], [data-meteor-emoji-large="true"]').forEach(function(t){e.generateElements(t)})}},{key:"generateElements",value:function(e){var t=function(t){var n=e.selectionStart;e.value=e.value.substring(0,n)+" "+t.target.innerHTML+e.value.substring(n),s.style.display="block","undefined"!=typeof angular&&angular.element(e).triggerHandler("change")},n=function(t){e.selectionStart,s.style.display="block";for(var n=s.querySelectorAll("ul"),a=1,r=n.length;a<r;a++)n[a].style.display="none";var o=s.querySelectorAll(".category a");for(a=0,r=o.length;a<r;a++)o[a].style.background="none";s.querySelector("."+t.target.id).style.display="block",s.querySelector("#"+t.target.id).style.background="#c2c2c2"};e.style.width="100%";var a=document.createElement("div");a.style.position="relative",e.parentNode.replaceChild(a,e),a.appendChild(e);var s=document.createElement("div");s.tabIndex=0,e.hasAttribute("data-meteor-emoji-large")?(s.style.zIndex="999",s.style.display="block",s.style.width="100%",s.style.marginBottom="15px"):(s.style.position="absolute",s.style.right="0px",s.style.top="30px",s.style.display="none",s.style.width="400px"),s.style.zIndex="999",s.style.overflow="hidden",s.style.background="#fff",s.style.borderRadius="5px",s.style.boxShadow="0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)",s.style.borderRadius="2px;",s.style.marginTop="5px",s.style.outline="none";var r=document.createElement("a");r.style.position="absolute",r.style.top="10px",r.style.right="10px",r.style.textDecoration="none",r.setAttribute("href","javascript:void(0)"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 12 14"><path d="M8.9 8.4q-0.3 0.9-1.1 1.5t-1.8 0.6-1.8-0.6-1.1-1.5q-0.1-0.2 0-0.4t0.3-0.2q0.2-0.1 0.4 0t0.2 0.3q0.2 0.6 0.7 1t1.2 0.4 1.2-0.4 0.7-1q0.1-0.2 0.3-0.3t0.4 0 0.3 0.2 0 0.4zM5 5q0 0.4-0.3 0.7t-0.7 0.3-0.7-0.3-0.3-0.7 0.3-0.7 0.7-0.3 0.7 0.3 0.3 0.7zM9 5q0 0.4-0.3 0.7t-0.7 0.3-0.7-0.3-0.3-0.7 0.3-0.7 0.7-0.3 0.7 0.3 0.3 0.7zM11 7q0-1-0.4-1.9t-1.1-1.6-1.6-1.1-1.9-0.4-1.9 0.4-1.6 1.1-1.1 1.6-0.4 1.9 0.4 1.9 1.1 1.6 1.6 1.1 1.9 0.4 1.9-0.4 1.6-1.1 1.1-1.6 0.4-1.9zM12 7q0 1.6-0.8 3t-2.2 2.2-3 0.8-3-0.8-2.2-2.2-0.8-3 0.8-3 2.2-2.2 3-0.8 3 0.8 2.2 2.2 0.8 3z"/></svg>',r.onclick=function(){"none"===s.style.display?s.style.display="block":"block"===s.style.display&&(s.style.display="none"),s.focus()},e.hasAttribute("data-meteor-emoji-large")||a.appendChild(r),window.addEventListener("click",function(t){e.hasAttribute("data-meteor-emoji-large")||"block"===s.style.display&&(s.contains(t.target)||r.contains(t.target)||(s.style.display="none"))});var o=document.createElement("ul");o.style.padding="10px 0px",o.style.margin="0",o.style.listStyle="none",o.style.textAlign="left",o.style.marginLeft="3%",o.classList.add("faces");var i=document.createElement("ul");i.style.padding="10px 0px",i.style.margin="0",i.style.listStyle="none",i.style.textAlign="left",i.style.marginLeft="3%",i.classList.add("animals"),i.style.display="none";var l=document.createElement("ul");l.style.padding="10px 0px",l.style.margin="0",l.style.listStyle="none",l.style.textAlign="left",l.style.marginLeft="3%",l.classList.add("food"),l.style.display="none";var u=document.createElement("ul");u.style.padding="10px 0px",u.style.margin="0",u.style.listStyle="none",u.style.textAlign="left",u.style.marginLeft="3%",u.classList.add("sport"),u.style.display="none";var c=document.createElement("ul");c.style.padding="10px 0px",c.style.margin="0",c.style.listStyle="none",c.style.textAlign="left",c.style.marginLeft="3%",c.classList.add("transport"),c.style.display="none";var d=document.createElement("ul");d.style.padding="10px 0px",d.style.margin="0",d.style.listStyle="none",d.style.textAlign="left",d.style.marginLeft="3%",d.classList.add("objects"),d.style.display="none";var p=document.createElement("ul");p.style.padding="0px",p.style.margin="0",p.style.display="table",p.style.width="100%",p.style.background="#eff0f1",p.style.listStyle="none",p.classList.add("category");var f=new Array;f.push({name:"faces",svg:'<svg id="faces" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 150 150"><path id="faces" d="M74.34,128.48a53.5,53.5,0,1,1,37.84-15.67,53.16,53.16,0,0,1-37.84,15.67Zm0-97.89a44.4,44.4,0,1,0,31.4,13,44.07,44.07,0,0,0-31.4-13Z"/><path id="faces" d="M74.35,108A33.07,33.07,0,0,1,41.29,75a2.28,2.28,0,0,1,2.27-2.28h0A2.27,2.27,0,0,1,45.83,75a28.52,28.52,0,0,0,57,0,2.27,2.27,0,0,1,4.54,0A33.09,33.09,0,0,1,74.35,108Z"/><path id="faces" d="M58.84,62a6.81,6.81,0,1,0,6.81,6.81A6.81,6.81,0,0,0,58.84,62Z"/><path id="faces" d="M89.87,62a6.81,6.81,0,1,0,6.81,6.81A6.82,6.82,0,0,0,89.87,62Z"/></svg>'}),f.push({name:"animals",svg:'<svg id="animals" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 150 150"><path id="animals" d="M59.9,91.75h0c-22.46,0-41.82-19.34-44.09-44A52.1,52.1,0,0,1,16,36.8a4.51,4.51,0,0,1,2.63-3.62,39.79,39.79,0,0,1,12.74-3.37c23.92-2.15,45.35,17.83,47.74,43.86a52.77,52.77,0,0,1-.15,10.93,4.56,4.56,0,0,1-2.64,3.62,39.67,39.67,0,0,1-12.73,3.36c-1.23.11-2.45.17-3.66.17ZM24.76,40.49a41.29,41.29,0,0,0,.09,6.4C26.7,67,42.09,82.66,59.9,82.67h0c.94,0,1.88,0,2.83-.14a30.39,30.39,0,0,0,7.41-1.62,41.14,41.14,0,0,0-.11-6.4C68.09,53.38,51.11,37.08,32.17,38.86a30.78,30.78,0,0,0-7.41,1.63Z"/><path id="animals" d="M36.68,125.64a4.53,4.53,0,0,1-4.33-3.17,53.32,53.32,0,0,1-2.26-11A50.42,50.42,0,0,1,39.51,76.6c7.35-9.91,17.84-16,29.5-17,1.16-.11,2.33-.13,3.47-.13a4.54,4.54,0,0,1,4.33,3.16,51.59,51.59,0,0,1,2.27,11.08,50.39,50.39,0,0,1-9.42,34.8c-7.35,9.91-17.83,16-29.5,17a17.63,17.63,0,0,1-3.48.12ZM69.09,68.69A32.41,32.41,0,0,0,46.8,82a42.57,42.57,0,0,0-6.71,34.38,32.38,32.38,0,0,0,22.28-13.32A41.35,41.35,0,0,0,70,74.51a39.38,39.38,0,0,0-.94-5.82Z"/><path id="animals" d="M90.27,91.75c-1.22,0-2.43-.06-3.66-.17a39.67,39.67,0,0,1-12.73-3.36,4.57,4.57,0,0,1-2.64-3.61,53.38,53.38,0,0,1-.17-10.93c2.41-26,23.7-46.07,47.76-43.87a39.74,39.74,0,0,1,12.73,3.37,4.57,4.57,0,0,1,2.64,3.62,53.35,53.35,0,0,1,.16,10.92c-2.28,24.69-21.65,44-44.09,44ZM80,80.91a30.57,30.57,0,0,0,7.42,1.62c19.07,1.78,35.92-14.53,37.87-35.64a42.55,42.55,0,0,0,.1-6.4A30.86,30.86,0,0,0,118,38.86C99,37.07,82.06,53.38,80.12,74.51a43.91,43.91,0,0,0-.1,6.4Z"/><path id="animals" d="M113.49,125.64h0c-1.16,0-2.3,0-3.46-.12-23.9-2.21-41.36-25.47-38.94-51.85A53.52,53.52,0,0,1,73.34,62.6a4.55,4.55,0,0,1,4.33-3.16c1.16,0,2.34,0,3.51.13,11.64,1.07,22.11,7.12,29.48,17a50.51,50.51,0,0,1,9.42,34.81,53.51,53.51,0,0,1-2.26,11,4.54,4.54,0,0,1-4.33,3.19ZM81.08,68.69a42.53,42.53,0,0,0-1,5.82c-1.94,21.1,11.45,39.71,29.95,41.88A42.38,42.38,0,0,0,103.36,82,32.42,32.42,0,0,0,81.08,68.69Z"/><path id="animals" d="M75.08,45.45a7.83,7.83,0,1,0,7.83,7.83,7.83,7.83,0,0,0-7.83-7.83Z"/><path id="animals" d="M76.29,51.89a2.26,2.26,0,0,1-2.14-3A46,46,0,0,1,92.82,25.34a2.27,2.27,0,1,1,2.4,3.86A41.4,41.4,0,0,0,78.43,50.39a2.28,2.28,0,0,1-2.14,1.5Z"/><path id="animals" d="M73.87,51.89a2.28,2.28,0,0,1-2.14-1.5A41.35,41.35,0,0,0,54.94,29.2a2.27,2.27,0,0,1,2.39-3.86A46,46,0,0,1,76,48.85a2.28,2.28,0,0,1-1.37,2.91,2.31,2.31,0,0,1-.77.13Z"/></svg>'}),f.push({name:"food",svg:'<svg id="food" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 150 150"><path id="food" d="M104,20.76h.15c15.83.52,24.08,21.48,24.07,32.56.26,12.42-10.72,23.55-24,24.21a3.53,3.53,0,0,1-.46,0c-13.25-.66-24.23-11.8-24-24.3,0-11,8.26-31.95,24.07-32.47Zm0,47.69c8.25-.54,15.3-7.51,15.14-15,0-8.12-6.22-23.1-15.14-23.57-8.9.46-15.14,15.45-15.14,23.48-.14,7.61,6.9,14.59,15.14,15.13Z"/><path id="food" d="M97.19,69.21h.14a4.53,4.53,0,0,1,4.4,4.68l-1.48,46.92a1.59,1.59,0,0,0,.5,1.06,4.6,4.6,0,0,0,3.25,1.19h0a4.57,4.57,0,0,0,3.26-1.2,1.53,1.53,0,0,0,.49-1l-1.48-46.95a4.54,4.54,0,1,1,9.08-.28l1.47,46.91a10.42,10.42,0,0,1-3,7.65,13.65,13.65,0,0,1-9.81,4h0a13.58,13.58,0,0,1-9.79-4,10.42,10.42,0,0,1-3-7.67l1.48-46.89a4.53,4.53,0,0,1,4.53-4.4Z"/><path id="food" d="M41.84,69.21H42a4.53,4.53,0,0,1,4.4,4.68L44.9,120.81a1.57,1.57,0,0,0,.5,1.06,4.6,4.6,0,0,0,3.25,1.19h0a4.51,4.51,0,0,0,3.24-1.19,1.48,1.48,0,0,0,.5-1L50.93,73.89a4.53,4.53,0,0,1,4.39-4.68A4.4,4.4,0,0,1,60,73.61l1.48,46.91a10.49,10.49,0,0,1-3,7.66,13.57,13.57,0,0,1-9.78,4h0a13.59,13.59,0,0,1-9.78-4,10.48,10.48,0,0,1-3-7.67l1.48-46.9a4.54,4.54,0,0,1,4.54-4.4Z"/><path id="food" d="M28.59,20.76a4.54,4.54,0,0,1,4.54,4.54V51a15.52,15.52,0,0,0,31,0V25.3a4.55,4.55,0,0,1,9.09,0V51a24.61,24.61,0,1,1-49.21,0V25.3a4.54,4.54,0,0,1,4.54-4.54Z"/><path id="food" d="M55.34,20.76a4.54,4.54,0,0,1,4.54,4.54v19a4.54,4.54,0,1,1-9.08,0v-19a4.54,4.54,0,0,1,4.54-4.54Z"/><path id="food" d="M42,20.76a4.54,4.54,0,0,1,4.54,4.54v19a4.54,4.54,0,1,1-9.08,0v-19A4.54,4.54,0,0,1,42,20.76Z"/></svg>'}),f.push({name:"sport",svg:'<svg id="sport" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 150 150"><path id="sport" d="M75.35,130.24a53.49,53.49,0,1,1,53.48-53.49,53.55,53.55,0,0,1-53.48,53.49Zm0-97.89a44.41,44.41,0,1,0,44.4,44.4,44.1,44.1,0,0,0-44.4-44.4Z"/><path id="sport" d="M119.24,84.08A51.29,51.29,0,0,1,68,32.86a49.44,49.44,0,0,1,.26-5,2.26,2.26,0,0,1,2-2c1.66-.16,3.34-.25,5-.25a51.26,51.26,0,0,1,51.21,51.21c0,1.71-.09,3.38-.25,5a2.28,2.28,0,0,1-2,2c-1.65.16-3.33.25-5,.25ZM72.64,30.16c-.06.9-.08,1.79-.08,2.7a46.73,46.73,0,0,0,46.68,46.68q1.37,0,2.7-.09c.06-.89.08-1.79.08-2.7A46.72,46.72,0,0,0,75.35,30.08c-.91,0-1.82,0-2.71.08Z"/><path id="sport" d="M75.35,128A51.28,51.28,0,0,1,24.12,76.76c0-1.7.1-3.38.25-5a2.29,2.29,0,0,1,2-2c1.66-.16,3.33-.25,5.05-.25a51.27,51.27,0,0,1,51.21,51.22c0,1.69-.09,3.37-.25,5a2.27,2.27,0,0,1-2,2c-1.66.16-3.32.25-5,.25ZM28.75,74.05c-.05.9-.09,1.8-.09,2.71a46.74,46.74,0,0,0,46.69,46.67c.91,0,1.8,0,2.7-.08,0-.9.08-1.8.08-2.7A46.73,46.73,0,0,0,31.46,74c-.91,0-1.81,0-2.71.08Z"/><polygon id="sport" points="42.69 112.61 39.48 109.4 108 40.88 111.21 44.1 42.69 112.61 42.69 112.61"/></svg>'}),f.push({name:"transport",svg:'<svg id="transport" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 150 150"><path id="transport" d="M120.7,116H31a4.55,4.55,0,0,1-4.54-4.55V54.28A31.82,31.82,0,0,1,58.25,22.49h35.2a31.83,31.83,0,0,1,31.8,31.79v57.15A4.55,4.55,0,0,1,120.7,116Zm-85.16-9.09h80.62V54.28A22.74,22.74,0,0,0,93.45,31.57H58.25A22.74,22.74,0,0,0,35.54,54.28v52.61Z"/><path id="transport" d="M49.35,129.23c-8.53,0-13.62-2.77-13.62-7.41V115.6a4.54,4.54,0,1,1,9.08,0v4.06a21.32,21.32,0,0,0,9.09,0V115.6a4.54,4.54,0,0,1,9.08,0v6.22c0,4.64-5.09,7.41-13.63,7.41Z"/><path id="transport" d="M102.34,129.23c-8.53,0-13.62-2.77-13.62-7.41V115.6a4.54,4.54,0,0,1,9.08,0v4.06a21.28,21.28,0,0,0,9.08,0V115.6a4.55,4.55,0,0,1,9.09,0v6.22c0,4.64-5.09,7.41-13.63,7.41Z"/><path id="transport" d="M97.81,44.83H53.9a4.55,4.55,0,1,1,0-9.09H97.81a4.55,4.55,0,0,1,0,9.09Z"/><path id="transport" d="M54.28,84.2A6.8,6.8,0,1,0,61.07,91a6.8,6.8,0,0,0-6.79-6.8Z"/><path id="transport" d="M97.43,84.2a6.8,6.8,0,1,0,6.79,6.8,6.8,6.8,0,0,0-6.79-6.8Z"/><path id="transport" d="M107.08,81H44.63a6.82,6.82,0,0,1-6.82-6.82V54.28a6.82,6.82,0,0,1,6.82-6.81h62.45a6.82,6.82,0,0,1,6.81,6.81V74.15A6.83,6.83,0,0,1,107.08,81ZM44.63,52a2.28,2.28,0,0,0-2.28,2.27V74.15a2.28,2.28,0,0,0,2.28,2.27h62.45a2.27,2.27,0,0,0,2.27-2.27V54.28A2.27,2.27,0,0,0,107.08,52Z"/></svg>'}),f.push({name:"objects",svg:'<svg id="objects" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 150 150"><path id="objects" d="M107.78,129a4.55,4.55,0,0,1-2.67-.87l-30-21.79-30,21.79a4.53,4.53,0,0,1-5.34,0,4.58,4.58,0,0,1-1.65-5.08L49.59,87.82,19.6,66a4.54,4.54,0,0,1,2.67-8.22H59.34L70.8,22.55a4.55,4.55,0,0,1,8.64,0L90.89,57.81H128A4.54,4.54,0,0,1,130.63,66l-30,21.79,11.46,35.25a4.55,4.55,0,0,1-4.32,6ZM75.12,96.2a4.53,4.53,0,0,1,2.67.87l21.35,15.51L91,87.49a4.55,4.55,0,0,1,1.65-5.08L114,66.89H87.59a4.54,4.54,0,0,1-4.32-3.13l-8.15-25.1L67,63.76a4.53,4.53,0,0,1-4.32,3.13H36.25L57.61,82.41a4.54,4.54,0,0,1,1.65,5.08l-8.17,25.09L72.45,97.07a4.53,4.53,0,0,1,2.67-.87Z"/></svg>'}),f.map(function(e){var t=document.createElement("a");t.style.textDecoration="none",t.style.padding="5px",t.style.position="initial",t.style.fontSize="24px",t.setAttribute("href","javascript:void(0)"),t.style.display="table-cell",t.style.textAlign="center",t.id=String(e.name),"faces"==String(e.name)&&(t.style.background="#c2c2c2"),t.innerHTML=String(e.svg),t.onmousedown=n,p.appendChild(t)}),[128513,128514,128515,128516,128517,128518,128521,128522,128523,128524,128525,128527,128530,128531,128532,128534,128536,128538,128540,128541,128542,128544,128545,128546,128547,128548,128549,128552,128553,128554,128555,128557,128560,128561,128562,128563,128565,128567].map(function(e){var n=document.createElement("a");n.style.textDecoration="none",n.style.margin="5px",n.style.position="initial",n.style.fontSize="24px",n.setAttribute("href","javascript:void(0)"),n.innerHTML=String.fromCodePoint(e),n.onmousedown=t,o.appendChild(n)}),[128012,128013,128014,128017,128018,128020,128023,128024,128025,128026,128027,128028,128029,128030,128031,128032,128033,128034,128035,128036,128037,128038,128039,128040,128041,128043,128044,128045,128046,128047,128048,128049,128050,128051,128052,128053,128054,128055,128056,128057,128058,128059,128060].map(function(e){var n=document.createElement("a");n.style.textDecoration="none",n.style.margin="5px",n.style.position="initial",n.style.fontSize="24px",n.setAttribute("href","javascript:void(0)"),n.innerHTML=String.fromCodePoint(e),n.onmousedown=t,i.appendChild(n)}),[127813,127814,127815,127816,127817,127818,127820,127821,127822,127823,127825,127826,127827,127828,127829,127830,127831,127832,127836,127837,127838,127839,127840,127841,127842,127843,127844,127846,127848,127849,127850,127851,127852,127853,127856,127858,127859,127860,127863,127864,127867].map(function(e){var n=document.createElement("a");n.style.textDecoration="none",n.style.margin="5px",n.style.position="initial",n.style.fontSize="24px",n.setAttribute("href","javascript:void(0)"),n.innerHTML=String.fromCodePoint(e),n.onmousedown=t,l.appendChild(n)}),[127921,127923,127934,127935,127936,127937,127938,127939,127940,127942,127944,127946,128675,128692,128693,9917,9918,9978,127907,127919,9971].map(function(e){var n=document.createElement("a");n.style.textDecoration="none",n.style.margin="5px",n.style.position="initial",n.style.fontSize="24px",n.setAttribute("href","javascript:void(0)"),n.innerHTML=String.fromCodePoint(e),n.onmousedown=t,u.appendChild(n)}),[128641,128642,128646,128648,128650,128653,128654,128656,128660,128662,128664,128667,128668,128669,128670,128671,128672,128673,128640,128643,128644,128645,128647,128649,128652,128657,128658,128659,128661,128663,128665,128666,128674,128676,128690].map(function(e){var n=document.createElement("a");n.style.textDecoration="none",n.style.margin="5px",n.style.position="initial",n.style.fontSize="24px",n.setAttribute("href","javascript:void(0)"),n.innerHTML=String.fromCodePoint(e),n.onmousedown=t,c.appendChild(n)}),[127890,127880,127881,127887,127891,127905,127906,127908,127909,127911,127912,127915,127916,127918,127919,127926,127927,127928,127929,127930,127931,127932,127968,127973,127978,128147,128148,128149,128150,128151,128152,128187,128186,128197,128213,128247].map(function(e){var n=document.createElement("li");n.style.display="inline-block",n.style.margin="5px";var a=document.createElement("a");a.style.textDecoration="none",a.style.margin="5px",a.style.position="initial",a.style.fontSize="24px",a.setAttribute("href","javascript:void(0)"),a.innerHTML=String.fromCodePoint(e),a.onmousedown=t,d.appendChild(a)}),s.appendChild(p),s.appendChild(o),s.appendChild(i),s.appendChild(l),s.appendChild(u),s.appendChild(c),s.appendChild(d),a.appendChild(s)}}]),e}();e.exports=n})},{}]},{},[1])(1)})},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}function r(e){window.PubSub=e}n(42),n(44);var o=n(9),i=s(o),l=n(30),u=n(33),c=s(u),d=n(40),p=n(23),f=n(27),m=a(f),g=n(34),h=a(g),v=n(26),y=a(v),b=n(29),w=a(b),_=n(31),k=a(_),T=n(25),S=a(T),C=n(16),O=a(C),$=n(21),x=a($),E=n(19),P=a(E),A=n(35),M=a(A),N=function(){r(i.default),(new c.default).init(),(0,l.LoginForm)({_loginBox:"main .login-box",_formId:"#js_instagram-add-account",_buttonSubmitId:"#js_instagram-add-account--btn",_showLoginBoxBtnId:"#js_show-login-box",isLoginInstagram:!0}).init(),(0,d.LoginPage)({_loginBox:".auth.login .card-signin",_formId:".form-signin",_buttonSubmitId:'.form-signin [type="submit"]'}).init(),(0,p.confirmationWithRedirect)().init(),m.initHeader(),h.initMenu(),y.init(),S.init(),w.init(),k.init(),O.init(),P.init(),x.init(),M.init()};!function(){N()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e,t,n){console.log("addDropdown");var a=n.logsState.selectClsLogsTaskType;e.empty().addClass("border-light-color"),$('<div class="">Доступные задания</div><select name="task-subtype" class="'+a+'"></select>').appendTo(e),t.length&&($('<option class="list-group-item py-2 js_empty-subtype" value="---">---</option>').appendTo($("."+a)),t.forEach(function(e,t){$('<option class="list-group-item py-2" value="'+e+'">\n            '+(0===t?"По подписчикам":"По активной аудитории конкурентов")+"\n        </option>").appendTo($("."+a))}),$("."+a).on("change",function(e){n.dropdownOnSelectCb(e)}))}return{addDropdown:e}}()},function(e,t,n){"use strict";function a(){$(".file-upload-input").replaceWith($(".file-upload-input").clone()),$(g).hide(),$(".image-upload-wrap").show()}function s(e,t){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:console.info("File Not Found!");break;case e.target.error.NOT_READABLE_ERR:console.info("File is not readable");break;case e.target.error.ABORT_ERR:break;default:console.info("An error occurred reading this file.")}}function r(e,t){if(e.lengthComputable){var n=Math.round(e.loaded/e.total*100);n%10==0&&console.log(n)}}function o(e){var t=Math.round(e.size);return f>t}function i(e){var t=c.CONST.getPath("instagramTaskManager_postImageAttachment"),n=p.default.getToken(),a=e.files[0];if(!o(a))return console.log("show error message, imgSize to big "),$(m).append('\n                <p class="msg-max-size-img text-danger">Максимальный допустимый размер картинки '+f+"MB</p>\n            "),void setTimeout(function(){$(".msg-max-size-img").addClass("d-none")},5e3);var s=new FormData;s.append("image",a,a.name);var r=new XMLHttpRequest;r.open("POST",t),r.setRequestHeader("token",n),r.setRequestHeader("Accept","application/json"),r.setRequestHeader("cache-control","no-cache"),r.send(s),r.addEventListener("readystatechange",function(){4===this.readyState&&(console.log("this",this.responseText,this),window.PubSub.publish(c.CONST.events.autoarnswer.IMAGE_UPLOADED,{response:this.responseText,el:e}))})}function l(e){if(e.files&&e.files[0]){var t=$(e).closest(m),n=new FileReader;n.onload=function(n){o(e.files[0])&&(t.find(".image-upload-wrap").hide(),t.find(".file-upload-image").attr("src",n.target.result),t.find(g).show(),t.find(".image-title").html(e.files[0].name))},n.onerror=s,n.onprogress=r,n.readAsDataURL(e.files[0]),setTimeout(function(){return i(e)},2e3)}else a()}function u(){$(".file-upload-btn").on("click",function(e){$(e.target).closest(".col").find(m).find("input").trigger("click")}),$(".file-upload-input").on("change",function(e){l(e.target)}),$(".remove-image").on("click",function(){a()})}Object.defineProperty(t,"__esModule",{value:!0}),t.init=u;var c=n(0),d=n(1),p=function(e){return e&&e.__esModule?e:{default:e}}(d),f=1048576,m=".file-upload",g=".file-upload-content",h=$(".image-upload-wrap");h.bind("dragover",function(){$(".image-upload-wrap").addClass("image-dropping")}),h.bind("dragleave",function(){$(".image-upload-wrap").removeClass("image-dropping")})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.tplTextField=function(){return $('<div class="autoanswer-text-fields mt-2">\n    <div class="row">\n        <div class="col">\n            <textarea class="form-control answer-words" rows="4" placeholder="Введите ключевые слова на которые будет срабатывать автоответ"></textarea>\n        </div>\n        <div class="col">\n            <textarea class="form-control answer-messages" rows="4"\n                data-meteor-emoji="true" style="padding: 0.25rem 1.75rem 0.25rem 0.25rem; width: 100%;min-height: 42px;"\n                placeholder="Введите сообщение, которое будет отправлено"\n            ></textarea>\n            <button class="file-upload-btn btn btn-success" type="button"><i class="far fa-image fa-lg"></i></button>\n            \x3c!-- Button trigger modal --\x3e\n            <button type="button" class="btn btn-success post-upload-btn js_autoanswer-add-post" \n                    data-toggle="modal" \n                    data-post-info="todo: get req to user: "\n                    data-target="#postsGridModal">\n                <i class="far fa-images fa-lg"></i>\n            </button>\n\n            <div class="mt-2">\n                <div class="file-upload">\n                    <div class="image-upload-wrap">\n                        <input class="file-upload-input" type=\'file\' accept="image/*" />\n                    </div>\n                    <div class="file-upload-content">\n                        <img class="file-upload-image" src="#" alt="your image" />\n                        <div class="image-title-wrap">\n                        <button type="button" class="remove-image btn btn-warning">Удалить <span class="image-title">Загрузить</span></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(){(0,E.emoji)({page:j.currentPageCls,styles:{old:"bottom: 30px;",new:"top: -210px;"}})}function r(e){function t(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")}var n=$(I.fields),a=function(e){return e.val().trim().replace(/ /g,"").split(",").filter(function(e){return e.length>0})},s=[],r=!0;if(n.find(I.keyWord).each(function(){if(""===$(this).val())return e.preventDefault(),$(this).addClass("input-error"),void(r=!1);$(this).removeClass("input-error")}),n.each(function(e,t){var n=a($(t).find(I.keyWord)),o=$(t).find(I.answer).val(),i=$(t).find(I.fileUploadBox).attr("attached-img-id"),l=$(t).find(I.addPostBtns).attr("data-post-img-id");if(!n.length)return console.log("keyWord is empty, not push me to request"),$(t).append('\n                <p class="msg-empty-field text-danger">Пустое поле не валидно</p>\n            '),setTimeout(function(){$(".msg-empty-field").addClass("d-none")},5e3),void(r=!1);var u={key_words:n,answer:o,attachment:i?{image_id:i}:void 0};l&&(u.attachment=m({},u.attachment,{post:{id:l,type:"photo"}})),s.push(u)}),!r)return void console.log("**alarm **",I.keyWord);var o={username:M,type:j.pathType,subtype:j.pathSubType,user_default_config:{},user_custom_config:{forms:s}};b.default.postStartChatBot(o,t).then(function(e){"ok"===e.status.state&&$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>")})}function o(e,t){e.empty().addClass("border-light-color"),$('<div class="">Доступные аккаунты</div><select name="task-type" class="'+N+'"></select>').appendTo(e),t.forEach(function(e){$('<option class="list-group-item py-2" value="'+e+'">\n            '+e+"\n        </option>").appendTo($("."+N))}),$("."+N).on("change",function(){M=$("."+N+" option:selected").val(),C.init(N,j)})}function i(){$(I.fields+":not(:first-child)").remove()}function l(){$(".js_add-autoanswer").on("click",function(e){var t=$(I.fields).last();(0,A.tplTextField)().insertAfter(t),s(),x.init()}),$(".form-submit-finish .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(g.CONST.events.tasks.NEW_TASK_CREATED),i()}),$(".form-submit-finish--error .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(g.CONST.events.tasks.NEW_TASK_CREATED),i()}),_.init(o)}function u(e){M=e.username}function c(e,t){switch(e){case 0:u(t);break;default:console.log("default",e)}}function d(e){var t=this;$("#load-more").on("click",function(n){var a=$(n.target),s=a.attr("cursor");console.log("load more click"),e(null,{userName:M,cursor:s},{loadMoreHandler:t,targetButton:R})})}function p(){$("#postsGridModal").on("show.bs.modal",function(e){R=$(e.relatedTarget);var t=$(this);(0,P.getPosts)(t,{userName:M},{loadMoreHandler:d,targetButton:R}),t.find(".modal-title").text("Публикации")})}function f(){if($(j.currentPageCls).length){var e={stepReducer:c,onSubmitHandler:r};v.init(e),l(),T.init(),window.PubSub.subscribe(g.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED_LAZY,function(e,t){C.init(N,j)}),window.PubSub.subscribe(g.CONST.events.autoarnswer.IMAGE_UPLOADED,function(e,t){var n=t.response,a=n.length?JSON.parse(n):"",s=a&&a.data&&a.data.image_id;$(t.el).closest(".file-upload").attr("attached-img-id",s),console.log("image_loaded",t)}),p(),s(),x.init()}}Object.defineProperty(t,"__esModule",{value:!0});var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.init=f;var g=n(0),h=n(8),v=a(h),y=n(1),b=function(e){return e&&e.__esModule?e:{default:e}}(y),w=n(7),_=a(w),k=n(17),T=a(k),S=n(5),C=a(S),O=n(14),x=a(O),E=n(38),P=n(18),A=n(15),M="",N="js_logs-accounts",j={currentPageCls:".autoanswer-page",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:g.CONST.url.tmTypes.autoanswerT,pathSubType:g.CONST.url.tmTypes.autoanswerSubT[0]},I={fields:".autoanswer-text-fields",keyWord:"textarea.answer-words",answer:"textarea.answer-messages",fileUploadBox:".file-upload",addPostBtns:".js_autoanswer-add-post"},R={}},function(e,t,n){"use strict";function a(){if($(".autoanswer-page").length){var e={type:s.CONST.url.tmTypes.autoanswerT,subtype:s.CONST.url.tmTypes.autoanswerSubT[0]},t={$runs:$(".tasks-runs"),$stopped:$(".tasks-stopped")};(0,r.getTasksData)(t,e),window.PubSub.subscribe(s.CONST.events.tasks.NEW_TASK_CREATED,function(n,a){(0,r.getTasksData)(t,e)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=a;var s=n(0),r=n(6)},function(e,t,n){"use strict";function a(e,t,n){var a=function(e,t,n){e?t.insertAfter(n.find("li:last-child")):t.appendTo(n)};n||e.empty(),t.forEach(function(t,s){var r=$('<li class="col-4 list-group list-inline-item m-0 p-0" data-img-id="'+t.id+'">\n            <img src="'+t.url+'" class="img-responsive p-2" alt="image" style="max-height: 200px;"/>\n        </li>');a(n,r,e)})}function s(e,t){$("#load-more").attr("cursor",t),e.removeClass("d-none")}function r(e){e.addClass("d-none")}function o(e,t,n){$("li",e).on("click",function(e){var a=$(e.target).closest("li"),s=a.attr("data-img-id");n.attr("data-post-img-id",s),console.log("click",s,t),t.modal("hide")})}function i(e,t,n){var l=n.loadMoreHandler,c=n.targetButton;u.default.getPostsAutoanswer(t).then(function(t){if("ok"===t.status.state){var n=t.data,u=e?$(".modal-footer",e):null,d=$(".modal-body .posts-list",e);e?(a(d,n.posts),e.modal("handleUpdate"),o(d,e,c)):n.posts&&(a(d,n.posts,"appendToList"),o(d,$("#postsGridModal"),c)),n.pagination&&n.pagination.cursor?(s(u,n.pagination.cursor),l(i)):r($(".modal-footer",e))}})}Object.defineProperty(t,"__esModule",{value:!0}),t.fillPosts=a,t.getPosts=i;var l=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(l)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e){function t(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")}var n=$(".autoanswer-text-fields"),a=[];n.each(function(e,t){var n=$(t).find("textarea.answer-words").val();a.push(n)});var s={username:k||"the_rostyslav",type:d.CONST.url.tmTypes.autogreetT,subtype:d.CONST.url.tmTypes.autogreetSubT[0],user_default_config:{task_mode:O.user_default_config.task_mode},user_custom_config:{messages:a}};console.log("make request here**",s,JSON.stringify(s)),g.default.postStartChatBot(s,t).then(function(e){console.log("postBot"),"ok"===e.status.state&&(console.log(JSON.stringify(e)),$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>"))})}function r(e,t){e.empty().addClass("border-light-color"),$('<div class="">Доступные аккаунты</div><select name="task-type" class="'+T+'"></select>').appendTo(e),t.forEach(function(e){$('<option class="list-group-item py-2" value="'+e+'">\n            '+e+"\n        </option>").appendTo($("."+T))}),$("."+T).on("change",function(){k=$("."+T+" option:selected").val(),console.log(k),_.init(T,C)})}function o(){var e=function(e){return $('<div class="autoanswer-text-fields mt-2">\n        <div class="row">\n            <div class="col">\n                <textarea class="form-control answer-words" rows="4" placeholder="'+e+'"></textarea>\n            </div>\n        </div>\n    </div>')};$(".js_add-autoanswer").on("click",function(t){var n=$(".autoanswer-text-fields").last();e("Введите приветствие").insertAfter(n)}),$(".form-submit-finish .close").on("click",function(){console.log("alert close"),$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(d.CONST.events.tasks.NEW_TASK_CREATED)}),$(".form-submit-finish--error .close").on("click",function(){console.log("alert close"),$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(d.CONST.events.tasks.NEW_TASK_CREATED)}),v.init(r)}function i(e){k=e.username}function l(){var e=function(e,t){var n=t.cfg&&t.cfg.task_modes;e.empty();for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&$('<div class="custom-control custom-radio">\n                '+function(e,t){switch(e){case"AGGRESSIVE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input">\n                    <label class="custom-control-label" for="'+e+'"><strong>Агрессивный:</strong> '+t+" сообщений в час</label>";case"MIDDLE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input">\n                    <label class="custom-control-label" for="'+e+'"><strong>Средний:</strong> '+t+" сообщений в час</label>";case"SAFE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input" checked>\n                    <label class="custom-control-label" for="'+e+'"><strong>Безопасный:</strong> '+t+" сообщений в час</label>"}}(a,n[a])+"\n            </div>").appendTo(e)},t={type:C.pathType,subtype:C.pathSubType};g.default.getDefaultConfigs(t).then(function(t){"ok"===t.status.state&&(e($(S),t.data.found),$(S+" input[type=radio]").on("click",function(e){var t=$(e.target).attr("value");O.user_default_config.task_mode=t.toUpperCase(),console.log(O)}))})}function u(e,t){switch(e){case 0:i(t),l(),console.log(t,e);break;case 1:break;default:console.log("default",e)}}function c(){if($(C.currentPageCls).length){var e={stepReducer:u,onSubmitHandler:s};f.init(e),o(),b.init(C),window.PubSub.subscribe(d.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED_LAZY,function(e,t){_.init(T,C)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=c;var d=n(0),p=n(8),f=a(p),m=n(1),g=function(e){return e&&e.__esModule?e:{default:e}}(m),h=n(7),v=a(h),y=n(20),b=a(y),w=n(5),_=a(w),k="",T="js_logs-accounts",S=".js_autogreeting-speed",C={currentPageCls:".autogreeting-page",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:d.CONST.url.tmTypes.autogreetT,pathSubType:d.CONST.url.tmTypes.autogreetSubT[0]},O={user_default_config:{task_mode:"SAFE"}}},function(e,t,n){"use strict";function a(e){if($(e.currentPageCls).length){var t=e.pathType,n=e.pathSubType,a={type:t,subtype:n},o={$runs:$(".tasks-runs"),$stopped:$(".tasks-stopped")};(0,r.getTasksData)(o,a),window.PubSub.subscribe(s.CONST.events.tasks.NEW_TASK_CREATED,function(e,t){console.log("getTasksData **NEW_TASK_CREATED**",e,t),(0,r.getTasksData)(o,a)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=a;var s=n(0),r=n(6)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e){function t(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")}var n=$(".bot-text-fields"),a=function(e){return e.val().trim().replace(/ /g,"").split(",").filter(function(e){return e.length>0})},s=[];n.each(function(e,t){var n=a($(t).find("textarea.answer-words")),r=$(t).find("textarea.answer-messages").val();s.push({key_words:n,answer:r})});var r={username:_,type:T.pathType,subtype:T.pathSubType,user_default_config:{},user_custom_config:{forms:s}};m.default.postStartChatBot(r,t).then(function(e){"ok"===e.status.state&&$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>")})}function r(e,t){e.empty().addClass("border-light-color"),$('<div class="">Доступные аккаунты</div><select name="task-type" class="'+k+'"></select>').appendTo(e),t.forEach(function(e){$('<option class="list-group-item py-2" value="'+e+'">\n            '+e+"\n        </option>").appendTo($("."+k))}),$("."+k).on("change",function(){_=$("."+k+" option:selected").val(),w.init(k,T)})}function o(){var e=function(){return $('<div class="bot-text-fields mt-2">\n        <div class="row">\n            <div class="col">\n                <textarea class="form-control answer-words" rows="4" placeholder="Введите ключевые слова или фразы через запятую, при которых будет срабатывать чат-бот"></textarea>\n            </div>\n            <div class="col">\n                <textarea class="form-control answer-messages" rows="4" placeholder="Введите сообщение, которое будет отправляться, если присутствовали ключ.слова или фразы из столбца слева"></textarea>\n            </div>\n        </div>\n    </div>')};$(".js_add-bot").on("click",function(t){var n=$(".bot-text-fields").last();e().insertAfter(n)}),$(".form-submit-finish .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(c.CONST.events.tasks.NEW_TASK_CREATED)}),$(".form-submit-finish--error .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(c.CONST.events.tasks.NEW_TASK_CREATED)}),h.init(r)}function i(e){_=e.username}function l(e,t){switch(e){case 0:i(t);break;default:console.log("default",e)}}function u(){if($(".bot-page").length){var e={stepReducer:l,onSubmitHandler:s};p.init(e),o(),y.init(),window.PubSub.subscribe(c.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED_LAZY,function(e,t){w.init(k,T)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=u;var c=n(0),d=n(8),p=a(d),f=n(1),m=function(e){return e&&e.__esModule?e:{default:e}}(f),g=n(7),h=a(g),v=n(22),y=a(v),b=n(5),w=a(b),_="",k="js_logs-accounts",T={currentPageCls:".bot-page",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:c.CONST.url.tmTypes.chatBotT,pathSubType:c.CONST.url.tmTypes.chatBotSubT[0]}},function(e,t,n){"use strict";function a(){if($(".bot-page").length){var e={type:s.CONST.url.tmTypes.chatBotT,subtype:s.CONST.url.tmTypes.chatBotSubT[0]},t={$runs:$(".tasks-runs"),$stopped:$(".tasks-stopped")};(0,r.getTasksData)(t,e),window.PubSub.subscribe(s.CONST.events.tasks.NEW_TASK_CREATED,function(n,a){(0,r.getTasksData)(t,e)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=a;var s=n(0),r=n(6)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(){function e(){s()}var t=o.default,n=c(),a=function(e){t.confirm(e).then(function(e){if(e.status&&"ok"===e.status.state){u.default.set(i.CONST.cookieStorage.emailConfirmed,"confirmed"),u.default.set(i.CONST.cookieStorage.token,e.data.token);var t=sessionStorage.getItem("customersData");console.log(t),console.log("request succeeded with JSON response",e),$(".confirm-registration").append("<p>confirmation status: "+e.status.state+"</p>"),setTimeout(function(){window.location="./profile.html"},1e3)}else e.status,console.log(e)})},s=function(){var e=n.token;location.pathname.indexOf("confirm-registration")&&e&&(console.log("send req to ",e),a(e))};return{init:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.confirmationWithRedirect=s;var r=n(3),o=a(r),i=n(0),l=n(4),u=a(l),c=function(){var e=window.location.search,t={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,a){t[n]=a}),t}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){var a=t;if(e.empty(),!a.length)return void $('<li class="list-group-item py-2">\n                <p>В этом разделе нет ни одной задачи.</p>\n            </li>').appendTo(e);a.forEach(function(t){var a=t.progress,s=t.task_id,r=t.type,o=t.subtype;"STOPPED"!==t.status.state||n?"IN_PROGRESS"===t.status.state&&n?$('<li class="list-group-item py-2" data-task-id="'+s+'">\n                <div class="col task-progress">\n                    <p class="mt-0 mb-1 name">В прогрессе : '+s+'</p>\n                </div>\n                <button class="btn btn-outline-primary js_btn-stop-task">Остановить</button>\n                <button class="btn btn-warning js_btn-delete-task">Удалить</button>\n            </li>').appendTo(e):"FINISHED"!==t.status.state||n?"PAUSED"===t.status.state&&n&&$('<li class="list-group-item py-2" data-task-id="'+s+'">\n                <div class="card-block">\n                    <h4 class="card-title">На паузе</h4>\n                    <div class="text-right">\n                        <span class="text-muted">'+d.default.getFormattedDateUtil(a.timestamp)+'</span>\n                    </div>\n                    <span class="text-success">10%</span>\n                    <div class="progress mb-3">\n                        <div class="progress-bar bg-success" role="progressbar" style="width: 10%; height: 6px;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>\n                    </div>\n                    <button class="btn btn-warning js_btn-delete-task">Удалить</button>\n                </div>\n            </li>').appendTo(e):$('<li class="list-group-item py-2" data-task-id="'+s+'">\n                 <div class="card-block">\n                    <h4 class="card-title">Выполненно</h4>\n                    <div class="text-right">\n                        <span class="text-muted">'+d.default.getFormattedDateUtil(a.timestamp)+'</span>\n                    </div>\n                    <span class="text-success">100%</span>\n                    <div class="progress mb-3">\n                        <div class="progress-bar bg-success" role="progressbar" style="width: 100%; height: 6px;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>\n                    </div>\n                    <button class="btn btn-warning js_btn-delete-task">Удалить</button>\n                </div>\n            </li>').appendTo(e):$('<li class="list-group-item p-0 py-2" data-username="'+r+'" data-task-id="'+s+'">\n                <div class="media-body d-flex">\n                    <div class="col task-type">\n                        '+(s?'<p class="badge badge-secondary my-1">'+s+"</p>":"")+'\n                        <div class="task-progress">\n                            <p class="small my-1">Остановлено</p>\n                            '+(t.status.reason?'<p class="my-1">'+t.status.reason+"</p>":"")+'\n                        </div>\n                    <button class="btn btn-warning js_btn-delete-task">Удалить</button>\n                    </div>\n                    \x3c!--<div class="col task-subtype">\n                        '+(o?'<p class="mt-0 mb-1">'+o+"</p>":"")+"\n                    </div>--\x3e\n                </div>\n            </li>").appendTo(e),$("li",e).length||$('<li class="list-group-item py-2" data-task-id="'+s+'">\n                <p>В этом разделе нет ни одной задачи.</p>\n            </li>').appendTo(e)})}function r(e,t){var n=t||{type:p.CONST.url.tmTypes.followingT,subtype:p.CONST.url.tmTypes.followingSubT[0]},a=$(".js_btn-stop-task"),s=$(".js_btn-delete-task"),r=function(e){return $(e.target).closest("li").data("task-id")};a.on("click",function(t){var a=r(t);console.log("STOP Task id",a),u.default.stopTaskByID(a).then(function(t){console.log(t),o(e,n)})}),s.on("click",function(t){var a=r(t);console.log("DELETE id",a),u.default.deleteTaskByID(a).then(function(t){console.log(t),o(e,n)})})}function o(e,t){var n=e.$runs,a=e.$stopped,o=t||{type:p.CONST.url.tmTypes.followingT,subtype:p.CONST.url.tmTypes.followingSubT[0]};u.default.getMetadata(o).then(function(o){"ok"===o.status.state&&(s(n,o.data.meta,"isRuns"),s(a,o.data.meta),r(e,t))})}function i(){var e={$runs:$(".follow-tasks-runs"),$stopped:$(".follow-tasks-stopped")};o(e),window.PubSub.subscribe(p.CONST.events.tasks.NEW_TASK_CREATED,function(t,n){o(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getTasksData=o,t.init=i;var l=n(1),u=a(l),c=n(2),d=a(c),p=n(0)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=t;e.empty().addClass("border-light-color"),$('<li class="list-group-item py-2"><h3>UserTaskManager</h3></li>').appendTo(e),n.forEach(function(t){$('<li class="list-group-item py-2" data-username="'+t.type+'">\n                <div class="media-body d-flex">\n                    <div class="col task-type">\n                        '+(t.task_id?'<p class="mt-0 mb-1 name">'+t.task_id+"</p>":"")+'\n                    </div>\n                    <div class="col task-subtype">\n                        '+(t.subtype?'<p class="mt-0 mb-1 name">'+t.subtype+"</p>":"")+'\n                    </div>\n                    <div class="col task-progress">\n                        '+("STOPPED"===t.status.state?'<p class="mt-0 mb-1 name">Остановлено - '+t.status.reason+"</p>":"")+'\n                    </div>\n                    \x3c!--<div class="col task-progress">\n                        '+(t.progress?'<p class="mt-0 mb-1 name">Количество - '+t.progress.count+'</p>\n                                <p class="mt-0 mb-1 name">Процент - '+t.progress.percent+"</p>":"")+"\n                    </div>--\x3e\n                </div>\n            </li>").appendTo(e)})}function r(e){v.default.getMetadata(e).then(function(e){"ok"===e.status.state&&s($(".follow-tasks-list"),e.data.meta)})}function o(){r({type:g.CONST.url.tmTypes.followingT,subtype:g.CONST.url.tmTypes.followingSubT[0]})}function i(){var e=$("#followers").val().trim().replace(/ /g,"").split(",").filter(function(e){return e.length>0});w.user_custom_config={users:e};var t=b.default.fillRadioGroupList,n={type:"FOLLOWING",subtype:"FOLLOWING_LIST"};v.default.getDefaultConfigs(n).then(function(e){if("ok"===e.status.state){var n=e.data.found.cfg.task_modes;t($(".js_follow-speed"),n)}})}function l(e){switch(e){case 0:o(w.username);break;case 1:i();break;default:console.log("default",e)}}function u(e){var t=$(e);$(".js_profile-user-follow>.container").removeClass("container"),t.find("fieldset:first-child").fadeIn("slow"),t.find('input[type="text"]').on("focus",function(){$(this).removeClass("input-error")}),t.find(".btn-next").on("click",function(){var e=$(this).parents("fieldset"),t=!0,n=e.find('input[name="userAccountRadio"]:checked');n.length>0&&(w.username=n.parents("li").data("username")),l(e.index(),w),e.find('input[type="text"],input[type="email"]').each(function(){""===$(this).val()?($(this).addClass("input-error"),t=!1):$(this).removeClass("input-error")}),t&&e.fadeOut(400,function(){$(this).next().fadeIn()})}),t.find(".btn-previous").on("click",function(){$(this).parents("fieldset").fadeOut(400,function(){$(this).prev().fadeIn()})}),$(".js_follow-speed input[type=radio]").on("click",function(){var e=$(this).attr("value");w.user_default_config={task_mode:e.toUpperCase()}}),t.on("submit",function(e){var t=$(this).find(".select-gender option:selected").val();w.user_default_config=p({},w.user_default_config,{criteria:{gender:t.toUpperCase()}});var n=document.forms["follow-form"].limit,a={from:document.forms["follow-form"].have_posts_from.value,to:document.forms["follow-form"].have_posts_to.value},s={from:document.forms["follow-form"].have_followers_from.value,to:document.forms["follow-form"].have_followers_to.value},r={from:document.forms["follow-form"].have_followings_from.value,to:document.forms["follow-form"].have_followings_to.value};if(""===n.value)return n.focus(),!1;w.user_default_config.criteria={limit:n.value,unfollow_then:!!$("#unfollow_then:checked").length,follow_on_closed_profiles:!!$("#follow_on_closed_profiles:checked").length,have_posts:a,have_followers:s,have_followings:r},$(this).find('input[type="text"],input[type="number"],input[type="email"]').each(function(){""===$(this).val()?(e.preventDefault(),$(this).addClass("input-error")):$(this).removeClass("input-error")}),w.type=g.CONST.url.tmTypes.followingT,w.subtype=g.CONST.url.tmTypes.followingSubT[0],console.log("make request**  post: StartFollowingList",w),v.default.postStartFollowingList(w).then(function(e){"ok"===e.status.state&&(console.log(JSON.stringify(e)),$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>"))})}),$(".form-submit-finish .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(g.CONST.events.tasks.NEW_TASK_CREATED)})}function c(){var e=$(".accounts-list"),t=e.find("li.media");t.addClass("js_user-radio").removeClass("py-3 media");for(var n=0;n<t.length;n++)$(t[n]).wrapInner(function(e){return'<label class="accounts-list--label-wrapper col mb-0 media py-3" for="customRadio-'+e+'"></label>'}(n)).append(function(e){return'<div class="">\n            <input type="radio" name="userAccountRadio" id="customRadio-'+e+'" class="custom-control-input d-none" value="">\n        </div>'}(n));$(".js_user-radio").on("click","input[type=radio]",function(e){var t=$(this).parents("fieldset");$("li.active",t).removeClass("active"),$(this).closest("li").addClass("active"),$(".btn-next",t).prop("disabled",!1)}),$(".checkbox-cell").on("change",function(e){console.log("validate")})}function d(){$(".follow").length&&(m.init(),u(".follow-form"),window.PubSub.subscribe(g.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED,function(e,t){c(),console.log("modifyAccList")}))}Object.defineProperty(t,"__esModule",{value:!0});var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.modifyAccList=c,t.init=d;var f=n(24),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),g=n(0),h=n(1),v=a(h),y=n(2),b=a(y);n(41);var w={username:"",user_default_config:{task_mode:"SAFE"}}},function(e,t,n){"use strict";function a(e){var t=r[e],n=t.hamburgerMenuCls,a=t.hamburgerButtonCls,s=t.hamburgerButtonCloseClass,o=t.hamburgerMenuOpenedClass;$(a).toggleClass(s),$(n).toggleClass(o)}function s(){$(r.leftMenu.hamburgerButtonCls).on("click",a.bind(this,"leftMenu")),$(r.rightMenu.hamburgerButtonCls).on("click",a.bind(this,"rightMenu")),$(r.subHeader.hamburgerButtonCls).on("click",a.bind(this,"subHeader"))}Object.defineProperty(t,"__esModule",{value:!0}),t.init=s;var r={leftMenu:{hamburgerButtonCls:"#aside_mobile__button",hamburgerMenuCls:".aside-burger-menu",hamburgerMenuOpenedClass:"burger-menu--closed",hamburgerButtonCloseClass:"burger-menu__button--close"},rightMenu:{hamburgerButtonCls:"#header_mobile_toggler",hamburgerMenuCls:".r-side-burger-menu",hamburgerMenuOpenedClass:"r-side-burger-menu--open",hamburgerButtonCloseClass:"burger-menu-right__button--close"},subHeader:{hamburgerButtonCls:"#header_mobile_topbar_toggler",hamburgerMenuCls:".sub-header",hamburgerMenuOpenedClass:"sub-header--open",hamburgerButtonCloseClass:"sub-header-button--close"}}},function(e,t,n){"use strict";function a(){$(d).text("**emailNotConfirmed** Email не подтвержден.").css("color","lightcoral")}function s(e,t){$(u.CONST.uiSelectors.headerNavLoginBtn).addClass(p).removeClass(f),$(u.CONST.uiSelectors.headerRegBtn).addClass(p).removeClass(f),$(u.CONST.uiSelectors.headerLoginBox).addClass(p).removeClass(f),$(".nav-link.js_logOut").addClass(f).removeClass(p),$(c).text("**onLoginSubscribe** вы залогинились в Luxgram успешно").css("color","lightblue"),l.default.isEmailConfirmed()||a()}function r(){var e=l.default.isLoggedIn();(l.default.isEmailConfirmed()||a(),e)?($(".nav-link.js_logOut").parent().show(),$(".js_email-confirm--text").text("вы залогинились успешно"),document.referrer.includes("confirm-registration")&&$(".js_message_logged--text").text("вы подтвердили регистрацию"),s()):($(c).text("Привет анонимный пользователь"),$(d).empty())}function o(){r()}Object.defineProperty(t,"__esModule",{value:!0}),t.initHeader=o;var i=n(3),l=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(0),c=".js_message_logged--text",d=".js_email-confirm--text",p="d-none",f="d-block"},function(e,t,n){"use strict";function a(e){var t=e.deleteBtnCls,n=$("#delete-user-promt"),a="";$(t).on("click",function(e){a=$(e.target).closest(t).data("username"),console.log(),n.modal("show")}),$(".js_acc-delete-confirm").on("click",function(e){r.default.delInstagramAccount(a).then(function(e){console.log(e),"ok"===e.status.state&&(n.hide(),window.PubSub.publish(o.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_NEED_REFRESH))})})}Object.defineProperty(t,"__esModule",{value:!0}),t.settingButtonsHandler=a;var s=n(3),r=function(e){return e&&e.__esModule?e:{default:e}}(s),o=n(0)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(){function e(e){var t=$(e.target);t.find(".first-step").removeClass("d-none"),t.find(".second-step").addClass("d-none"),$(".js_confirm-key").val(""),$(".js_success-feedback",t).removeAttr("style").empty()}var t="";$(".js_pass-checkpoint-btn").on("click",function(e){var n=$(e.target),a=n.data("username");t=n.data("checkpointType")||t;var s="PHONE"===t?"телефон":"email";if("EMAIL_OR_PHONE"===t)return e.stopPropagation(),void $("#security-code-phoneOremail").modal({show:!0,username:a});d.default.getSecurityKey(a,t).then(function(e){if(console.log("SecurityKey received:",e.status.state),"ok"===e.status.state){var t=$("#security-code");$(".js_success-feedback",t).empty().text("Ключ подтверждения был отправлен Вам на "+s),$("#security-code").attr("data-username",a)}})}),$(".js_confirm-security-code").on("click",function(e){var t=$(e.target),n=t.closest("#security-code").data("username"),a=t.closest(".modal").find(".modal-dialog form input.js_confirm-key"),s=a.val().trim(),r=t.closest(".modal");e.stopPropagation(),6===s.length&&d.default.confirmSecurityKey(s,n).then(function(e){"ok"===e.status.state&&r.modal("hide")}).catch(function(e){console.log("err"),$(".js_success-feedback",r).text("Запрос не отправлен").css("color","red"),console.log(e)})}),$("form input[minlength]").on("blur",function(){var e=$(this).val().trim().length;Number($(this).attr("minlength"))!==e?$(this).css("borderColor","red"):$(this).css("borderColor","#ced4da")}),$("#security-code-phoneOremail").on("hide.bs.modal",e),$("#security-code").on("hide.bs.modal",e),$(".js_get-security-code-phoneOremail").on("click",function(e){var t=$("#security-code-phoneOremail"),n=$(e.target).closest(t).find(".js_btn-type-switcher input:checked"),a=n.val(),s="PHONE"===a?"телефон":"email",r=t.data()["bs.modal"]._config,o=r.username;d.default.getSecurityKey(o,a).then(function(e){console.log("SecurityKey received:",e.status.state),"ok"===e.status.state&&($(".first-step",t).addClass("d-none"),$(".second-step",t).removeClass("d-none"),$(".js_success-feedback",t).empty().text("Ключ подтверждения был отправлен Вам на "+s))})})}function r(e,t){var n=t,a=e,s=m.CONST.user.defaulAvatar,r=function(e,t,n){return e?'<li class="list-inline-item '+n+'"><span class="figure">'+e+"</span><span>"+t+"</span></li>":'<li class="list-inline-item '+n+'"><span class="figure">0</span><span>'+t+"</span></li>"},o=function(e){return'<div class="col">\n            <ul class="list-inline text-center counts-list">\n            '+(e?r(e.media_count,"Публикации","media-count")+"\n                "+r(e.follower_count,"Подписчики","follower-count")+"\n                "+r(e.following_count,"Подписки","following-count"):r(!1,"Публикации","media-count")+"\n                "+r(!1,"Подписчики","follower-count")+"\n                "+r(!1,"Подписки","following-count"))+"\n            </ul>\n        </div>"},i=function(e,t){return"TRIGGERED"===e.status?'<button class="btn btn-outline-secondary js_pass-checkpoint-btn d-block mx-auto" \n                data-checkpoint-type="'+(e.type||"EMAIL")+'"\n                data-username="'+(t.username||"")+'"\n                data-toggle="modal" data-target="#security-code">\n                <i class="fas fa-key"></i>Пройти чекпоинт</button>':"FAIL"===t.status?'<span class="text-danger">Ошибка при добавлении</span>':void 0},l=function(e){if(h||window.location.href.includes(y))return'<div class="account-setting col-1 d-flex flex-column">\n                <button class="btn btn-outline-success p-1 mb-1 js_acc-edit"><i class="fas fa-pen m-0"></i></button>\n                <button class="btn btn-outline-secondary p-1 mb-1 js_acc-refresh"><i class="fas fa-retweet m-0"></i></button>\n                <button class="btn btn-outline-danger p-1 js_acc-delete" data-username="'+e+'"><i class="fas fa-trash m-0"></i></button>\n            </div>'};a.empty().addClass("border-light-color"),n.forEach(function(e){var t=e.info,n=e.checkpoint||e;t?$('<li class="media py-3" data-username="'+e.username+'">\n            '+(t.profile_pic_url?'<img class="ml-3 rounded" alt="User photo" src="'+t.profile_pic_url+'">':'<img class="ml-3 rounded" alt="default avatar" src="'+s+'">')+'\n            <div class="media-body d-flex">\n                <div class="col user-info">\n                    '+(e.username?'<p class="mt-0 mb-1 name lead">'+e.username+"</p>":"")+"\n                    "+(t.name?'<h4 class="mt-0 mb-1">'+t.name+"</h4>":"")+"\n                    "+(t.name,"")+'\n                    \n                </div>\n                <div class="col user-checkpoint">\n                    '+("TRIGGERED"===n.status?'<button class="btn btn-outline-secondary js_pass-checkpoint-btn d-block mx-auto" \n                            data-checkpoint-type="'+(n.type||"EMAIL")+'"\n                            data-username="'+(e.username||"")+'" \n                            data-toggle="modal" data-target="#security-code">\n                        <i class="fas fa-key"></i>Пройти чекпоинт</button>':"")+"\n                </div>\n                "+o(t)+"\n                "+(l()?l():"")+"\n            </div>\n        </li>").appendTo(a):$('<li class="media py-3" data-username="'+e.username+'">\n                <img class="ml-3 rounded" alt="default avatar" src="'+s+'">\n                <div class="media-body d-flex">\n                    <div class="col user-info">\n                        '+(e.username?'<h4 class="mt-0 mb-1 name">'+e.username+"</h4>":"")+'\n                    </div>\n                    <div class="col user-checkpoint">\n                        '+i(n,e)+"\n                    </div>\n                    "+o()+"\n                    "+l(e.username)+"\n                </div>\n            </li>").appendTo(a)}),window.PubSub.publish(m.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED,{name:name,dataArray:t}),console.log("INSTAGRAM_ACCOUNS_RENDERED")}function o(e){$(".profile-user .spinner-box").addClass("d-none"),r(v,e.data.accounts),s()}function i(){var e=$(".accounts-list");$(".profile-user .spinner-box").removeClass("d-none"),d.default.getMetadata().then(function(t){e.empty(),console.log(t.data,t.data.accounts),o(t)}).catch(function(e){setTimeout(function(){f.default.showInfoMessage($(".error-msg"),e.status||"","Не получилось загрузить доступные Instagram аккаунты")},3e3),$(".spinner-box").addClass("d-none")});var t={deleteBtnCls:".js_acc-delete"};(0,g.settingButtonsHandler)(t)}function l(){$(".js_add-instagram-account").on("click",function(e){var t=$(e.target),n=t.closest(".modal").find(".modal-dialog .modal-body"),a=n.find('input[name="username"]').val().trim(),s=n.find('input[name="pass"]').val().trim(),r=n.find('input[name="ip"]').val().trim(),o=n.find('input[name="port"]').val().trim(),i=n.find('input[name="usernameProxy"]').val().trim(),l=n.find('input[name="passProxy"]').val().trim(),u=$("form",n),c=u.get(0);if(e.preventDefault(),c.checkValidity()?b({username:a,password:s,usernameProxy:i,passwordProxy:l,ip:r,port:o}):(c.reportValidity&&c.reportValidity(),u.addClass("form-validation")),!(a&&s&&r&&function(e){return/^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(e)}(r)&&o&&function(e){return/^([0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/.test(e)}(o)&&i&&l))return e.stopPropagation(),void console.log("not valid fields")})}function u(){if(v.length){var e=d.default.getMetadata();v.length&&(l(),e.then(function(e){o(e);var t={deleteBtnCls:".js_acc-delete"};(0,g.settingButtonsHandler)(t)}).catch(function(e){setTimeout(function(){f.default.showInfoMessage($(".error-msg"),e.status||"","Не получилось загрузить доступные Instagram аккаунты")},3e3),$(".spinner-box").addClass("d-none")}),window.PubSub.subscribe(m.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_NEED_REFRESH,function(e,t){i()}),window.PubSub.subscribe(m.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED,function(e,t){t.dataArray.forEach(function(e){var t=e.info&&e.info.profile_pic_url||m.CONST.user.defaulAvatar;sessionStorage.setItem(e.username,t)})}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=u;var c=n(3),d=a(c),p=n(2),f=a(p),m=n(0),g=n(28),h=$(".instagram-accounts-page").length,v=$(".accounts-list"),y="instagram-accounts",b=function(e){var t=function(e){console.log("ERROR",e),f.default.showInfoMessage($(".error-msg"),e.status.state,e.status.message||"Login error")};d.default.addInstagramAccount(e,t).then(function(e){e&&e.status&&(console.log(e,e.status),i())}).catch(function(e){console.log(e)}),console.log("submit",e)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e){function t(){b()}var n=this,a=e._formId,s=e._buttonSubmitId,r=e._showLoginBoxBtnId,i=e._loginBox,u=o.default,d=$(a),m=d.find('input[name="mail"]'),g=$("#description"),h=function(e){var t=function(e){$(i).append("<p>result.status.message</p>")};return u.login(e,t).then(function(e){e&&e.data&&e.data.token?(c.default.set(f.CONST.cookieStorage.token,e.data.token),$(".nav-link.js_logOut").parent().show(),p.default.showInfoMessage(g,e.status.state,e.status.message||"Login succsess")):e.status?(console.log(e),p.default.showInfoMessage(n.$textAreaDescription,"<p>status: "+e.status.state+"</p><p> message: "+e.status.message+"</p>")):console.log(e)}).then(function(e){e&&e.status&&(console.log(e),p.default.showInfoMessage(g,e.status.state,e.status.message||"Login error"))})},v=function(t){var n=m.val(),a=d.find('input[name="pass"]').val(),s=t||{email:n,password:a};e.isLoginInstagram||(m.val(m.val().toLocaleLowerCase()),h(s).then(function(){l.default.publish(f.CONST.events.USER_LOGGED,"login")}))},y=function(){c.default.remove(f.CONST.cookieStorage.token),l.default.publish(f.CONST.events.USER_LOGOUT)},b=function(){var t=$(r),n=$(i);t.on("click",function(){e.isLoginInstagram||n.css({top:0,right:0}).addClass("bg-light border mt-5 mx-auto position-absolute"),n.addClass("d-block").removeClass("d-none")});$(s).on("click",function(e){e.preventDefault();var t=d.get(0);t.checkValidity()&&p.default.isEmail(m.val())?v():(t.reportValidity&&t.reportValidity(),d.addClass("form-validation"))}),$(".nav-link.js_logOut").on("click",function(e){e.preventDefault(),y(),$(e.target).parent().hide(),p.default.showInfoMessage(g,"Logged out")}),l.default.subscribe(f.CONST.events.USER_LOGOUT,function(e){$(f.CONST.uiSelectors.headerNavLoginBtn).addClass("d-block").removeClass("d-none"),$(f.CONST.uiSelectors.headerRegBtn).addClass("d-block").removeClass("d-none"),$(".nav-link.js_logOut").addClass("d-none").removeClass("d-block"),$(".js_message_logged--text").text("Вы вышли из аккаунта")}),$(document).on("click",function(e){var t=$(e.target).closest("nav.navbar").find(n).length,a=$(e.target).attr("id")===f.CONST.uiSelectors.instagram.addAccountBtnId;t||!n.hasClass("d-block")||a||n.addClass("d-none").removeClass("d-block")})};return{init:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginForm=s;var r=n(3),o=a(r),i=n(9),l=a(i),u=n(4),c=a(u),d=n(2),p=a(d),f=n(0)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(){var e=$(".messages-list"),t=$(".messages-user-list");return!!e.length&&!!t.length}function r(e){var t=$(".messages-user-list"),n=h.default.getMetadata(_),a="";e||(a=t.find("li .collapse.show").attr("id")),n.then(function(n){n.data&&(n.data.meta.sort(function(e,t){return e.username.localeCompare(t.username)}),(0,v.fillUserList)(t,n.data),n.data.settings&&n.data.settings.invoke_in_millis&&(S=n.data.settings.invoke_in_millis),e?t.find("li:first-child .collapse").addClass("show"):$("#"+a).addClass("show"))})}function o(e,t){if(!E.allMsgLoaded){E.firstLoad&&(E.cursor=e.prev_cursor,E.firstLoad=!1);var n=k.data("conversation"),a=n.username,s=n.conversationId;b.default.add($("#mainChatPart"),"my-5 py-5"),h.default.getMetadataDetailConversation(_,{username:a,conversationId:s,cursor:E.cursor}).then(function(e){var n=e.data.meta.pagination&&e.data.meta.pagination.prev_cursor;b.default.remove(),x({$list:k,dataArray:e.data.meta.messages,isAppendPrevMsg:"appentPrevMsg",stateCfg:T}),n?(E.cursor=n,k.scrollTop(k.scrollTop()+30)):E.allMsgLoaded=!0,C&&(clearInterval(C),t(e.data.meta.pagination.prev_cursor))})}}function i(e,t){function n(e){e!==O&&(O=e,s=!0,console.log("prevCursor",e))}var a=!1,s=!0;O=t.prev_cursor,setTimeout(function(){k.on("scroll",function(){var e=$(this).scrollTop();a||(e+$(this).innerHeight()>=this.scrollHeight||e<=45&&(t&&s?(s=!1,o(t,n)):$(".messages-list-box").find(".load-more").remove()),a=!0,window.setTimeout(function(){a=!1},50))})},e+200)}function l(e,t,n){h.default.getMetadataDetailConversation(_,{username:e,conversationId:t}).then(function(a){(0,v.fillMassagesList)({$list:k,dataArray:a.data.meta.messages,stateCfg:T}),b.default.remove(),$(".js_send-message-box").removeClass("d-none"),$(".messages-list").attr("data-conversation",JSON.stringify({username:e,conversationId:t})),n&&(k.animate({scrollTop:k[0].scrollHeight-k[0].clientHeight},10),A&&(P=a.data.meta.messages[a.data.meta.messages.length-1],console.log(P),A=!1)),i(10,a.data.meta.pagination)})}function u(){var e="",t=$("#sendMessageTextArea");$("#sendMessageButton").on("click",function(e){var n=t.val(),a=k.data("conversation"),s=a.username,r=a.conversationId;b.default.add($(e.target),"spinner-box--sendMsg"),h.default.postMetadataDetailConversation(_,{username:s,conversationId:r,value:n}).then(function(e){e&&e.status&&"ok"===e.status.state&&(l(s,r),t.val(""),b.default.remove(),window.PubSub.publish(w.CONST.events.messages.RECIEVE_NEW_MESSAGE,{username:s,conversationId:r,value:n,result:e}))})}),(0,v.messageAreaHendler)(t,$("#sendMessageButton")),$(document).on("click",".list-group-item .collapse",function(t){t.stopPropagation();var n=$(t.target).closest(".list-group-item").data("username");e=$(t.target).closest(".media").data("conversation-id"),b.default.add($("#mainChatPart"),"my-5 py-5"),l(n,e,"isScrollDown"),A=!0,S=S>6e3?S:1e4,C&&clearInterval(C),C=setInterval(function(){e=$(t.target).closest(".media").data("conversation-id"),console.log(C,e),l(n,e)},S),setInterval(function(){r()},S)}),window.PubSub.subscribe(w.CONST.events.messages.RECIEVE_NEW_MESSAGE,function(e,t){var n=t.username,a=t.conversationId,s=t.value,r=t.resultFromServer,o=$('.messages-user-list .list-group-item[data-username="'+n+'"] div[data-conversation-id="'+a+'"]');console.log("set val from text-area",s),console.log("resultFromServer: ",r),o.find(".summary").text(s)})}function c(){s()&&(r("setActiveFirst"),u())}Object.defineProperty(t,"__esModule",{value:!0}),t.init=c;var d=n(11),p=a(d),f=n(3),m=a(f),g=n(37),h=a(g),v=n(32),y=n(39),b=a(y),w=n(0),_=m.default.getToken(),k=$(".messages-list"),T={pageIncrement:0,loadingFlag:!1,setSingleVal:!1},S="",C=!1,O="",x=function(e){function t(e,t,n){n&&$("li",e).remove(),e.css({overflow:"auto"}),$("<li/>").addClass("list-group-item text-center").text(t).appendTo(a)}var n=e.dataArray,a=e.$list,s=e.stateCfg;return"FINAL_PAGE"!==s.loadingFlag&&("FAIL"===n?(t(a,"Failure, possible key not correct.",!0),!1):"STOP_LOAD"===s.loadingFlag&&0!==n.length?(s.loadingFlag="FINAL_PAGE",t(a,"No more results.",!1),!1):null!==n&&n.length?void(0,v.fillMassagesList)(e):(t(a,"No results found.",!0),!1))};$(document).ready(function(){if(s()){var e=(new p.default,$('textarea[data-meteor-emoji="true"] ~ div')),t=e.attr("style"),n=t.replace("top: 30px;","top: -210px;");e.attr("style",n)}});var E={cursor:"pagination.prev_cursor",firstLoad:!0,allMsgLoaded:!1},P="",A=!0},function(e,t,n){"use strict";function a(e,t){t.pageIncrement=0,e.empty()}function s(e){var t=e.$list,n=e.dataArray,s=e.isAppendPrevMsg,r=e.stateCfg,o=n,l=t,u=function(e,t,n){var a="";switch(t.toLowerCase()){case"photo":a='<div class="chat-img">\n                    <img src="'+e+'" alt="Content Image" class="content-image">\n                </div>';break;case"link":a='<div class="chat-img">\n                <a target="_blank" href="'+e+'">'+e+"</a></div>";break;default:a='<div class="chat-text '+n+'" >'+e+"</div>"}return a},c=function(e,t,n){e?t.insertBefore(n.find("li:first-child")):t.appendTo(n)};s||(l.empty().addClass("border-light-color"),a(l,r),$('<li class="mt-auto"></li>').appendTo(l)),o.forEach(function(e){var t=e,n=t.value.replace(/(?:\r\n|\r|\n)/g,"<br />");if("left"===t.side.toLowerCase()){var a=$('<li class="chat-item chat-item-left col flex-column-reverse" value="'+t.value+'">\n                <div class="d-flex">\n                '+(t.profile_pic_url?'<div class="chat-img-box"> \n                            <img src="'+t.profile_pic_url+'" alt="User Avatar" class="">\n                        </div>':"")+'\n                <div>\n                    <p class="chat-username text-muted">'+t.username+"</p>\n                    "+u(t.value,t.type,"text-left")+'\n                </div>\n                    <small class="chat-time-text">'+i.default.getFormattedDateUtil(t.timestamp)+"</small>\n                </div>\n                </div>\n            </li>");c(s,a,l)}else{var r=$('<li class="chat-item chat-item-right col flex-column-reverse" value="'+t.value+'">\n                <div class="d-flex justify-content-end">\n                    '+u(n,t.type,"text-right")+'\n                    <small class="pull-right chat-time-text">'+i.default.getFormattedDateUtil(t.timestamp)+"</small>\n                    </div>\n            </li>");c(s,r,l)}})}function r(e,t){var n=t.meta,a=e,s="",r=function(e){var t="";return e.forEach(function(n){e.length>1?t+='<img src="'+n.profile_pic_url+'" alt=\'image\' class="media-photo mr-1 media-photo--group" style="width: 24px;">':t+='<img src="'+n.profile_pic_url+'" alt=\'image\' class="media-photo mr-1" style="width: 24px;">'}),t},o=function(e){var t="";return e.forEach(function(e){t+='\n            <div class="media p-1" data-conversation-id="'+e.id+'">\n                '+r(e.to)+'\n                <div class="media-body">\n                    <h5 class="title">'+e.title+"</h5>\n                    "+(e.last_message&&parseInt(e.last_message.length,10)>0&&1===e.to.length?'<p class="summary '+(e.is_unread?"font-weight-bold":"text-muted")+'">'+e.last_message+"</p>\n                            "+(e.is_unread?'<span class="summary-dot"></span>':""):"")+"\n                </div>\n            </div>"}),t};a.empty().addClass("border-light-color"),n.forEach(function(e,t){s+='<li class="list-group-item" data-toggle="collapse" data-target="#collapse-'+t+'" data-username="'+e.username+'" \n                aria-expanded="true" aria-controls="collapse-'+t+'">\n            <div class="border-bottom mb-1 media pb-2" id="heading-'+t+'">\n                <span class="mr-3">\n                    <img src="'+e.profile_pic_url+'" alt="avatar"\n                    class="media-photo rounded-circle">\n                </span>\n                '+(e.unread_conversations>0?'<span class="badge badge-secondary position-absolute p-2">'+e.unread_conversations+"</span>":"")+'\n                <div class="media-body">\n                    <h4 class="title">\n                        '+e.username+'\n                    </h4>\n                </div>\n            </div>\n            <div id="collapse-'+t+'" class="collapse" aria-labelledby="heading-'+t+'" data-parent="#accordion">\n                '+o(e.conversations)+"\n            </div>\n        </li>"}),$(s).appendTo(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.messageAreaHendler=void 0,t.clearMassagesList=a,t.fillMassagesList=s,t.fillUserList=r;var o=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.messageAreaHendler=function(e,t){e.on("keydown",function(e){13===e.keyCode&&(e.ctrlKey?(e.preventDefault(),e.target.value=e.target.value+"\n"):(e.target.value.trim().length&&t.trigger("click"),e.preventDefault()))})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(9),i=a(o),l=n(3),u=a(l),c=n(4),d=a(c),p=n(0),f=n(2),m=a(f),g={form:".auth.register .form-signin",submitBtn:'[type="submit"]'},h=function(){function e(){s(this,e),this.user=u.default,this.$form=$(g.form),this.$email=this.$form.find('input[name="mail"]'),this.$textAreaDescription=$("#description"),this.formData={email:"test1_email@m.ru",password:"password"}}return r(e,[{key:"init",value:function(){$(".auth.register").length&&this.bindEvents()}},{key:"submitForm",value:function(e){var t=this,n=this.$email.val(),a=this.$form.find('input[name="pass"]'),s=this.$form.find('input[name="pass-confirm"]'),r=this.$form.find('input[name="pass"]').val();if(this.$form.find('input[name="pass-confirm"]').val()!==r)return a.addClass("input-error"),void s.addClass("input-error");this.$email.val(this.$email.val().toLocaleLowerCase()),this.formData=e||{email:n,password:r},this.user.register(this.formData).then(function(e){e.data&&e.data.token?(d.default.set(p.CONST.cookieStorage.emailConfirmed,"false"),d.default.set(p.CONST.cookieStorage.token,e.data.token),i.default.publish(p.CONST.events.USER_LOGGED),m.default.showInfoMessage(t.$textAreaDescription,e.status.state,e.status.message||"Register and Login succsess")):m.default.showInfoMessage(t.$textAreaDescription,e.status.state,e.status.message||"no result.data found")}).then(function(e){e&&e.status&&(console.log(e),m.default.showInfoMessage(t.$textAreaDescription,e.status.state),$(".login-box").show())}).catch(function(e){console.log("request failed",e),m.default.showInfoMessage(t.$textAreaDescription,e.message),console.log("do something")})}},{key:"bindEvents",value:function(){var e=this,t=p.CONST.uiSelectors.headerRegBox,n=$(g.submitBtn);n.on("click",function(t){var a=e.$form.get(0);t.preventDefault(),n.is(":disabled")||(a.checkValidity()?e.submitForm():(a.reportValidity&&a.reportValidity(),e.$form.addClass("form-validation")))}),$(document).on("click",function(e){!$(e.target).closest("nav.navbar").find(".register-box").length&&$(t).hasClass("d-block")&&$(t).addClass("d-none").removeClass("d-block")})}}]),e}();t.default=h},function(e,t,n){"use strict";function a(){["instagram-accounts","autoanswer","stories","autogreeting","follow","messages","chat-bot"].forEach(function(e){window.location.href.includes(e)&&$('nav.aside-burger-menu a[href*="'+e+'"]').addClass("text-info").removeClass("text-light")})}Object.defineProperty(t,"__esModule",{value:!0}),t.initMenu=a},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=N.wizardFormName,n=document.forms[t],a=n.limit;if(""===a.value)return a.focus(),!1;var s=g({},j,{user_default_config:g({},j.user_default_config,{criteria:{max_views:a.value}}),user_custom_config:{},type:M.pathType,username:P});if(s.subtype===h.CONST.url.tmTypes.storiesSubT[1]){var r=I($(n).find(N.competitors));s.user_custom_config={competitors:r}}$(n).find('input[type="text"],input[type="number"],input[type="email"]').each(function(){""===$(this).val()?(e.preventDefault(),$(this).addClass("input-error")):$(this).removeClass("input-error")}),console.log("onSubmitHandler **request**  post: StartFollowingList",s),y.default.postStartFollowingList(s).then(function(e){"ok"===e.status.state&&(console.log(JSON.stringify(e)),$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>"))})}function o(e){var t=A.selectClsLogsTaskType;M.pathSubType=$("."+t+" option:selected").val(),$(".js_logs-container").addClass("d-block"),$("option.js_empty-subtype").remove()}function i(e,t){var n=A.selectCls;e.empty().addClass("border-light-color"),$('<div class="">Доступные аккаунты</div><select name="task-type" class="'+n+'"></select>').appendTo(e),t.forEach(function(e){$('<option class="list-group-item py-2" value="'+e+'">\n            '+e+"\n        </option>").appendTo($("."+n))}),$("."+n).on("change",function(){P=$("."+n+" option:selected").val(),E.init(n,M)})}function l(){$(".js_get-stories-type input[type=radio]").on("click",function(e){var t=$(e.target).attr("value");j.subtype=t.toUpperCase(),console.log(j)}),$(".form-submit-finish .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(h.CONST.events.tasks.NEW_TASK_CREATED)}),$(".form-submit-finish--error .close").on("click",function(){$("#v-pills-runned-tab").trigger("click"),window.PubSub.publish(h.CONST.events.tasks.NEW_TASK_CREATED)}),w.default.addDropdown($(A.wrapperSubtype),h.CONST.url.tmTypes.storiesSubT,{logsState:A,dropdownOnSelectCb:o}),O.init(i)}function u(e){var t=e.cfg.task_modes,n=N.taskMode;w.default.fillRadioGroupList($(n),t," "),$(n+" input[type=radio]").on("click",function(e){var t=$(e.target).attr("value");j.user_default_config.task_mode=t.toUpperCase()})}function c(){var e={type:M.pathType,subtype:j.subtype},t=function(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")};y.default.getStoriesConfig(e,t).then(function(e){if("ok"===e.status.state){var t=e.data.found,n=t.cfg.criteria.max_views;u(t),$("#limit").val(n)}})}function d(e){P=e.username}function p(e){var t=N.wizardForm;if(j.subtype===h.CONST.url.tmTypes.storiesSubT[1]){var n=$(t+" fieldset").get(e+1);$(n).find(".form-bottom>.row").after('<div class="row">\n            <label class="">Конкуренты</label>\n            <textarea class="form-control stories-competitors mb-2" rows="1"></textarea></div>'),console.log("end")}}function f(e,t){switch(e){case 0:d(t);break;case 1:c();break;case 2:console.log(t,e),p(e);break;default:console.log("default",e)}}function m(){var e=$(M.currentPageCls).length;if(e){console.log(M.currentPageCls);var t={stepReducer:f,onSubmitHandler:r};k.init(t),l(),S.init({isInStoriesPage:e})}}Object.defineProperty(t,"__esModule",{value:!0});var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.init=m;var h=n(0),v=n(1),y=s(v),b=n(2),w=s(b),_=n(8),k=a(_),T=n(36),S=a(T),C=n(7),O=a(C),x=n(5),E=a(x),P="",A={selectCls:"js_logs-accounts",selectClsLogsTaskType:"js_logs-subtypes",wrapperSubtype:".log-subype"},M={currentPageCls:".stories-page",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:h.CONST.url.tmTypes.storiesT,pathSubType:h.CONST.url.tmTypes.storiesSubT[0]},N={wizardForm:".wizard-form",wizardFormName:"wizard-form",fields:".autoanswer-text-fields",taskMode:".js_task-mode",competitors:"textarea.stories-competitors"},j={subtype:h.CONST.url.tmTypes.storiesSubT[0],user_default_config:{task_mode:"SAFE"}},I=function(e){return e.val().trim().replace(/ /g,"").split(",").filter(function(e){return e.length>0})}},function(e,t,n){"use strict";function a(e){var t=$(e.target).find("option:selected").val(),n=r({},c,{subtype:t});$(".js_logs-container").addClass("d-block"),$("option.js_empty-subtype").remove(),(0,i.getTasksData)(d,n)}function s(e){e.isInStoriesPage&&(u.default.addDropdown(p.wrapperSubtype,o.CONST.url.tmTypes.storiesSubT,{logsState:p,dropdownOnSelectCb:a}),window.PubSub.subscribe(o.CONST.events.tasks.NEW_TASK_CREATED,function(e,t){(0,i.getTasksData)(d,c)}))}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.init=s;var o=n(0),i=n(6),l=n(13),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c={type:o.CONST.url.tmTypes.storiesT,subtype:o.CONST.url.tmTypes.storiesSubT[0]},d={$runs:$(".tasks-runs"),$stopped:$(".tasks-stopped")},p={wrapperSubtype:$(".subtype--box")}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),l=n(10),u=a(l),c=n(4),d=a(c),p=function(){function e(){s(this,e),this.network=new u.default,this.cookieStorage=d.default,this.settingPost={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}}}return o(e,[{key:"isLoggedIn",value:function(){return!!this.getToken()}},{key:"isEmailConfirmed",value:function(){return"confirmed"===this.cookieStorage.get(i.CONST.cookieStorage.emailConfirmed)}},{key:"getToken",value:function(){return this.cookieStorage.get(i.CONST.cookieStorage.token)}},{key:"getMetadata",value:function(e,t){return this.network.sendRequest(""+i.CONST.getPath("instagramDirect_getMetaData"),{headers:{token:e}},t)}},{key:"getMetadataDetailConversation",value:function(e,t,n){var a=t.cursor?"?cursor="+t.cursor:"";return this.network.sendRequest(i.CONST.getPath("instagramDirect_getMetaData")+"/"+t.username+"/"+t.conversationId+a,{headers:{token:e}},n)}},{key:"postMetadataDetailConversation",value:function(e,t,n){var a=r({},this.settingPost,{body:JSON.stringify({value:t.value}),headers:r({},this.settingPost.headers,{token:this.getToken()})});return this.network.sendRequest(i.CONST.getPath("instagramDirect_postMessage")+"/"+t.username+"/"+t.conversationId+"/text",a,n)}}]),e}(),f=null;f||(f=new p),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emoji=void 0;var a=n(11),s=function(e){return e&&e.__esModule?e:{default:e}}(a);t.emoji=function(e){if($(e.page).length){var t=(new s.default,$('textarea[data-meteor-emoji="true"] ~ div')),n=t.attr("style"),a=n.replace(e.styles.old,e.styles.new);t.attr("style",a)}}},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r={inline:"global-inline-spinner",overlay:"global-overlay-spinner",fixed:"global-fixed-spinner",button:"button--load"},o=function(){function e(t){a(this,e),this.startButtonSpinner=function(e,t){e.addClass(r.button),e.find(".spinner-box--button").length||e.prepend('<div class="spinner-box spinner-box--button justify-content-center position-relative p-0 m-0 bg-transparent '+t+'">\n            <div class="spin-animation">\n                <svg aria-hidden="true" data-prefix="far" data-icon="sync-alt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" \n                    class="fa-fw">\n                    <path fill="currentColor" d="M483.515 28.485L431.35 80.65C386.475 35.767 324.485 8 256 8 123.228 8 14.824 112.338 8.31 243.493 7.971 250.311 13.475 256 20.301 256h28.045c6.353 0 11.613-4.952 11.973-11.294C66.161 141.649 151.453 60 256 60c54.163 0 103.157 21.923 138.614 57.386l-54.128 54.129c-7.56 7.56-2.206 20.485 8.485 20.485H492c6.627 0 12-5.373 12-12V36.971c0-10.691-12.926-16.045-20.485-8.486zM491.699 256h-28.045c-6.353 0-11.613 4.952-11.973 11.294C445.839 370.351 360.547 452 256 452c-54.163 0-103.157-21.923-138.614-57.386l54.128-54.129c7.56-7.56 2.206-20.485-8.485-20.485H20c-6.627 0-12 5.373-12 12v143.029c0 10.691 12.926 16.045 20.485 8.485L80.65 431.35C125.525 476.233 187.516 504 256 504c132.773 0 241.176-104.338 247.69-235.493.339-6.818-5.165-12.507-11.991-12.507z" class=""></path></svg>\n            </div>\n        </div>')},this.stopButtonSpinner=function(e){e.removeClass(r.button)},this.cfg=t||{},$.extend(r,this.cfg.classes)}return s(e,[{key:"start",value:function(e,t){e.find("i").toggleClass(t).addClass("fa-spin fa-spinner")}},{key:"stop",value:function(e,t){e.find("i").toggleClass(t).removeClass("fa-spin fa-spinner")}},{key:"add",value:function(e,t){this.$el=e,e.prepend('<div class="spinner-box justify-content-center '+t+'">\n            <div class="spin-animation">\n                <svg aria-hidden="true" data-prefix="far" data-icon="sync-alt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-sync-alt fa-w-16 fa-fw fa-2x"><path fill="currentColor" d="M483.515 28.485L431.35 80.65C386.475 35.767 324.485 8 256 8 123.228 8 14.824 112.338 8.31 243.493 7.971 250.311 13.475 256 20.301 256h28.045c6.353 0 11.613-4.952 11.973-11.294C66.161 141.649 151.453 60 256 60c54.163 0 103.157 21.923 138.614 57.386l-54.128 54.129c-7.56 7.56-2.206 20.485 8.485 20.485H492c6.627 0 12-5.373 12-12V36.971c0-10.691-12.926-16.045-20.485-8.486zM491.699 256h-28.045c-6.353 0-11.613 4.952-11.973 11.294C445.839 370.351 360.547 452 256 452c-54.163 0-103.157-21.923-138.614-57.386l54.128-54.129c7.56-7.56 2.206-20.485-8.485-20.485H20c-6.627 0-12 5.373-12 12v143.029c0 10.691 12.926 16.045 20.485 8.485L80.65 431.35C125.525 476.233 187.516 504 256 504c132.773 0 241.176-104.338 247.69-235.493.339-6.818-5.165-12.507-11.991-12.507z" class=""></path></svg>\n            </div>\n        </div>')}},{key:"remove",value:function(){this.$el.find(".spinner-box").remove()}}]),e}(),i=null;i||(i=new o),t.default=i},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e){function t(){$(".auth.login").length&&y()}var n=this,a=e._formId,s=e._buttonSubmitId,r=e._loginBox,i=o.default,u=$(a),d=u.find('input[name="mail"]'),m=$("#description"),g=function(e){var t=function(e){$(r).append("<p>result.status.message</p>")};return i.login(e,t).then(function(e){e&&e.data&&e.data.token?(c.default.set(f.CONST.cookieStorage.token,e.data.token),$(".nav-link.js_logOut").parent().show(),p.default.showInfoMessage(m,e.status.state,e.status.message||"Login succsess")):e.status?(console.log(e),p.default.showInfoMessage(n.$textAreaDescription,"<p>status: "+e.status.state+"</p><p> message: "+e.status.message+"</p>")):console.log(e)}).then(function(e){e&&e.status&&(console.log(e),p.default.showInfoMessage(m,e.status.state,e.status.message||"Login error"))})},h=function(t){var n=d.val(),a=u.find('input[name="pass"]').val(),s=t||{email:n,password:a};e.isLoginInstagram||(d.val(d.val().toLocaleLowerCase()),g(s).then(function(){window.location.href="/instagram-integration/instagram-accounts.html"}))},v=function(){c.default.remove(f.CONST.cookieStorage.token),l.default.publish(f.CONST.events.USER_LOGOUT)},y=function(){var e=$(r);$(s).on("click",function(e){e.preventDefault();var t=u.get(0);console.log(p.default,p.default.isEmail(d.val())),t.checkValidity()&&p.default.isEmail(d.val())?h():(t.reportValidity&&t.reportValidity(),u.addClass("form-validation"))}),$(".nav-link.js_logOut").on("click",function(e){e.preventDefault(),v(),$(e.target).parent().hide(),p.default.showInfoMessage(m,"Logged out")}),l.default.subscribe(f.CONST.events.USER_LOGOUT,function(e){$(f.CONST.uiSelectors.headerNavLoginBtn).addClass("d-block").removeClass("d-none"),$(f.CONST.uiSelectors.headerRegBtn).addClass("d-block").removeClass("d-none"),$(".nav-link.js_logOut").addClass("d-none").removeClass("d-block"),$(".js_message_logged--text").text("Вы вышли из аккаунта")}),$(document).on("click",function(t){var n=$(t.target).closest("nav.navbar").find(e).length,a=$(t.target).attr("id")===f.CONST.uiSelectors.instagram.addAccountBtnId;n||!e.hasClass("d-block")||a||e.addClass("d-none").removeClass("d-block")})};return{init:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginPage=s;var r=n(3),o=a(r),i=n(9),l=a(i),u=n(4),c=a(u),d=n(2),p=a(d),f=n(0)},function(module,exports){if("undefined"==typeof brutusin)window.brutusin=new Object;else if("object"!=typeof brutusin)throw"brutusin global variable already exists";!function(){String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();(void 0===t||t>n.length)&&(t=n.length),t-=e.length;var a=n.indexOf(e,t);return-1!==a&&a===t}),String.prototype.includes||(String.prototype.includes=function(){"use strict";return-1!==String.prototype.indexOf.apply(this,arguments)}),String.prototype.format||(String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;t++){var n=new RegExp("\\{"+t+"\\}","gi");e=e.replace(n,arguments[t])}return e});var BrutusinForms=new Object;BrutusinForms.messages={validationError:"Validation error",required:"This field is **required**",invalidValue:"Invalid field value",addpropNameExistent:"This property is already present in the object",addpropNameRequired:"A name is required",minItems:"At least `{0}` items are required",maxItems:"At most `{0}` items are allowed",pattern:"Value does not match pattern: `{0}`",minLength:"Value must be **at least** `{0}` characters long",maxLength:"Value must be **at most** `{0}` characters long",multipleOf:"Value must be **multiple of** `{0}`",minimum:"Value must be **greater or equal than** `{0}`",exclusiveMinimum:"Value must be **greater than** `{0}`",maximum:"Value must be **lower or equal than** `{0}`",exclusiveMaximum:"Value must be **lower than** `{0}`",minProperties:"At least `{0}` properties are required",maxProperties:"At most `{0}` properties are allowed",uniqueItems:"Array items must be unique",addItem:"Add item",true:"True",false:"False"},BrutusinForms.decorators=new Array,BrutusinForms.addDecorator=function(e){BrutusinForms.decorators[BrutusinForms.decorators.length]=e},BrutusinForms.onResolutionStarted=function(e){},BrutusinForms.onResolutionFinished=function(e){},BrutusinForms.onValidationError=function(e,t){e.focus(),e.className.includes(" error")||(e.className+=" error"),alert(t)},BrutusinForms.onValidationSuccess=function(e){e.className=e.className.replace(" error","")},BrutusinForms.postRender=null,BrutusinForms.instances=new Array,BrutusinForms.create=function(schema){function validateDepencyMapIsAcyclic(){function e(t,n,a){if(n.hasOwnProperty(a))return void(error="Schema dependency graph has cycles");if(n[a]=null,!t.hasOwnProperty(a)){t[a]=null;var s=dependencyMap[a];if(s)for(var r=0;r<s.length;r++)e(t,n,s[r]);delete n[a]}}var t=new Object;for(var n in dependencyMap)t.hasOwnProperty(n)||e(t,new Object,n)}function appendChild(e,t,n){e.appendChild(t);for(var a=0;a<BrutusinForms.decorators.length;a++)BrutusinForms.decorators[a](t,n)}function createPseudoSchema(e){var t=new Object;for(var n in e)"items"!==n&&"properties"!==n&&"additionalProperties"!==n&&(t[n]="pattern"===n?new RegExp(e[n]):e[n]);return t}function getDefinition(e){var t=e.split("/"),n=root;for(var a in t)"0"!==a&&(n=n[t[a]]);return n}function containsStr(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}function renameRequiredPropeties(e){if(e)if(e.hasOwnProperty("oneOf"))for(var t in e.oneOf)renameRequiredPropeties(e.oneOf[t]);else if(e.hasOwnProperty("$ref")){var n=getDefinition(e.$ref);renameRequiredPropeties(n)}else if("object"===e.type){if(e.properties){e.hasOwnProperty("required")&&Array.isArray(e.required)&&(e.requiredProperties=e.required,delete e.required);for(var a in e.properties)renameRequiredPropeties(e.properties[a])}if(e.patternProperties)for(var s in e.patternProperties){var r=e.patternProperties[s];(r.hasOwnProperty("type")||r.hasOwnProperty("$ref")||r.hasOwnProperty("oneOf"))&&renameRequiredPropeties(e.patternProperties[s])}e.additionalProperties&&(e.additionalProperties.hasOwnProperty("type")||e.additionalProperties.hasOwnProperty("oneOf"))&&renameRequiredPropeties(e.additionalProperties)}else"array"===e.type&&renameRequiredPropeties(e.items)}function populateSchemaMap(e,t){var n=createPseudoSchema(t);if(n.$id=e,schemaMap[e]=n,t){if(t.hasOwnProperty("oneOf")){n.oneOf=new Array,n.type="oneOf";for(var a in t.oneOf){var s=e+"."+a;n.oneOf[a]=s,populateSchemaMap(s,t.oneOf[a])}}else if(t.hasOwnProperty("$ref")){var r=getDefinition(t.$ref);if(r){if(t.hasOwnProperty("title")||t.hasOwnProperty("description")){var o={};for(var i in r)o[i]=r[i];t.hasOwnProperty("title")&&(o.title=t.title),t.hasOwnProperty("description")&&(o.description=t.description),r=o}populateSchemaMap(e,r)}}else if("object"===t.type){if(t.properties){n.properties=new Object;for(var i in t.properties){var s=e+"."+i;n.properties[i]=s;var l=t.properties[i];t.requiredProperties&&(containsStr(t.requiredProperties,i)?l.required=!0:l.required=!1),populateSchemaMap(s,l)}}if(t.patternProperties){n.patternProperties=new Object;for(var u in t.patternProperties){var c=e+"["+u+"]";n.patternProperties[u]=c;var d=t.patternProperties[u];d.hasOwnProperty("type")||d.hasOwnProperty("$ref")||d.hasOwnProperty("oneOf")?populateSchemaMap(c,t.patternProperties[u]):populateSchemaMap(c,SCHEMA_ANY)}}if(t.additionalProperties){var s=e+"[*]";n.additionalProperties=s,t.additionalProperties.hasOwnProperty("type")||t.additionalProperties.hasOwnProperty("oneOf")?populateSchemaMap(s,t.additionalProperties):populateSchemaMap(s,SCHEMA_ANY)}}else"array"===t.type&&(n.items=e+"[#]",populateSchemaMap(n.items,t.items));if(t.hasOwnProperty("dependsOn")){null===t.dependsOn&&(t.dependsOn=["$"]);for(var p=new Array,a=0;a<t.dependsOn.length;a++)t.dependsOn[a]?t.dependsOn[a].startsWith("$")?p[a]=t.dependsOn[a]:e.endsWith("]")?p[a]=e+"."+t.dependsOn[a]:p[a]=e.substring(0,e.lastIndexOf("."))+"."+t.dependsOn[a]:p[a]="$";schemaMap[e].dependsOn=p;for(var a=0;a<p.length;a++){var f=dependencyMap[p[a]];f||(f=new Array,dependencyMap[p[a]]=f),f[f.length]=e}}}}function renderTitle(e,t,n){if(e&&t){var a=document.createElement("label");"any"!==n.type&&"object"!==n.type&&"array"!==n.type&&(a.htmlFor=getInputId());if(appendChild(a,document.createTextNode(t+":"),n),n.description&&(a.title=n.description),n.required){var s=document.createElement("sup");appendChild(s,document.createTextNode("*"),n),appendChild(a,s,n),a.className="required"}appendChild(e,a,n)}}function getInputId(){return formId+"_"+inputCounter}function validate(e){var t=!0;if(e.hasOwnProperty("getValidationError")){var n=e.getValidationError();n?(BrutusinForms.onValidationError(e,n),t=!1):BrutusinForms.onValidationSuccess(e)}if(e.childNodes)for(var a=0;a<e.childNodes.length;a++)validate(e.childNodes[a])||(t=!1);return t}function clear(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}function render(e,t,n,a,s,r){var o=getSchemaId(n),i=getSchema(o);renderInfoMap[o]=new Object,renderInfoMap[o].titleContainer=e,renderInfoMap[o].container=t,renderInfoMap[o].parentObject=a,renderInfoMap[o].propertyProvider=s,renderInfoMap[o].value=r,clear(e),clear(t);var l=renderers[i.type];if(l&&!i.dependsOn)i.title?renderTitle(e,i.title,i):s&&renderTitle(e,s.getValue(),i),r||(r=void 0!==initialValue&&null!==initialValue?getInitialValue(n):i.default),l(t,n,a,s,r);else if(i.$ref&&obj.schemaResolver){var u=function(e){if(e&&e.hasOwnProperty(n)&&JSON.stringify(schemaMap[n])!==JSON.stringify(e[n])){cleanSchemaMap(n),cleanData(n),populateSchemaMap(n,e[n]);var t=renderInfoMap[n];t&&render(t.titleContainer,t.container,n,t.parentObject,t.propertyProvider,t.value)}BrutusinForms.onResolutionFinished(a)};BrutusinForms.onResolutionStarted(a),obj.schemaResolver([n],obj.getData(),u)}}function createPropertyProvider(e,t){var n=new Object;return n.getValue=e,n.onchange=t,n}function getInitialValue(id){var ret;try{eval("ret = initialValue"+id.substring(1))}catch(e){ret=null}return ret}function getValue(schema,input){if("function"==typeof input.getValue)return input.getValue();var value;return value="select"===input.tagName.toLowerCase()?input.options[input.selectedIndex].value:input.value,""===value?null:("integer"===schema.type?(value=parseInt(value),isFinite(value)||(value=null)):"number"===schema.type?(value=parseFloat(value),isFinite(value)||(value=null)):"boolean"===schema.type?"input"===input.tagName.toLowerCase()?(value=input.checked)||(value=!1):"select"===input.tagName.toLowerCase()&&(value="true"===input.value||"false"!==input.value&&null):"any"===schema.type&&value&&eval("value="+value),value)}function getSchemaId(e){return e.replace(/\["[^"]*"\]/g,"[*]").replace(/\[\d*\]/g,"[#]")}function getParentSchemaId(e){return e.substring(0,e.lastIndexOf("."))}function getSchema(e){return schemaMap[e]}function cleanSchemaMap(e){for(var t in schemaMap)e.startsWith(t)&&delete schemaMap[t]}function cleanData(e){new Expression(e).visit(data,function(e,t,n){delete t[n]})}function onDependencyChanged(e,t){var n=dependencyMap[e];if(n&&obj.schemaResolver){var a=function(e){if(e)for(var n in e)if(JSON.stringify(schemaMap[n])!==JSON.stringify(e[n])){cleanSchemaMap(n),cleanData(n),populateSchemaMap(n,e[n]);var a=renderInfoMap[n];a&&render(a.titleContainer,a.container,n,a.parentObject,a.propertyProvider,a.value)}BrutusinForms.onResolutionFinished(t)};BrutusinForms.onResolutionStarted(t),obj.schemaResolver(n,obj.getData(),a)}}function Expression(e){(null===e||0===e.length||"."===e)&&(e="$");for(var t=new Array,n=function(e){if(null===e)return null;for(var t=new Array,n=null,a=0,s=0;s<e.length;s++)'"'===e.charAt(s)?null===n?n='"':'"'===n&&(n=null,t[t.length]=e.substring(a,s+1).trim(),a=s+1):"'"===e.charAt(s)?null===n?n="'":"'"===n&&(n=null,t[t.length]=e.substring(a,s+1).trim(),a=s+1):"["===e.charAt(s)?null===n&&(a!==s&&(t[t.length]=e.substring(a,s).trim()),t[t.length]="[",a=s+1):"]"===e.charAt(s)?null===n&&(a!==s&&(t[t.length]=e.substring(a,s).trim()),t[t.length]="]",a=s+1):"."===e.charAt(s)?null===n&&(a!==s&&(t[t.length]=e.substring(a,s).trim()),a=s+1):s===e.length-1&&(t[t.length]=e.substring(a,s+1).trim());return t}(e),a=!1,s=0,r="",o=0;o<n.length;o++){var i=n[o];if("["===i){if(a)throw"Error parsing expression '"+e+"': Nested [ found";a=!0,s=0,r+=i}else if("]"===i){if(!a)throw"Error parsing expression '"+e+"': Unbalanced ] found";a=!1,r+=i,t[t.length]=r,r=""}else if(a){if(s>0)throw"Error parsing expression '"+e+"': Multiple tokens found inside a bracket";r+=i,s++}else t[t.length]=i;if(o===n.length-1&&a)throw"Error parsing expression '"+e+"': Unbalanced [ found"}this.exp=e,this.queue=t,this.visit=function(e,t){function n(e,a,s,r,o){if(null!=s){var i=a.shift();if("$"===i){e="$";var i=a.shift()}if(i)if(Array.isArray(s)){if(!i.startsWith("["))throw"Node '"+e+"' is of type array";var l=i.substring(1,i.length-1);if(l.equals("#"))for(var u=0;u<s.length;u++){var c=s[u];n(e+i,a.slice(0),c,s,u),n(e+"["+u+"]",a.slice(0),c,s,u)}else if("$"===l){var c=s[s.length-1];n(e+i,a.slice(0),c,s,s.length-1)}else{var d=parseInt(l);if(isNaN(d))throw"Element '"+l+"' of node '"+e+"' is not an integer, or the '$' last element symbol,  or the wilcard symbol '#'";if(0>d)throw"Element '"+l+"' of node '"+e+"' is lower than zero";var c=s[d];n(e+i,a.slice(0),c,s,d)}}else{if("object"!=typeof s)throw"boolean"==typeof s||"number"==typeof s||"string"==typeof s?"Node is leaf but still are tokens remaining: "+i:"Node type '"+typeof s+"' not supported for index field '"+e+"'";if("[*]"===i)for(var p in s){var c=s[p];n(e+i,a.slice(0),c,s,p),n(e+'["'+p+'"]',a.slice(0),c,s,p)}else{var c;if(i.startsWith("[")){var l=i.substring(1,i.length-1);if(!l.startsWith('"')&&!l.startsWith("'"))throw"Element '"+l+"' of node '"+e+"' must be a string expression or wilcard '*'";l=l.substring(1,l.length()-1),e+=i,c=s[l]}else e=e.length>0?e+"."+i:i,c=s[i];n(e,a,c,s,i)}}else t(s,r,o)}}n(this.exp,this.queue,e)}}var SCHEMA_ANY={type:"any"},obj=new Object,schemaMap=new Object,dependencyMap=new Object,renderInfoMap=new Object,container,data,error,initialValue,inputCounter=0,root=schema,formId="BrutusinForms#"+BrutusinForms.instances.length;renameRequiredPropeties(schema),populateSchemaMap("$",schema),validateDepencyMapIsAcyclic();var renderers=new Object;return renderers.integer=function(e,t,n,a,s){renderers.string(e,t,n,a,s)},renderers.number=function(e,t,n,a,s){renderers.string(e,t,n,a,s)},renderers.any=function(e,t,n,a,s){renderers.string(e,t,n,a,s)},renderers.string=function(e,t,n,a,s){var r,o=getSchemaId(t),i=getParentSchemaId(o),l=getSchema(o),u=getSchema(i);if("any"===l.type)r=document.createElement("textarea"),s&&(r.value=JSON.stringify(s,null,4),l.readOnly&&(r.disabled=!0));else if(l.media)r=document.createElement("input"),r.type="file",appendChild(r,c,l);else if(l.enum){if(r=document.createElement("select"),!l.required){var c=document.createElement("option"),d=document.createTextNode("");c.value="",appendChild(c,d,l),appendChild(r,c,l)}for(var p=0,f=0;f<l.enum.length;f++){var c=document.createElement("option"),d=document.createTextNode(l.enum[f]);c.value=l.enum[f],appendChild(c,d,l),appendChild(r,c,l),s&&l.enum[f]===s&&(p=f,l.required||p++,l.readOnly&&(r.disabled=!0))}1===l.enum.length?r.selectedIndex=1:r.selectedIndex=p}else{if(r=document.createElement("input"),"integer"===l.type||"number"===l.type)r.type="number",r.step=l.step?""+l.step:"any","number"!=typeof s&&(s=null);else if("date-time"===l.format)try{r.type="datetime-local"}catch(e){r.type="text"}else"email"===l.format?r.type="email":"text"===l.format?r=document.createElement("textarea"):r.type="text";null!==s&&void 0!==s&&(r.value=s,l.readOnly&&(r.disabled=!0))}return r.schema=o,r.setAttribute("autocorrect","off"),r.getValidationError=function(){try{var e=getValue(l,r);if(null===e){if(l.required){if(!u||"object"!==u.type)return BrutusinForms.messages.required;if(u.required)return BrutusinForms.messages.required;for(var t in n)if(null!==n[t])return BrutusinForms.messages.required}}else{if(l.pattern&&!l.pattern.test(e))return BrutusinForms.messages.pattern.format(l.pattern.source);if(l.minLength&&(!e||l.minLength>e.length))return BrutusinForms.messages.minLength.format(l.minLength);if(l.maxLength&&e&&l.maxLength<e.length)return BrutusinForms.messages.maxLength.format(l.maxLength)}if(null!==e&&!isNaN(e)){if(l.multipleOf&&e%l.multipleOf!=0)return BrutusinForms.messages.multipleOf.format(l.multipleOf);if(l.hasOwnProperty("maximum")){if(l.exclusiveMaximum&&e>=l.maximum)return BrutusinForms.messages.exclusiveMaximum.format(l.maximum);if(!l.exclusiveMaximum&&e>l.maximum)return BrutusinForms.messages.maximum.format(l.maximum)}if(l.hasOwnProperty("minimum")){if(l.exclusiveMinimum&&e<=l.minimum)return BrutusinForms.messages.exclusiveMinimum.format(l.minimum);if(!l.exclusiveMinimum&&e<l.minimum)return BrutusinForms.messages.minimum.format(l.minimum)}}}catch(e){return BrutusinForms.messages.invalidValue}},r.onchange=function(){var e;try{e=getValue(l,r)}catch(t){e=null}n?n[a.getValue()]=e:data=e,onDependencyChanged(o,r)},l.description&&(r.title=l.description,r.placeholder=l.description),r.onchange(),r.id=getInputId(),inputCounter++,appendChild(e,r,l),n},renderers.boolean=function(e,t,n,a,s){var r,o=getSchemaId(t),i=getSchema(o);if(i.required)r=document.createElement("input"),r.type="checkbox",!0===s&&(r.checked=!0);else{r=document.createElement("select");var l=document.createElement("option"),u=document.createTextNode("");u.value="",appendChild(l,u,i),appendChild(r,l,i);var c=document.createElement("option"),d=document.createTextNode(BrutusinForms.messages.true);c.value="true",appendChild(c,d,i),appendChild(r,c,i);var p=document.createElement("option"),f=document.createTextNode(BrutusinForms.messages.false);p.value="false",appendChild(p,f,i),appendChild(r,p,i),!0===s?r.selectedIndex=1:!1===s&&(r.selectedIndex=2)}r.onchange=function(){n?n[a.getValue()]=getValue(i,r):data=getValue(i,r),onDependencyChanged(o,r)},r.schema=o,r.id=getInputId(),inputCounter++,i.description&&(r.title=i.description),r.onchange(),appendChild(e,r,i)},renderers.oneOf=function(e,t,n,a,s){var r=getSchemaId(t),o=getSchema(r),i=document.createElement("select"),l=document.createElement("div");l.innerHTML="",i.type="select",i.schema=r;var u=document.createElement("option");u.value=null,appendChild(i,u,o);for(var c=0;c<o.oneOf.length;c++){var d=document.createElement("option"),p=r+"."+c,f=getSchema(p),m=document.createTextNode(f.title);if(d.value=o.oneOf[c],appendChild(d,m,o),appendChild(i,d,o),void 0!==s&&null!==s&&(o.readOnly&&(i.disabled=!0),s.hasOwnProperty("type")&&f.hasOwnProperty("properties")&&f.properties.hasOwnProperty("type"))){var g=getSchema(f.properties.type);s.type===g.enum[0]&&(i.selectedIndex=c+1,render(null,l,t+"."+(i.selectedIndex-1),n,a,s))}}i.onchange=function(){render(null,l,t+"."+(i.selectedIndex-1),n,a,s)},appendChild(e,i,o),appendChild(e,l,o)},renderers.object=function(e,t,n,a,s){function r(e,t,n,a,s,r){var o=getSchemaId(n),i=getSchema(o),l=t.tBodies[0],u=document.createElement("tr"),c=document.createElement("td");c.className="add-prop-name";var d=document.createElement("table"),p=document.createElement("tr"),f=document.createElement("td"),m=document.createElement("td"),g="$"+Object.keys(e).length+"$",h=document.createElement("td");h.className="prop-value";var v=document.createElement("input");v.type="text";var y;r&&(y=RegExp(r)),v.getValidationError=function(){return v.previousValue!==v.value&&e.hasOwnProperty(v.value)?BrutusinForms.messages.addpropNameExistent:v.value?void 0:BrutusinForms.messages.addpropNameRequired};var b=createPropertyProvider(function(){if(v.value){if(!y)return v.value;if(-1!==v.value.search(y))return v.value}return g},function(t){b.getValue()!==t&&(t&&e.hasOwnProperty(t)||(t=g),(e.hasOwnProperty(t)||y&&-1===b.getValue().search(y))&&(e[b.getValue()]=e[t],delete e[t]))});v.onblur=function(){if(v.previousValue!==v.value){for(var t=v.value,n=1;v.previousValue!==t&&e.hasOwnProperty(t);)t=v.value+"("+n+")",n++;return v.value=t,b.onchange(v.previousValue),void(v.previousValue=v.value)}};var w=document.createElement("button");w.setAttribute("type","button"),w.className="remove",appendChild(w,document.createTextNode("x"),i),w.onclick=function(){delete e[v.value],t.deleteRow(u.rowIndex),v.value=null,b.onchange(v.previousValue)},appendChild(f,v,i),appendChild(m,w,i),appendChild(p,f,i),appendChild(p,m,i),appendChild(d,p,i),appendChild(c,d,i),void 0!==r&&(v.placeholder=r),appendChild(u,c,i),appendChild(u,h,i),appendChild(l,u,i),appendChild(t,l,i),render(null,h,n,e,b,s),a&&(v.value=a,v.onblur())}var o=getSchemaId(t),i=getSchema(o),l=new Object;n?(a.getValue()||0===a.getValue())&&(n[a.getValue()]=l):data=l;var u=document.createElement("table");u.className="object";var c=document.createElement("tbody");appendChild(u,c,i);var d=0;if(i.hasOwnProperty("properties")){d=i.properties.length;for(var p in i.properties){var f=document.createElement("tr"),m=document.createElement("td");m.className="prop-name";var g=t+"."+p,h=getSchema(getSchemaId(g)),v=document.createElement("td");v.className="prop-value",appendChild(c,f,h),appendChild(f,m,h),appendChild(f,v,h);var y=function(e){var t=new Object;return t.getValue=function(){return e},t.onchange=function(e){},t}(p),b=null;s&&(b=s[p]),render(m,v,g,l,y,b)}}var w=[];if(i.patternProperties||i.additionalProperties){var _=document.createElement("div");if(appendChild(_,u,i),i.patternProperties)for(var k in i.patternProperties){var T=i.patternProperties[k],S=document.createElement("div");S.className="add-pattern-div";var C=document.createElement("button");if(C.setAttribute("type","button"),C.pattern=k,C.id=t+"["+k+"]",C.onclick=function(){r(l,u,this.id,void 0,void 0,this.pattern)},(i.maxProperties||i.minProperties)&&(C.getValidationError=function(){return i.minProperties&&d+u.rows.length<i.minProperties?BrutusinForms.messages.minProperties.format(i.minProperties):i.maxProperties&&d+u.rows.length>i.maxProperties?BrutusinForms.messages.maxProperties.format(i.maxProperties):void 0}),T.description&&(C.title=T.description),appendChild(C,document.createTextNode("Add "+k),i),appendChild(S,C,i),s)for(var O in s)if(!i.properties||!i.properties.hasOwnProperty(O)){var $=RegExp(k);-1!==O.search($)&&-1===w.indexOf(O)&&(r(l,u,t+"["+k+"]",O,s[O],k),w.push(O))}appendChild(_,S,i)}if(i.additionalProperties){var x=getSchema(i.additionalProperties),C=document.createElement("button");if(C.setAttribute("type","button"),C.onclick=function(){r(l,u,t+"[*]",void 0)},(i.maxProperties||i.minProperties)&&(C.getValidationError=function(){return i.minProperties&&d+u.rows.length<i.minProperties?BrutusinForms.messages.minProperties.format(i.minProperties):i.maxProperties&&d+u.rows.length>i.maxProperties?BrutusinForms.messages.maxProperties.format(i.maxProperties):void 0}),x.description&&(C.title=x.description),appendChild(C,document.createTextNode("Add"),i),appendChild(_,C,i),s)for(var O in s)i.properties&&i.properties.hasOwnProperty(O)||-1===w.indexOf(O)&&r(l,u,t+'["'+p+'"]',O,s[O])}appendChild(e,_,i)}else appendChild(e,u,i)},renderers.array=function(e,t,n,a,s){function r(e,t,n,a,s){var r=getSchemaId(n),o=getSchema(r),i=document.createElement("tbody"),l=document.createElement("tr");l.className="item";var u=document.createElement("td");u.className="item-index";var c=document.createElement("td");c.className="item-action";var d=document.createElement("td");d.className="item-value";var p=document.createElement("button");p.setAttribute("type","button"),p.className="remove",!0===s&&(p.disabled=!0),appendChild(p,document.createTextNode("x"),o);var f=function(){for(var e=0;e<t.rows.length;e++){t.rows[e].cells[0].innerHTML=e+1}};p.onclick=function(){e.splice(l.rowIndex,1),t.deleteRow(l.rowIndex),f()},appendChild(c,p,o),appendChild(u,document.createTextNode(t.rows.length+1),o),appendChild(l,u,o),appendChild(l,c,o),appendChild(l,d,o),appendChild(i,l,o),appendChild(t,i,o);var m=createPropertyProvider(function(){return l.rowIndex});render(null,d,n,e,m,a)}var o=getSchemaId(t),i=getSchema(o),l=getSchema(i.items),u=new Array;n?(a.getValue()||0===a.getValue())&&(n[a.getValue()]=u):data=u,a&&(a.onchange=function(e){delete n[e],n[a.getValue()]=u});var c=document.createElement("div"),d=document.createElement("table");d.className="array",appendChild(c,d,i),appendChild(e,c,i);var p=document.createElement("button");if(i.readOnly&&(p.disabled=!0),p.setAttribute("type","button"),p.getValidationError=function(){if(i.minItems&&i.minItems>d.rows.length)return BrutusinForms.messages.minItems.format(i.minItems);if(i.maxItems&&i.maxItems<d.rows.length)return BrutusinForms.messages.maxItems.format(i.maxItems);if(i.uniqueItems)for(var e=0;e<u.length;e++)for(var t=e+1;t<u.length;t++)if(JSON.stringify(u[e])===JSON.stringify(u[t]))return BrutusinForms.messages.uniqueItems},p.onclick=function(){r(u,d,t+"[#]",null)},l.description&&(p.title=l.description),appendChild(p,document.createTextNode(BrutusinForms.messages.addItem),i),appendChild(c,d,i),appendChild(c,p,i),s&&s instanceof Array)for(var f=0;f<s.length;f++)r(u,d,t+"["+f+"]",s[f],i.readOnly);appendChild(e,c,i)},obj.render=function(e,t){container=e,initialValue=t;var n=document.createElement("form");if(n.className="brutusin-form",n.onsubmit=function(e){return!1},container?appendChild(container,n):appendChild(document.body,n),error){var a=document.createElement("label");appendChild(a,document.createTextNode(error)),a.className="error-message",appendChild(n,a)}else render(null,n,"$",null,null);dependencyMap.hasOwnProperty("$")&&onDependencyChanged("$"),BrutusinForms.postRender&&BrutusinForms.postRender(obj)},obj.getRenderingContainer=function(){return container},obj.validate=function(){return validate(container)},obj.getData=function(){function e(t,n){if(null===i&&(i=SCHEMA_ANY),n.$ref&&(n=getDefinition(n.$ref)),t instanceof Array){if(0===t.length)return null;for(var a=new Array,s=0;s<t.length;s++)a[s]=e(t[s],n.items);return a}if(""===t)return null;if(t instanceof Object){var a=new Object,r=!1;for(var o in t)if(!o.startsWith("$")||!o.endsWith("$")){var i=null;if(n.hasOwnProperty("properties")&&n.properties.hasOwnProperty(o)&&(i=n.properties[o]),null===i&&n.hasOwnProperty("additionalProperties")&&"object"==typeof n.additionalProperties&&(i=n.additionalProperties),null===i&&n.hasOwnProperty("patternProperties"))for(var l in n.patternProperties){var u=RegExp(l);if(-1!==o.search(u)){i=n.patternProperties[l];break}}var c=e(t[o],i);null!==c&&(a[o]=c,r=!0)}return r||n.required?a:null}return t}return container?e(data,schema):null},BrutusinForms.instances[BrutusinForms.instances.length]=obj,obj},brutusin["json-forms"]=BrutusinForms}()},function(e,t){},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function a(e){return e&&DataView.prototype.isPrototypeOf(e)}function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return _.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function c(e){var t=new FileReader,n=u(t);return t.readAsArrayBuffer(e),n}function d(e){var t=new FileReader,n=u(t);return t.readAsText(e),n}function p(e){for(var t=new Uint8Array(e),n=new Array(t.length),a=0;a<t.length;a++)n[a]=String.fromCharCode(t[a]);return n.join("")}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:_.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:_.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():_.arrayBuffer&&_.blob&&a(e)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):_.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||T(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(c)}),this.text=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return d(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(e){var t=e.toUpperCase();return S.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=g(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),a=n.shift().replace(/\+/g," "),s=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(a),decodeURIComponent(s))}}),t}function y(e){var t=new i;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),a=n.shift().trim();if(a){var s=n.join(":").trim();t.append(a,s)}}),t}function b(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}function w(e,t){return new Promise(function(n,a){function s(){o.abort()}var r=new h(e,t);if(r.signal&&r.signal.aborted)return a(new O("Aborted","AbortError"));var o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:y(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new b(t,e))},o.onerror=function(){a(new TypeError("Network request failed"))},o.ontimeout=function(){a(new TypeError("Network request failed"))},o.onabort=function(){a(new O("Aborted","AbortError"))},o.open(r.method,r.url,!0),"include"===r.credentials?o.withCredentials=!0:"omit"===r.credentials&&(o.withCredentials=!1),"responseType"in o&&_.blob&&(o.responseType="blob"),r.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),r.signal&&(r.signal.addEventListener("abort",s),o.onreadystatechange=function(){4===o.readyState&&r.signal.removeEventListener("abort",s)}),o.send(void 0===r._bodyInit?null:r._bodyInit)})}Object.defineProperty(t,"__esModule",{value:!0}),t.Headers=i,t.Request=h,t.Response=b,n.d(t,"DOMException",function(){return O}),t.fetch=w;var _={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(_.arrayBuffer)var k=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],T=ArrayBuffer.isView||function(e){return e&&k.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,t){e=s(e),t=r(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},i.prototype.delete=function(e){delete this.map[s(e)]},i.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},i.prototype.set=function(e,t){this.map[s(e)]=r(t)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),o(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},_.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},m.call(h.prototype),m.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var C=[301,302,303,307,308];b.redirect=function(e,t){if(-1===C.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})};var O=self.DOMException;try{new O}catch(e){O=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},O.prototype=Object.create(Error.prototype),O.prototype.constructor=O}w.polyfill=!0,self.fetch||(self.fetch=w,self.Headers=i,self.Request=h,self.Response=b)},function(e,t,n){e.exports=n(12)}]);